<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Python知识点大全 | Andy Yin</title><meta name="keywords" content="数据分析,Python"><meta name="author" content="Andy Yin"><meta name="copyright" content="Andy Yin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Python知识点大全"><meta name="application-name" content="Python知识点大全"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Python知识点大全"><meta property="og:url" content="http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="Andy Yin"><meta property="og:description" content="Python常用知识点总结"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=65347007-cd0c-01c2-f453-81997d895d32"><meta property="article:author" content="Andy Yin"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=65347007-cd0c-01c2-f453-81997d895d32"><meta name="description" content="Python常用知识点总结"><link rel="shortcut icon" href="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/favicon.ico"><link rel="canonical" href="http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"你要去哪里!?!","backTitle":"欢迎回来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "custom",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: {"appId":"TYNXF0S4RM","apiKey":"ee67f875ca96b84ea83b69de510d0035","indexName":"myblog","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Andy Yin","link":"链接: ","source":"来源: Andy Yin","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Andy Yin',
  title: 'Python知识点大全',
  postAI: '',
  pageFillDescription: 'Python基础, 变量的命名和使用, 注释, 单行注释, 多行注释, 单引号（’’’）, 双引号（）, 进制转换, 十进制转N进制, 二进制转N进制, 八进制转N进制, 十六进制转N进制, 字符串（String）, 访问字符串的值, 转义字符, 字符串运算符, 字符串格式化, 多行字符串, 三引号, 续航符, 括号, 内建函数, upper()、lower()、title(), strip(), count(), split(), replace(), find(), join(), isxxx(), format(), 数字格式化, f-string, 列表（List）, 访问列表值, 切片, 添加元素, 插入元素, 删除元素, 扩展列表, 组织排序, 反转顺序, 获取列表长度, 匹配位置, 脚本操作符, 列表推导式, 元组（Tuple）, 创建元组, 修改元组, 删除元组, 访问元组, 迭代元组, 拆分元祖, 运算符, 元组推导式, 字典（Dict）, 访问字典中的值, 修改字典, 删除字典元素, 清空字典, 遍历字典, 遍历所有键值对, 遍历所有键, 遍历所有值, 融合字典, 用序列创建字典, 字典推导式, 字典键的特性, 内置方法, get(), keys(), values(), items(), 集合（Set）, 创建集合, 添加元素, 删除元素, 判断元素是否在集合中存在, 集合运算, 集合推导式, 函数, 可更改(mutable)与不可更改(immutable)对象, 传不可变对象实例, 传可变对象实例, 可变参数, 位置参数（positional argument）, 关键字参数（keyword argument）, 匿名(lambda)函数, 内置函数, print(), eval(), enumerate(), filter(), map(), sorted(), zip(), reversed(), setattr(), hasattr(), getattr(), 三元表达式, 文件处理, 文件打开, With关键字, 文件对象读写, file.read(), file.readline(), file.readlines(), file.write(), file.tell(), file.seek(), NumPy, Ndarray 对象, numpy.array, 数组属性, 创建数组, numpy.arange, numpy.empty, numpy.zeros, numpy.ones, numpy.zeros_like, numpy.ones_like, numpy.linspace, 切片和索引, 数组索引, 布尔索引, 花式索引, 一维数组, 二维数组, 数组操作, 修改数组形状, numpy.reshape, 数组转置和轴对换, 利用数组进行数据处理, 将条件逻辑表述为数组运算, 数学和统计方法, 用于布尔型数组的方法, 排序, 唯一化以及其它的集合逻辑, 深拷贝amp浅拷贝, 完全不复制, 视图或浅拷贝, 深拷贝, Pandas, 数据结构, Series, DataFrame, 常用方法, 索引对象, 基本功能, 重新索引, 丢弃指定轴上的项, 索引、选取和过滤, query(), 用loc和iloc进行选取, 整数索引, 算术运算和数据对齐, 在算术方法中填充值, DataFrame和Series之间的运算, 函数应用和映射, 排序和排名, sort_index(), ascending, sort_values(), 带有重复标签的轴索引, 汇总和计算描述统计, sum(), skipna, idxmax(), cumsum(), describe(), unique(), nunique(), value_counts(), 统计函数一览表, 数据加载与存储, Excel文件, to_excel, set_index, CSV amp 文本文件, read_csv(), read_table(), 自定义行x2F列名, 自定义分隔符, 逐块读取文本文件, nrows, chunksize, to_csv(), 处理分隔符格式, 缺失数据处理, 滤除缺失数据, dropna(), 填充缺失数据, fillna(), 数据转换, 移除重复数据, duplicated(), drop_duplicates(), 矢量化字符串方法, .dt 访问器, 日期处理, 日期和时间数据类型及工具, datetime.datetime, datetime.datetime.now(), datetime.timedelta, 字符串和datetime的相互转换, datetime.strftime(), datetime.strptime(), pandas.to_datetime(), 格式化编码表, 时间序列, 日期的范围、频率以及移动, pandas.date_range()基础变量的命名和使用变量名只能包含字母数字和下划线变量名可以字母或下划线打头但不能以数字打头例如可将变量命名为但不能将其命名为变量名不能包含空格但可使用下划线来分隔其中的单词例如变量名可行但变量名会引发错误不要将关键字和函数名用作变量名即不要使用保留用于特殊用途的单词如变量名应既简短又具有描述性例如比好比好比好慎用小写字母和大写字母因为它们可能被人错看成数字和注释单行注释中单行注释以开头例如这是一个注释多行注释多行注释用三个单引号或者三个双引号将注释括起来例如单引号这是多行注释用三个单引号这是多行注释用三个单引号这是多行注释用三个单引号双引号这是多行注释用三个双引号这是多行注释用三个双引号这是多行注释用三个双引号进制转换十进制转进制获取用户输入十进制数输入数字十进制数为转换为二进制为转换为八进制为转换为十六进制为二进制转进制二进制转换为十进制十进制转换为八进制十进制转换为十六进制二进制数转换为十进制转换为八进制转换为十六进制八进制转进制八进制转换为十进制十进制转换为二进制十进制转换为十六进制八进制数转换为十进制转换为二进制转换为十六进制十六进制转进制十六进制转换为十进制十进制转换为二进制十进制转换为八进制十六进制数转换为十进制转换为二进制转换为八进制字符串访问字符串的值访问子字符串可以使用方括号来截取字符串如下实例转义字符在需要在字符中使用特殊字符时用反斜杠转义字符如下表转义字符描述在行尾时续行符反斜杠符号单引号双引号响铃退格转义空换行纵向制表符横向制表符回车换页八进制数代表的字符例如代表换行十六进制数以开头代表的字符例如代表换行其它的字符以普通格式输出如果不希望前置的字符转义成特殊字符可以使用原始字符串在引号前添加即可这里的意思是换行这里不会转义字符串运算符下表实例变量值为字符串变量值为操作符描述实例字符串连接重复输出字符串通过索引获取字符串中字符截取字符串中的一部分成员运算符如果字符串中包含给定的字符返回成员运算符如果字符串中不包含给定的字符返回原始字符串原始字符串所有的字符串都是直接按照字面的意思来使用没有转义特殊或不能打印的字符原始字符串除在字符串的第一个引号前加上字母可以大小写以外与普通字符串有着几乎完全相同的语法字符串格式化基本的用法是将一个值插入到一个有字符串格式符的字符串中字符串格式化符号符号描述格式化字符及其码格式化字符串格式化整数格式化无符号整型格式化无符号八进制数格式化无符号十六进制数格式化无符号十六进制数大写格式化浮点数字可指定小数点后的精度用科学计数法格式化浮点数作用同用科学计数法格式化浮点数和的简写和的简写用十六进制数格式化变量的地址实例多行字符串三引号中三引号可以将复杂的字符串进行赋值三引号允许一个字符串跨多行字符串中可以包含换行符制表符以及其他特殊字符三引号的语法是一对连续的单引号或者双引号通常都是成对的用续航符括号内建函数将字符串进行大小写或标题化转换中的小写字母为大写转换中所有大写字符为小写返回标题化的就是说所有单词都是以大写开始其余字母均为小写删除字符串的空格在上执行和删除首尾的空格截掉开头的空格删除末尾的空格返回在里面出现的次数搜索的子字符串字符串开始搜索的位置默认为第一个字符第一个字符索引值为字符串中结束搜索的位置字符中第一个字符的索引为默认为字符串的最后一个位置以为分隔符截取字符串分隔符默认为所有的空字符包括空格换行制表符等分割次数默认为即分隔所有返回值返回分割后的字符串列表以空格为分隔符以为分隔符分割一次以为分隔符将被替换的子字符串新字符串用于替换子字符串可选替换不超过次检测是否包含在字符串中指定检索的字符串开始索引默认为结束索引默认为字符串的长度方法用于将序列中的元素以指定的字符连接生成一个新的字符串要连接的元素序列判断字符串是否是字母或数字或空白判断字符串是否是字母或数字判断字符串是否是字母或中文字判断字符串是否是数字判断字符串是否是数字字符判断字符串是否只包含空白基本语法是通过和来代替以前的函数可以接受不限个参数位置可以不按顺序不设置指定位置按默认顺序设置指定位置设置指定位置网站名地址菜鸟教程网站名菜鸟教程地址通过字典设置参数菜鸟教程网站名地址网站名菜鸟教程地址通过列表索引设置参数菜鸟教程网站名地址是必须的网站名菜鸟教程地址数字格式化下表展示了格式化数字的多种方法注意返回的是字符串数字格式输出描述保留小数点后两位带符号保留小数点后两位带符号保留小数点后两位不带小数数字补零填充左边宽度为数字补填充右边宽度为数字补填充右边宽度为以逗号分隔的数字格式百分比格式指数记法右对齐默认宽度为左对齐宽度为中间对齐宽度为进制分别是居中左对齐右对齐后面带宽度号后面带填充的字符只能是一个字符不指定则默认是用空格填充表示在正数前显示负数前显示空格表示在正数前加空格分别是二进制十进制八进制十六进制此外我们可以使用大括号来转义大括号如下实例对应的位置是对应的位置是是之后版本添加的称之为字面量格式化字符串是新的格式化字符串的语法格式化字符串以开头后面跟着字符串字符串中的表达式用大括号包起来它会将变量或表达式计算后的值替换进去实例如下替换变量使用表达式列表列表由一系列按特定顺序排列的元素组成你可以创建包含字母表中所有字母数字或所有家庭成员姓名的列表也可以将任何东西加入列表中其中的元素之间可以没有任何关系与元组对比列表的长度可变内容可以被修改你可以用方括号定义或用函数函数常用来在数据处理中实体化迭代器或生成器访问列表值在中第一个列表元素的索引为而不是为访问最后一个列表元素提供了一种特殊语法通过将索引指定为可让返回最后一个列表元素切片用切边可以选取大多数序列类型的一部分切片的基本形式是在方括号中使用切片的起始元素是包括的不包含结束元素因此结果中包含的元素个数是或都可以被省略省略之后分别默认序列的开头和结尾下图展示了正整数和负整数的切片在图中指数标示在边缘以表明切片是在哪里开始哪里结束的在第二个冒号后面使用可以隔一个取一个元素一个聪明的方法是使用它可以将列表或元组颠倒过来添加元素用于在列表末尾添加新元素插入元素用于将指定对象插入列表的指定位置为此你需要指定新元素的索引和值警告与相比耗费的计算量大因为对后续元素的引用必须在内部迁移以便为新元素提供空间如果要在序列的头部和尾部插入元素你可能需要使用一个双尾部队列删除元素语句使用语句可以从一个列表中根据索引来删除一个元素而不是值来删除元素这与使用返回删除的元素值不同用于移除列表中某个值的第一个匹配项只删除第一个指定的值如果要删除的值可能在列表中出现多次就需要使用循环来判断是否删除了所有这样的值用于移除列表中的一个元素默认最后一个元素并且返回该元素的值用于清空列表类似于扩展列表用于在列表末尾一次性追加另一个序列中的多个值用新列表扩展原来的列表元素列表可以是列表元组集合字典若为字典则仅会将键作为元素依次添加至原列表的末尾创建的列表扩展列表语言列表元组集合添加元组元素到列表末尾添加集合元素到列表末尾组织排序函数用于对原列表进行原地排序不创建新的对象如果指定参数则使用比较函数指定的比较函数对列表按照元素的长度进行排序反转顺序函数用于反向列表中元素方法永久性地修改列表元素的排列顺序获取列表长度使用函数可快速获悉列表的长度匹配位置查找的对象可选查找的起始位置可选查找的结束位置脚本操作符表达式结果描述长度组合重复元素是否存在于列表中迭代列表推导式列表推导式格式为表达式变量列表或者表达式变量列表条件列表生成元素表达式可以是有返回值的函数迭代将传入到表达式中条件语句可以过滤列表中不符合条件的值实例元组的元组与列表类似不同之处在于元组的元素不能修改创建元组元组是一个固定长度不可改变的序列对象创建元组的最简单方式是用逗号分隔一列值小括号内置函数任意无符号的对象以逗号隔开默认为元组创建空元组元组中只包含一个元素时需要在元素后面添加逗号用可以将任意序列或迭代器转换成元组修改元组元组中存储的对象可能是可变对象一旦创建了元组元组中的对象就不能修改了元组中的元素值是不允许修改的但我们可以对元组用加法运算符进行连接组合创建一个新的元组如果元组中的某个对象是可变的比如列表可以在原位进行修改删除元组元组中的元素值是不允许删除的但我们可以使用语句来删除整个元组如下实例访问元组表达式描述读取第三个元素反向读取读取倒数第二个元素截取元素迭代元组元组是可迭代对象可以使用进行遍历拆分元祖如果你想将元组赋值给类似元组的变量会试图拆分等号右边的值即使含有元组的元组也会被拆分变量拆分常用来迭代元组或列表序列允许从元组的开头摘取几个元素它使用了特殊的语法这也用在函数签名中以抓取任意长度列表的位置参数的部分是想要舍弃的部分的名字不重要作为惯用写法许多程序员会将不需要的变量使用下划线因为元组的大小和内容不能修改它的实例方法都很轻量其中一个很有用的就是也适用于列表它可以统计某个值得出现频率运算符表达式结果描述计算元素个数连接复制元素是否存在迭代元组推导式元组推导式可以利用区间元组列表字典和集合等数据类型快速生成一个满足指定需求的元组元组推导式基本格式或实例返回的是生成器对象使用函数可以直接将生成器对象转换成元组字典字典是另一种可变容器模型且可存储任意类型对象字典的每个键值对用冒号分割每个键值对之间用逗号分割整个字典包括在花括号中注意作为的关键字和内置函数变量名不建议命名为访问字典中的值把相应的键放入熟悉的方括弧如下实例修改字典如果键存在则修改对应的值如果键不存在则新增这个键和值向字典添加新内容的方法是增加新的键值对修改或删除已有键值对如下实例更新添加你可以用检查列表和元组是否包含某个值的方法检查字典中是否包含某个键删除字典元素对于字典中不再需要的信息可使用语句将相应的键值对彻底删除使用语句时必须指定字典名和要删除的键字典方法删除字典键所对应的值返回被删除的值要删除的键当键不存在时返回的值清空字典清空字典删除字典遍历字典遍历所有键值对以列表返回可遍历的键值元组数组注意即便遍历字典时键值对的返回顺序也与存储顺序不同不关心键值对的存储顺序而只跟踪键和值之间的关联关系遍历所有键返回一个字典所有的键方法并非只能用于遍历实际上它返回一个列表其中包含字典中的所有键遍历字典时会默认遍历所有的键因此如果将上述代码中的替换为输出将不变遍历所有值以列表返回一个字典所有的值融合字典用方法可以将一个字典与另一个融合方法是原地改变字典因此任何传递给的键的旧的值都会被舍弃用序列创建字典常常你可能想将两个序列配对组合成字典下面是一种写法因为字典本质上是元元组的集合可以接受二元元组的列表字典推导式字典推导基本格式或实例将列表中各字符串值为键各字符串的长度为值组成键值对字典键的特性字典值可以没有限制地取任何对象既可以是标准的对象也可以是用户定义的但键不行两个重要的点需要记住不允许同一个键出现两次创建时如果同一个键被赋值两次后一个值会被记住如下实例键必须不可变所以可以用数字字符串或元组充当不可以是列表如下实例内置方法函数返回指定键的值字典中要查找的键可选如果指定键的值不存在时返回该默认值没有设置也没有设置默认的值输出没有设置输出默认的值方法访问元素区别方法在键不在字典中时可以返回默认值或者设置的默认值在键不在字典中时会触发异常返回触发字典方法返回一个视图对象视图对象不是列表不支持索引可以使用来转换为列表我们不能对视图对象进行任何的修改因为字典的视图对象都是只读的实例字典方法返回一个视图对象视图对象不是列表不支持索引可以使用来转换为列表我们不能对视图对象进行任何的修改因为字典的视图对象都是只读的实例迭代方法以列表返回视图对象是一个可遍历的对视图对象不是列表不支持索引可以使用来转换为列表我们不能对视图对象进行任何的修改因为字典的视图对象都是只读的实例集合集合是一个无序的不重复元素序列可以使用大括号或者函数创建集合创建一个空集合必须用而不是因为是用来创建一个空字典集合的特点自动去除重复数据顺序随机不支持下标创建集合或者实例这里演示的是去重功能添加元素将元素添加到集合中如果元素已存在则不进行任何操作方法用于修改当前集合可以添加新的元素或集合到当前集合中如果添加的元素在集合中已存在则该元素只会出现一次重复的会忽略删除元素方法用于移除集合中的指定元素方法在移除一个不存在的元素时会发生错误方法用于移除指定的集合元素该方法不同于方法因为方法在移除一个不存在的元素时会发生错误而方法不会方法用于随机移除一个元素也可能是或者判断元素是否在集合中存在判断元素是否在集合中存在返回不存在返回集合运算集合支持合并交集差分和对称差等数学集合运算考虑两个示例集合合并是取两个集合中不重复的元素可以用方法或者运算符交集的元素包含在两个集合中可以用或运算符表列出了常用的集合方法集合推导式集合推导式基本格式或实例函数函数是组织好的可重复使用的用来实现单一或相关联功能的代码段你可以定义一个由自己想要功能的函数以下是简单的规则函数代码块以关键词开头后接函数标识符名称和圆括号任何传入参数和自变量必须放在圆括号中间圆括号之间可以用于定义参数函数的第一行语句可以选择性地使用文档字符串用于存放函数说明函数内容以冒号起始并且缩进表达式结束函数选择性地返回一个值给调用方不带表达式的相当于返回函数文档字符串可更改与不可更改对象在中和是不可更改的对象而等则是可以修改的对象不可变类型变量赋值后再赋值这里实际是新生成一个值对象再让指向它而被丢弃不是改变的值相当于新生成了可变类型变量赋值后再赋值则是将的第三个元素值更改本身没有动只是其内部的一部分值被修改了函数的参数传递不可变类型类似的值传递如整数字符串元组如传递的只是的值没有影响对象本身比如在内部修改的值只是修改另一个复制的对象不会影响本身可变类型类似的引用传递如列表字典如则是将真正的传过去修改后外部的也会受影响中一切都是对象严格意义我们不能说值传递还是引用传递我们应该说传不可变对象和传可变对象传不可变对象实例结果是实例中有对象指向它的变量是在传递给函数时按传值的方式复制了变量和都指向了同一个对象在时则新生成一个值对象并让指向它传可变对象实例可写函数说明修改传入的列表函数内取值调用函数函数外取值实例中传入函数的和在末尾添加新内容的对象用的是同一个引用故输出结果如下函数内取值函数外取值可变参数位置参数所谓位置参数是指用相对位置指代参数函数文档字符串参数收集所有未匹配的位置参数组成一个对象局部变量指向此对象位置参数实例如下打印任何传入的参数调用函数关键字参数使用关键字指代参数函数文档字符串参数收集所有未匹配的关键字参数组成一个对象局部变量指向此对象关键词参数实例如下匿名函数使用来创建匿名函数只是一个表达式函数体比简单很多的主体是一个表达式而不是一个代码块仅仅能在表达式中封装有限的逻辑进去函数拥有自己的命名空间且不能访问自有参数列表之外或全局命名空间里的参数虽然函数看起来只能写一行却不等同于或的内联函数后者的目的是调用小函数时不占用栈内存从而增加运行效率语法实例内置函数方法用于打印输出复数表示可以一次输出多个对象输出多个对象时需要用分隔用来间隔多个对象默认值是一个空格用来设定以什么结尾默认值是换行符我们可以换成其他字符串要写入的文件对象输出是否被缓存通常决定于但如果关键字参数为流会被强制刷新函数用来执行一个字符串表达式并返回表达式的值表达式变量作用域全局命名空间如果被提供则必须是一个字典对象变量作用域局部命名空间如果被提供可以是任何映射对象姓名张三年龄姓名李四年龄姓名张三年龄姓名李四年龄函数用于将一个可遍历的数据对象如列表元组或字符串组合为一个索引序列同时列出数据和数据下标可以返回元组序列一般用在循环当中实例下标从开始循环使用当你索引数据时使用的一个好方法是计算序列唯一的映射到位置的值函数用于过滤序列过滤掉不符合条件的元素返回一个迭代器对象如果要转换为列表可以使用来转换该接收两个参数第一个为函数第二个为序列序列的每个元素作为参数传递给函数进行判断然后返回或最后将返回的元素放到新列表中函数会根据提供的函数对指定序列做映射第一个参数以参数序列中的每一个元素调用函数返回包含每次函数返回值的新列表函数名一个或多个序列返回一个迭代器计算平方数计算列表各个元素的平方返回迭代器使用转换为列表使用匿名函数输入一行整数数字之间以空格间隔输出这些数字组成的完整列表映射列表推导式函数让你能够按特定顺序显示列表元素同时不影响它们在列表中的原始排列顺序可迭代对象主要是用来进行比较的元素只有一个参数具体的函数的参数就是取自于可迭代对象中指定可迭代对象中的一个元素来进行排序排序规则降序升序默认返回值返回重新排序的列表函数用于将可迭代的对象作为参数将对象中对应的元素打包成一个个元组然后返回由这些元组组成的对象这样做的好处是节约了不少的内存我们可以使用转换来输出列表返回一个对象转换为列表元素个数与最短的列表一致与相反可理解为解压返回二维矩阵式给出一个被压缩的序列可以被用来解压序列也可以当作把行的列表转换为列的列表这个方法看起来有点神奇的常见用法之一是同时迭代多个序列可能结合使用函数返回一个反转的迭代器要转换的序列可以是或要记住是一个生成器只有实体化即列表或循环之后才能创建翻转的序列函数对应函数用于设置属性值该属性不一定是存在的如果属性不存在会创建一个新的对象属性并对属性赋值对象字符串对象属性属性值获取属性值设置属性值函数用于判断对象是否包含对应的属性对象字符串属性名没有该属性函数用于返回一个对象属性值对象字符串对象属性默认返回值如果不提供该参数在没有对应属性时将触发获取属性值属性不存在触发异常属性不存在但设置了默认值三元表达式中的三元操作符可以使用语句也就是条件操作符的一个快捷方式或可以是任何代码它和下面的代码效果相同举例男女男文件处理文件打开方法用于打开一个文件并返回文件对象在对文件进行处理过程都需要使用到这个函数如果该文件无法被打开会抛出最常使用的是两个位置参数和一个关键字参数完整的语法格式为参数有模式描述以只读方式打开文件文件的指针将会放在文件的开头这是默认模式打开一个文件只用于写入如果该文件已存在则打开文件并从开头开始编辑即原有内容会被删除如果该文件不存在创建新文件打开一个文件用于追加如果该文件已存在文件指针将会放在文件的结尾也就是说新的内容将会被写入到已有内容之后如果该文件不存在创建新文件进行写入文本模式默认二进制模式打开一个文件进行更新可读可写通用换行模式不支持写模式新建一个文件如果该文件已存在则会报错以二进制格式打开一个文件用于只读文件指针将会放在文件的开头这是默认模式一般用于非文本文件如图片等打开一个文件用于读写文件指针将会放在文件的开头以二进制格式打开一个文件用于读写文件指针将会放在文件的开头一般用于非文本文件如图片等以二进制格式打开一个文件只用于写入如果该文件已存在则打开文件并从开头开始编辑即原有内容会被删除如果该文件不存在创建新文件一般用于非文本文件如图片等打开一个文件用于读写如果该文件已存在则打开文件并从开头开始编辑即原有内容会被删除如果该文件不存在创建新文件以二进制格式打开一个文件用于读写如果该文件已存在则打开文件并从开头开始编辑即原有内容会被删除如果该文件不存在创建新文件一般用于非文本文件如图片等以二进制格式打开一个文件用于追加如果该文件已存在文件指针将会放在文件的结尾也就是说新的内容将会被写入到已有内容之后如果该文件不存在创建新文件进行写入打开一个文件用于读写如果该文件已存在文件指针将会放在文件的结尾文件打开时会是追加模式如果该文件不存在创建新文件用于读写以二进制格式打开一个文件用于追加如果该文件已存在文件指针将会放在文件的结尾如果该文件不存在创建新文件用于读写二进制可读可写只要文件不存在就报错指针放在文件开头只要文件不存在就新建文件指针放在文件开头用新内容覆盖原内容只要文件不存在就新建文件指针放在文件结尾关键字在处理文件对象时最好使用关键字优点是子句体结束后文件会正确关闭即便触发异常也可以而且使用相比等效的代码块要简短得多警告调用时未使用关键字或未调用即使程序正常退出也可能导致的参数没有完全写入磁盘文件对象读写方法用于从文件读取指定的字符数文本模式或字节数二进制模式如果未给定参数或为负数则读取文件所有内容如已到达文件末尾返回空字符串打开文件从文件中读取单行数据字符串末尾保留换行符只有在文件不以换行符结尾时文件的最后一行才会省略换行符这种方式让返回值清晰明确只要返回空字符串就表示已经到达了文件末尾空行使用表示该字符串只包含一个换行符从文件中读取多行时可以用循环遍历整个文件对象这种操作能高效利用内存快速且代码简单方法用于读取所有行直到结束符并返回列表该列表可以由的结构进行处理如果碰到结束符则返回空字符串如需以列表形式读取文件中的所有行可以用或方法用于向文件中写入指定字符串并返回写入的字符数在文件关闭前或缓冲区刷新前字符串内容存储在缓冲区中这时你在文件中是看不到写入的内容的返回整数给出文件对象在文件中的当前位置表示为二进制模式下时从文件开始的字节数以及文本模式下的意义不明的数字方法用于移动文件读取指针到指定位置开始的偏移量也就是代表需要移动偏移的字节数如果是负数表示从倒数第几位开始可选默认值为给定义一个参数表示要从哪个位置开始偏移代表从文件开头开始算起代表从当前位置开始算起代表从文件末尾算起移动到文件的第六个字节移动到文件倒数第三个字节是一个功能强大的库主要用于对多维数组执行计算这个词来源于两个单词和对象最重要的一个特点是其维数组对象它是一系列同类型数据的集合以下标为开始进行集合中元素的索引内部由以下内容组成一个指向数据内存或内存映射文件中的一块数据的指针数据类型或描述在数组中的固定大小值的格子一个表示数组形状的元组表示各维度大小的元组一个跨度元组其中的整数指的是为了前进到当前维度下一个元素需要跨过的字节数参数说明名称描述数组或嵌套的数列数组元素的数据类型可选对象是否需要复制可选创建数组的样式为行方向为列方向为任意方向默认默认返回一个与基类类型一致的数组指定生成数组的最小维度数组属性数组的维数称为秩秩就是轴的数量即数组的维度一维数组的秩为二维数组的秩为以此类推在中每一个线性的数组称为是一个轴也就是维度比如说二维数组相当于是两个一维数组其中第一个一维数组中每个元素又是一个一维数组所以一维数组就是中的轴第一个轴相当于是底层数组第二个轴是底层数组里的数组而轴的数量秩就是数组的维数很多时候可以声明表示沿着第轴进行操作即对每一列进行操作表示沿着第轴进行操作即对每一行进行操作属性说明秩即轴的数量或维度的数量数组的维度对于矩阵行列数组元素的总个数相当于中的值对象的元素类型对象中每个元素的大小以字节为单位对象的内存信息元素的实部元素的虚部包含实际数组元素的缓冲区由于一般通过数组的索引获取元素所以通常不需要使用这个属性创建数组包中的使用函数创建数值范围并返回对象函数格式如下根据与指定的范围以及设定的步长生成一个参数说明参数描述起始值默认为终止值不包含步长默认为返回的数据类型如果没有提供则会使用输入数据的类型方法用来创建一个指定形状数据类型且未初始化的数组参数描述数组形状数据类型可选有和两个选项分别代表行优先和列优先在计算机内存中的存储元素的顺序数组元素为随机值因为它们未初始化创建指定大小的数组数组元素以来填充参数说明参数描述数组形状数据类型可选用于的行数组或者用于的列数组默认为浮点数设置类型为整数自定义类型即创建指定形状的数组数组元素以来填充参数说明参数描述数组形状数据类型可选用于的行数组或者用于的列数组默认为浮点数自定义类型用于创建一个与给定数组具有相同形状的数组数组元素以来填充和都是用于创建一个指定形状的数组其中所有元素都是它们之间的区别在于可以直接指定要创建的数组的形状而则是创建一个与给定数组具有相同形状的数组参数说明参数描述给定要创建相同形状的数组创建的数组的数据类型数组在内存中的存储顺序可选值为按行优先或按列优先默认为保留输入数组的存储顺序是否允许返回子类如果为则返回一个子类对象否则返回一个与数组具有相同数据类型和存储顺序的数组创建的数组的形状如果不指定则默认为数组的形状创建一个与形状相同的所有元素都为的数组创建一个的二维数组创建一个与形状相同的所有元素都为的数组用于创建一个与给定数组具有相同形状的数组数组元素以来填充和都是用于创建一个指定形状的数组其中所有元素都是它们之间的区别在于可以直接指定要创建的数组的形状而则是创建一个与给定数组具有相同形状的数组参数说明参数描述给定要创建相同形状的数组创建的数组的数据类型数组在内存中的存储顺序可选值为按行优先或按列优先默认为保留输入数组的存储顺序是否允许返回子类如果为则返回一个子类对象否则返回一个与数组具有相同数据类型和存储顺序的数组创建的数组的形状如果不指定则默认为数组的形状创建一个与形状相同的所有元素都为的数组创建一个的二维数组创建一个与形状相同的所有元素都为的数组函数用于创建一个一维数组数组是一个等差数列构成的格式如下参数说明参数描述序列的起始值序列的终止值如果为该值包含于数列中要生成的等步长的样本数量默认为该值为时数列中包含值反之不包含默认是如果为时生成的数组中会显示间距反之不显示的数据类型以下实例用到三个参数设置起始点为终止点为数列个数为切片和索引对象的内容可以通过索引或切片来访问和修改与中的切片操作一样数组可以基于的下标进行索引切片对象可以通过内置的函数并设置及参数进行从原数组中切割出一个新数组我们可以通过冒号分隔切片参数来进行切片操作下面的图表说明了给定的示例切片是如何进行工作的切片还可以包括省略号来使选择元组的长度与数组的维度相同如果在行位置使用省略号它将返回包含行中元素的第列元素第行元素第列及剩下的所有元素数组索引以下实例获取数组中和位置处的元素可以借助切片或与索引数组组合如下面例子布尔索引我们可以通过一个布尔数组来索引目标数组布尔索引通过布尔运算如比较运算符来获取符合指定条件的元素的数组以下实例获取大于的元素假设每个名字都对应数组中的一行而我们想要选出对应于用户的所有行要选择除以外的其他值既可以使用不等于符号也可以通过对条件进行否定花式索引花式索引指的是利用整数数组进行索引花式索引根据索引数组的值作为目标数组的某个轴的下标来取值对于使用一维整型数组作为索引如果目标是一维数组那么索引的结果就是对应位置的元素如果目标是二维数组那么就是对应下标的行花式索引跟切片不一样它总是将数据复制到新数组中一维数组一维数组只有一个轴所以一维数组就在这个轴上取值使用花式索引二维数组二维数组读取指定下标对应的行取所有行的第列和第列取第一行第列第五行第三列第二行第一列数组操作修改数组形状函数描述不改变数据的条件下修改形状数组元素迭代器返回一份数组拷贝对拷贝所做的修改不会影响原始数组返回展开数组函数可以在不改变数据的条件下修改形状格式如下要修改形状的数组整数或者整数数组新的形状应当兼容原有形状按行按列原顺序元素在内存中的出现顺序数组转置和轴对换转置是重塑的一种特殊形式它返回的是源数据的视图不会进行任何复制操作数组不仅有方法还有一个特殊的属性在进行矩阵计算时经常需要用到该操作比如利用计算矩阵内积对于高维数组需要得到一个由轴编号组成的元组才能对这些轴进行转置比较费脑子这里就是让索引变换到了索引的位置索引变到了索引的位置索引保持不变简单的转置可以使用它其实就是进行轴对换而已还有一个方法它需要接受一对轴编号实际上等价于将轴和轴进行互换也是返回源数据的视图不会进行任何复制操作利用数组进行数据处理将条件逻辑表述为数组运算函数是三元表达式的矢量化版本假设我们有一个布尔数组和两个值数组我们想要根据中的值选取和的值当中的值为时选取的值否则从中选取列表推导式的写法应该如下所示这有几个问题第一它对大数组的处理速度不是很快因为所有工作都是由纯完成的第二无法用于多维数组若使用则可以将该功能写得非常简洁的第二个和第三个参数不必是数组它们都可以是标量值在数据分析工作中通常用于根据另一个数组而产生一个新的数组假设有一个由随机数据组成的矩阵你希望将所有正值替换为正数将所有负值替换为负数若利用则会非常简单正数负数负数负数正数正数使用可以将标量和数组结合起来例如可用常数替换中所有正的值数学和统计方法可以通过数组上的一组数学函数对整个数组或某个轴向的数据进行统计计算以及标准差等聚合计算通常叫做约简既可以当做数组的实例方法调用也可以当做顶级函数使用和这类的函数可以接受一个选项参数用于计算该轴向上的统计值最终结果是一个少一维的数组表列出了全部的基本数组统计方法用于布尔型数组的方法在上面这些方法中布尔值会被强制转换为和因此经常被用来对布尔型数组中的值计数注意是计数不是求和另外还有两个方法和它们对布尔型数组非常有用用于测试数组中是否存在一个或多个而则检查数组中所有值是否都是这两个方法也能用于非布尔型数组所有非元素将会被当做排序跟内置的列表类型一样数组也可以通过方法就地排序多维数组可以在任何一个轴向上进行排序只需将轴编号传给即可唯一化以及其它的集合逻辑提供了一些针对一维的基本集合运算最常用的可能要数了它用于找出数组中的唯一值并返回已排序的结果另一个函数用于测试一个数组中的值在另一个数组中的成员资格返回一个布尔型数组中的集合函数请参见表深拷贝浅拷贝概述对象引用对象对象本身没有单独分配内存空间它指向计算机中存储对象的内存和相互影响发生变化了也会发生变化和并不同属一块内存是两个不同的对象对的修改会改变函数创建一个副本对副本数据进行修改不会影响到原始数据它们物理内存不在同一位置完全不复制简单分配不会复制数组对象或其数据视图或浅拷贝不同的数组对象可以共享相同的数据用方法创建一个查看相同数据的新数组对象方法可以新建一个新的但是只会父对象不会底层的数据共用原始引用指向的对象数据和相互影响发生变化了也会发生变化中一个的视图和原是不同的对象但是共享值的内存这两个对象是相互关联的这样的好处是不会涉及到数据在内存中的复制这样可以节省空间提高性能切片数组会返回一个视图深拷贝有时如果不再需要原始数组则应在切片后调用例如假设是一个巨大的中间结果最终结果只包含的一小部分那么在用切片构造时应该做一个深拷贝是的核心数据分析支持库提供了快速灵活明确的数据结构旨在简单直观地处理关系型标记型数据是基于数组构建的特别是基于数组的函数和不使用循环的数据处理虽然采用了大量的编码风格但二者最大的不同是是专门为处理表格和混杂数据设计的而更适合处理统一的数值数组数据数据结构维数名称描述带标签的一维同构数组带标签的大小可变的二维异构表格类似表格中的一个列类似于一维数组可以保存任何数据类型它由一组数据各种数据类型以及一组与之相关的数据标签即索引组成仅由一组数据即可产生最简单的一组数据类型数据索引标签如果不指定默认从开始数据类型默认会自己判断设置名称拷贝数据默认为输出结果的字符串表现形式为索引在左边值在右边由于我们没有为数据指定索引于是会自动创建一个到为数据的长度的整数型索引你可以通过的和属性获取其数组表示形式和索引对象我们可以指定索引值如下实例与普通数组相比你可以通过索引的方式选取中的单个或一组值的索引可以通过赋值的方式就地修改我们也可以使用对象类似字典来创建如果只传入一个字典则结果中的索引就是原字典的键有序排列你可以传入排好序的字典的键以改变顺序在这个例子中中跟索引相匹配的那个值会被找出来并放到相应的位置上但由于所对应的值找不到所以其结果就为即非数字在中它用于表示缺失或值因为不在中它被从结果中除去的和函数可用于检测缺失数据也有类似的实例方法对象本身及其索引都有一个属性该属性跟其他的关键功能关系非常密切是一个表格型的数据结构它含有一组有序的列每列可以是不同的值类型数值字符串布尔型值既有行索引也有列索引它可以被看做由组成的字典共同用一个索引中的数据是以一个或多个二维块存放的而不是列表字典或别的一维数据结构一组数据等类型索引值或者可以称为行标签列标签默认为数据类型拷贝数据默认为输出结果建的办法有很多最常用的一种是直接传入一个由等长列表或数组组成的字典输出结果如果指定了列序列则的列就会按照指定顺序进行排列如果传入的列在数据中找不到就会在结果中产生缺失值列可以通过赋值的方式进行修改例如我们可以给那个空的列赋上一个标量值或一组值将列表或数组赋值给某个列时其长度必须跟的长度相匹配如果赋值的是一个就会精确匹配的索引所有的空位都将被填上缺失值方法可以用来删除列可以使用属性返回指定行的数据如果没有设置索引第一行索引为第二行索引为以此类推数据载入到对象返回第一行返回第二行输出结果如下常用方法查看前行查看后行查看数值查看行数列数将空值填充将替换成查找数据中出现的空值非空值删除空值查看唯一值修改删除原有索引查看数据的列名查看索引索引排序值排序数据数据合并数据数据合并与的区别自查数据用做数据透视表类似于的数透索引对象的索引对象负责管理轴标签和其他元数据比如轴名称等构建或时所用到的任何数组或其他序列的标签都会被转换成一个对象是不可变的因此用户不能对其进行修改除了类似于数组的功能也类似一个固定大小的集合与的集合不同的可以包含重复的标签每个索引都有一些方法和属性它们可用于设置逻辑并回答有关该索引所包含的数据的常见问题表列出了这些函数基本功能重新索引对象的一个重要方法是其作用是创建一个新对象它的数据符合新的索引用该的将会根据新索引进行重排如果某个索引值当前不存在就引入缺失值对于时间序列这样的有序数据重新索引时可能需要做一些插值处理选项即可达到此目的例如使用可以实现前向值填充借助可以修改行索引和列只传递一个序列时会重新索引结果的行列可以用关键字重新索引丢弃指定轴上的项丢弃某条轴上的一个或多个项很简单只要有一个索引数组或列表即可由于需要执行一些数据整理和集合逻辑所以方法返回的是一个在指定轴上删除了指定值的新对象对于可以删除任意轴上的索引值用标签序列调用会从行标签删除值通过传递或可以删除列的值许多函数如会修改或的大小或形状可以就地修改对象不会返回新的对象小心使用它会销毁所有被删除的数据索引选取和过滤索引的工作方式类似于数组的索引只不过的索引值不只是整数下面是几个例子利用标签的切片运算与普通的切片运算不同其末端是包含的用切片可以对的相应部分进行设置用一个值或序列对进行索引其实就是获取一个或多个列这种索引方式有几个特殊的情况首先通过切片或布尔型数组选取数据另一种用法是通过布尔型比如下面这个由标量比较运算得出的进行索引这使得的语法与二维数组的语法很像对象有一个允许使用表达式进行选择的方法完全类似的语法通过删除括号略微更好通过绑定使比较运算符绑定比和更紧使用英语而不是符号非常接近你如何在纸上写它还支持和比较运算符的特殊用法为调用或的方法提供了简洁的语法您可以将此与其他表达式结合使用以获得非常简洁的查询运算符与对象的特殊用法用和进行选取对于的行的标签索引引入了特殊的标签运算符和它们可以让你用类似的标记使用轴标签或整数索引从选择行和列的子集用和整数进行选取这两个索引函数也适用于一个标签或多个标签的切片整数索引处理整数索引的对象常常难住新手因为它与内置的列表和元组的索引语法不同对于非整数索引不会产生歧义为了进行统一如果轴索引含有整数数据选取总会使用标签为了更准确请使用标签或整数数据选取行数据选取使用标签和之前的行数据选取前行算术运算和数据对齐最重要的一个功能是它可以对不同索引的对象进行算术运算在将对象相加时如果存在不同的索引对则结果的索引就是该索引对的并集自动的数据对齐操作在不重叠的索引处引入了值缺失值会在算术运算过程中传播对于对齐操作会同时发生在行和列上把它们相加后将会返回一个新的其索引和列为原来那两个的并集因为和列均不在两个对象中在结果中以缺省值呈现行也是同样如果对象相加没有共用的列或行标签结果都会是空在算术方法中填充值在对不同索引的对象进行算术运算时你可能希望当一个对象中某个轴标签在另一个对象中找不到时填充一个特殊值比如将它们相加时没有重叠的位置就会产生值使用的方法传入以及一个参数表列出了和的算术方法它们每个都有一个副本以字母开头它会翻转参数因此这两个语句是等价的在对或重新索引时也可以指定一个填充值和之间的运算跟不同维度的数组一样和之间算术运算也是有明确规定的当我们从减去每一行都会执行这个操作这就叫做广播和之间的运算差不多也是如此默认情况下和之间的算术运算会将的索引匹配到的列然后沿着行一直向下广播如果某个索引值在的列或的索引中找不到则参与运算的两个对象就会被重新索引以形成并集如果你希望匹配行且在列上广播则必须使用算术运算方法例如传入的轴号就是希望匹配的轴在本例中我们的目的是匹配的行索引并进行广播函数应用和映射的元素级数组方法也可用于操作对象另一个常见的操作是将函数应用到由各列或行所形成的一维数组上的方法即可实现此功能这里的函数计算了一个的最大值和最小值的差在的每列都执行了一次结果是一个使用的列作为索引如果传递到这个函数会在每行执行许多最为常见的数组统计功能都被实现成的方法如和因此无需使用方法元素级的函数也是可以用的假如你想得到中各个浮点值的格式化字符串使用即可之所以叫做是因为有一个用于应用元素级函数的方法排序和排名根据条件对数据集排序也是一种重要的内置运算要对行或列索引进行排序按字典顺序可使用方法它将返回一个已排序的新对象对于则可以根据任意一个轴上的索引进行排序数据默认是按升序排序的但也可以降序排序若要按值对进行排序可使用其方法在排序时任何缺失值默认都会被放到的末尾当排序一个时你可能希望根据一个或多个列中的值进行排序将一个或多个列的名字传递给的选项即可达到该目的要根据多个列进行排序传入名称的列表即可接下来介绍和的方法默认情况下是通过为各组分配一个平均排名的方式破坏平级关系的如果两个数值相同排名是它们的均值例如数值在中排平均值为也可以根据值在原数据中出现的顺序给出排名这里条目和没有使用平均排名它们被设成了和因为数据中标签位于标签的前面你也可以按降序进行排名带有重复标签的轴索引索引的属性可以告诉你它的值是否是唯一的对于带有重复值的索引数据选取的行为将会有些不同如果某个索引对应多个值则返回一个而对应单个值的则返回一个标量值这样会使代码变复杂因为索引的输出类型会根据标签是否有重复发生变化对的行进行索引时也是如此汇总和计算描述统计对象拥有一组常用的数学和统计方法它们大部分都属于约简和汇总统计用于从中提取单个值如或或从的行或列中提取一个跟对应的数组方法相比它们都是基于没有缺失数据的假设而构建的调用的方法将会返回一个含有列的和的值会自动被排除除非整个切片这里指的是行或列都是通过选项可以禁用该功能表列出了这些约简方法的常用选项有些方法如和返回的是间接统计比如达到最小值或最大值的索引另一些方法则是累计型的还有一种方法它既不是约简型也不是累计型就是一个例子它用于一次性产生多个汇总统计对于非数值型数据会产生另外一种汇总统计它可以得到中的唯一值数组返回的唯一值是未排序的如果需要的话可以对结果再次进行排序计算指定轴中不同元素的数量相似的用于计算一个中各值出现的频率为了便于查看结果是按值频率降序排列的还是一个顶级方法可用于任何数组或序列用于判断矢量化集合的成员资格可用于过滤中或列中数据的子集与类似的是方法它可以给你一个索引数组从可能包含重复值的数组到另一个不同值的数组表给出了这几个方法的一些参考信息统计函数一览表函数公式含义描述性统计一次性返回多个统计结果计算最小值计算最大值求和计算平均值计数统计非缺失元素的个数计数统计所有元素的个数计算中位数计算方差计算标准差计算任意分位数如四分位数计算协方差计算相关系数计算偏度计算峰度计算众数分组聚合运算可以自定义统计函数寻找最小值所在位置寻找最大值所在位置等价于逻辑或等价于逻辑与频次统计运算累计和运算累计积数据加载与存储文件的类或函数支持读取存储在或更高版本中的表格型数据这两个工具分别使用扩展包和读取和文件你可以用或安装它们要使用通过传递或路径创建一个实例存储在表单中的数据可以读取到如果要读取一个文件中的多个表单创建会更快但你也可以将文件名传递到文件路径新建的空白文件文件内容姓名张三李四王五保存到文档如果要将数据写入为格式你必须首先创建一个然后使用对象的方法将数据写入到其中你还可以不使用而是传递文件的路径到设置索引参数列名或列名的列表布尔值如果为真将删除用于索引的列如果为真将该列添加到现有的索引列中在数据框架中进行更改如果是真的检查新的索引列是否重复如果是的话更改索引列文件路径新建的空白文件文件内容姓名张三李四王五设置为索引列保存到文档输出结果姓名张三李四王五文本文件常用参数文件路径或者具有方法的任何对象比如可打开的文件默认分隔符为方法分隔符为当选择默认值或时将首行设为列名如果列名被传入明确值就令注意当时即使列名被传参也会被覆盖列名列表的使用如果文件不包含列名那么应该设置列名列表中不允许有重复值索引的列号或列名可以是一个字符串名称或者数字也可以是一个分层索引从文件开始处需要跳过的行数或行号列表文本编码例如从文件开头处读入的行数首先我们来看一个以逗号分隔的文本文件由于该文件以逗号分隔所以我们可以使用将其读入一个我们还可以使用并指定分隔符并不是所有文件都有标题行看看下面这个文件自定义行列名读入该文件的办法有两个你可以让为其分配默认的列名也可以自己定义列名假设你希望将列做成的索引你可以明确表示要将该列放到索引的位置上也可以通过参数指定如果希望将多个列做成一个层次化索引只需传入由列编号或列名组成的列表即可有些情况下有些表格可能不是用固定的分隔符去分隔字段的比如空白符或其它模式看看下面这个文本文件自定义分隔符虽然可以手动对数据进行规整这里的字段是被数量不同的空白字符间隔开的这种情况下你可以传递一个正则表达式作为的分隔符可以用正则表达式表达为于是有这里由于列名比数据行的数量少所以推断第一列应该是的索引这些解析器函数还有许多参数可以帮助你处理各种各样的异形文件格式表列出了一些比如说你可以用跳过文件的第一行第三行和第四行缺失值处理是文件解析任务中的一个重要组成部分缺失数据经常是要么没有空字符串要么用某个标记值表示默认情况下会用一组经常出现的标记值进行识别比如及可以用一个列表或集合的字符串表示缺失值空值被替换成字典的各列可以使用不同的标记值表列出了和常用的选项逐块读取文本文件在处理很大的文件时或找出大文件中的参数集以便于后续处理时你可能只想读取文件的一小部分或逐块对文件进行迭代在看大文件之前我们先设置显示地更紧些然后有如果只想读取几行避免读取整个文件通过进行指定即可要逐块读取文件可以指定行数所返回的这个对象使你可以根据对文件进行逐块迭代比如说我们可以迭代处理将值计数聚合到列中如下所示然后有还有一个方法它使你可以读取任意大小的块利用的方法我们可以将数据写到一个以逗号分隔的文件中常用参数必填项要写入的文件或文件对象的字符串路径如果是文件对象则必须使用打开该对象输出文件的字段分隔符默认为缺失数据填充默认为要写入的列默认为无是否写出列名默认为是否写入行索引名称默认为索引列的列标签如果需要如果无默认值并且和为则使用索引名称如果使用则应给出序列写入模式默认为输出文件中使用的编码格式默认为当然还可以使用其他分隔符由于这里直接写出到所以仅仅是打印出文本结果而已中的是一个内置模块中的属性代表了标准输出流也就是默认情况下程序将输出的信息打印到屏幕上的地方缺失值在输出结果中会被表示为空字符串你可能希望将其表示为别的标记值如果没有设置其他选项则会写出行和列的标签当然它们也都可以被禁用此外你还可以只写出一部分的列并以你指定的顺序排列也有一个方法处理分隔符格式大部分存储在磁盘上的表格型数据都能用进行加载然而有时还是需要做一些手工处理由于接收到含有畸形行的文件而使出毛病的情况并不少见为了说明这些基本工具看看下面这个简单的文件对于任何单字符分隔符文件可以直接使用内置的模块将任意已打开的文件或文件型的对象传给对这个进行迭代将会为每行产生一个元组并移除了所有的引号现在为了使数据格式合乎要求你需要对其做一些整理工作我们一步一步来做首先读取文件到一个多行的列表中然后我们将这些行分为标题行和数据行然后我们可以用字典构造式和后者将行转置为列创建数据列的字典文件的形式有很多只需定义的一个子类即可定义出新格式如专门的分隔符字符串引用约定行结束符等各个语支的参数也可以用关键字的形式提供给而无需定义子类可用的选项的属性及其功能如表所示笔记对于那些使用复杂分隔符或多字符分隔符的文件模块就无能为力了这种情况下你就只能使用字符串的方法或正则表达式方法进行行拆分和其他整理工作了要手工输出分隔符文件你可以使用它接受一个已打开且可写的文件对象以及跟相同的那些语支和格式化选项缺失数据处理在许多数据分析工作中缺失数据是经常发生的的目标之一就是尽量轻松地处理缺失数据例如对象的所有描述性统计默认都不包括缺失数据缺失数据在中呈现的方式有些不完美但对于大多数用户可以保证功能正常对于数值数据使用浮点值表示缺失数据我们称其为哨兵值可以方便的检测出来在中我们采用了语言中的惯用法即将缺失值表示为它表示不可用在统计应用中数据可能是不存在的数据或者虽然存在但是没有观察到例如数据采集中发生了问题当进行数据清洗以进行分析时最好直接对缺失数据进行分析以判断数据采集的问题或缺失数据可能导致的偏差内置的值在对象数组中也可以作为滤除缺失数据过滤掉缺失数据的办法有很多种你可以通过或布尔索引的手工方法但可能会更实用一些对于一个返回一个仅含非空数据和索引值的可以是或表示删除行或者列默认为删除的方式可以是或表示只要存在缺失值就删除表示所有的值都是缺失值才删除默认为可以是整数表示这一行或列最少要有多少个非缺失值才不被删除如果设置为表示所有数据值都需要进行判断默认为可以是列名称或列名称的列表表示只在这些列中进行删除操作默认为表示直接修改原数据集表示返回删除后的新数据集默认为这等价于而对于对象事情就有点复杂了你可能希望丢弃全或含有的行或列默认丢弃任何含有缺失值的行传入将只丢弃全为的那些行用这种方式丢弃列只需传入即可另一个滤除行的问题涉及时间序列数据假设你只想留下一部分观测数据可以用参数实现此目的填充缺失数据你可能不想滤除缺失数据有可能会丢弃跟它有关的其他数据而是希望通过其他方式填补那些空洞对于大多数情况而言方法是最主要的函数通过一个常数调用就会将缺失值替换为那个常数值用于填充缺失值的值可以是标量字典或填充缺失值的方法可选值包括向前填充向后填充用前面的非缺失数据填充用后面的非缺失数据填充等指定在哪个轴上执行填充操作是否在原上直接进行修改对于前向填充和后向填充限制填充缺失值的最大数量指定填充后的数据类型可选值包括自动推断整型等若是通过一个字典调用就可以实现对不同的列填充不同的值默认会返回新对象但也可以对现有对象进行就地修改对有效的那些插值方法也可用于只要有些创新你就可以利用实现许多别的功能比如说你可以传入的平均值或中位数数据转换移除重复数据中出现重复行有多种原因下面就是一个例子的方法返回一个布尔型表示各行是否是重复行前面出现过的行输入要进行去重的列名默认为可选参数有三个默认值为其中表示保留第一次出现的重复行删除后面的重复行表示删除重复项保留最后一次出现表示删除所有重复项布尔值默认为是否直接在原数据上删除重复项或删除重复项后返回副本这两个方法默认会判断全部列你也可以指定部分列进行重复项判断假设我们还有一列值且只希望根据列过滤重复项矢量化字符串方法支持字符串处理方法可以非常方便地操作数组里的每个元素这些方法会自动排除缺失值与空值这也许是其最重要的特性这些方法通过的属性访问一般情况下这些操作的名称与内置的字符串方法一致示例如下访问器对于一个类型的字段在中日期时间类型的列数据也可以进行分割处理即应用属性接口提供一个可以简单快捷地返回属性值的访问器这个访问器返回的也是索引与现有的一样还可以用把的值当成字符串进行格式化支持与标准同样的格式函数含义年月日年月日时分秒一年中的第几周一周中的星期几代表星期一对于英文星期名称对应英文月份名称一年中的第几天一年中的第几个季度是否是闰年日期处理时间序列数据的意义取决于具体的应用场景主要有以下几种时间戳特定的时刻固定时期如年月或年全年时间间隔由起始和结束时间戳表示时期可以被看做间隔的特例实验或过程时间每个时间点都是相对于特定起始时间的一个度量例如从放入烤箱时起每秒钟饼干的直径标准库包含用于日期和时间数据的数据类型而且还有日历方面的功能我们主要会用到以及模块也可以简写为是用得最多的数据类型日期和时间数据类型及工具获取某天日期时间至少传入三个参数以毫秒形式存储日期和时间函数所有参数都是可选的并且默认为这些参数可以是整数或者浮点数也可以是正数或者负数返回类型为表示两个对象之间的时间差可以给对象加上或减去一个或多个这样会产生一个新对象字符串和的相互转换对象对象格式化编码利用或方法传入一个格式化字符串对象和的对象可以被格式化为字符串用将转为字符串用将转为字符串日期字符串格式化编码可以用这些格式化编码将字符串转换为日期是通过已知格式进行日期解析的最佳方式但是每次都要编写格式定义是很麻烦的事情尤其是对于一些常见的日期格式这种情况下你可以用这个第三方包中的方法中已经自动安装好了可以解析几乎所有人类能够理解的日期表示形式在国际通用的格式中日出现在月的前面很普遍传入即可解决这个问题当文件被导入并形成一个数据框架时文件中的日期时间对象被读取为字符串对象而不是日期时间对象因此对字符串而不是日期时间对象进行时间差等操作非常困难的方法有助于将字符串日期时间转换成日期时间对象一个整数字符串浮点数列表或字典对象用于转换为时间对象布尔值如果为真则将日期放在首位布尔值如果为真则将年份放在前面布尔值如果为真则返回的时间字符串输入告诉日月年的位置方法可以解析多种不同的日期表示形式对标准日期格式如的解析非常快它还可以处理缺失值空字符串等是中时间戳数据的值格式化编码表代码说明两位数的年份表示四位数的年份表示月份月内中的一天小时制小时数小时制小时数分钟数秒本地简化星期名称本地完整星期名称本地简化的月份名称本地完整的月份名称本地相应的日期表示和时间表示年内的一天本地或的等价符一年中的星期数星期天为星期的开始星期星期天为星期的开始一年中的星期数星期一为星期的开始本地相应的日期表示本地相应的时间表示当前时区的名称号本身时间序列最基本的时间序列类型就是以时间戳通常以字符串或对象表示为索引的这些对象实际上是被放在一个中的跟其他一样不同索引的时间序列之间的算术运算会自动按日期对齐是每隔两个取一个用的数据类型以纳秒形式存储时间戳中的各个标量值是的对象只要有需要可以随时自动转换为对象此外它还可以存储频率信息如果有的话且知道如何执行时区转换以及其他操作日期的范围频率以及移动开始时间结束时间持续时间频率默认天时间参数值正则化到午夜时间戳索引对象名称默认为的情况下左闭右闭则左闭右开则左开右闭默认频率为日历日默认频率为工作日时区可用于根据指定的频率生成指定长度的默认情况下会产生按天计算的时间点如果只传入起始或结束日期那就还得传入一个表示一段时间的数字默认会保留起始和结束时间戳的时间信息如果有的话有时虽然起始和结束日期带有时间信息但你希望产生一组被规范化到午夜的时间戳选项即可实现该功能',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-06 22:53:41',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">开发</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/gitee.ico" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.aliyun.com/product/oss" title="阿里云OSS"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/aliyun.ico" alt="阿里云OSS"/><span class="back-menu-item-text">阿里云OSS</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">娱乐</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.zhibo8.cc/" title="直播吧"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/zhibo8.png" alt="直播吧"/><span class="back-menu-item-text">直播吧</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.bilibili.com/" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/bilibili.ico" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Andy Yin</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/EXCEL/" style="font-size: 1.05rem;">EXCEL<sup>1</sup></a><a href="/tags/Google-Adwords/" style="font-size: 1.05rem;">Google Adwords<sup>1</sup></a><a href="/tags/HTTP/" style="font-size: 1.05rem;">HTTP<sup>2</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>2</sup></a><a href="/tags/Photoshop/" style="font-size: 1.05rem;">Photoshop<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>1</sup></a><a href="/tags/Tableau/" style="font-size: 1.05rem;">Tableau<sup>1</sup></a><a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 1.05rem;">年度总结<sup>5</sup></a><a href="/tags/%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size: 1.05rem;">心理学<sup>1</sup></a><a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 1.05rem;">摄影<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">数据分析<sup>8</sup></a><a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 1.05rem;">日记<sup>4</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%A0%81/" style="font-size: 1.05rem;">状态码<sup>1</sup></a><a href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/" style="font-size: 1.05rem;">读后感<sup>3</sup></a><a href="/tags/%E8%BF%90%E8%90%A5/" style="font-size: 1.05rem;">运营<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" itemprop="url">数据分析</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>数据分析</span></a><a class="article-meta__tags" href="/tags/Python/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Python</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Python知识点大全</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-05-16T14:09:47.000Z" title="发表于 2023-05-16 22:09:47">2023-05-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-07-06T14:53:41.285Z" title="更新于 2023-07-06 22:53:41">2023-07-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为上海"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>上海</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=65347007-cd0c-01c2-f453-81997d895d32"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><header><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" itemprop="url">数据分析</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" tabindex="-1" itemprop="url">数据分析</a><a href="/tags/Python/" tabindex="-1" itemprop="url">Python</a><h1 id="CrawlerTitle" itemprop="name headline">Python知识点大全</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Andy Yin</span><time itemprop="dateCreated datePublished" datetime="2023-05-16T14:09:47.000Z" title="发表于 2023-05-16 22:09:47">2023-05-16</time><time itemprop="dateCreated datePublished" datetime="2023-07-06T14:53:41.285Z" title="更新于 2023-07-06 22:53:41">2023-07-06</time></header><h1 id="Python基础"><a href="#Python基础" class="headerlink" title="Python基础"></a>Python基础</h1><h2 id="变量的命名和使用"><a href="#变量的命名和使用" class="headerlink" title="变量的命名和使用"></a>变量的命名和使用</h2><ul>
<li><p>变量名只能包含字母、数字和下划线。变量名可以字母或下划线打头，但不能以数字打头，例如，可将变量命名为<code>message_1</code>，但不能将其命名为<code>1_message</code>。</p>
</li>
<li><p>变量名不能包含空格，但可使用下划线来分隔其中的单词。例如，变量名<code>greeting_message</code>可行，但变量名<code>greeting message</code>会引发错误。</p>
</li>
<li><p>不要将Python关键字和函数名用作变量名，即不要使用Python保留用于特殊用途的单词，如<code>print</code>。</p>
</li>
<li><p>变量名应既简短又具有描述性。例如，<code>name</code>比<code>n</code>好，<code>student_name</code>比<code>s_n</code>好，<code>name_length</code>比<code>length_of_persons_name</code>好。</p>
</li>
<li><p>慎用小写字母l和大写字母O，因为它们可能被人错看成数字1和0。</p>
</li>
</ul>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><h3 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h3><p><strong>Python 中单行注释以 # 开头</strong></p>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是一个注释 </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h3><p><strong>多行注释用三个单引号 ‘’’ 或者三个双引号 “”” 将注释括起来</strong></p>
<p>例如:</p>
<h4 id="单引号（’’’）"><a href="#单引号（’’’）" class="headerlink" title="单引号（’’’）"></a>单引号（’’’）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">这是多行注释，用三个单引号 </span></span><br><span class="line"><span class="string">这是多行注释，用三个单引号  这是多行注释，</span></span><br><span class="line"><span class="string">用三个单引号 </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="双引号（”””）"><a href="#双引号（”””）" class="headerlink" title="双引号（”””）"></a>双引号（”””）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">这是多行注释，用三个双引号</span></span><br><span class="line"><span class="string">这是多行注释，用三个双引号 </span></span><br><span class="line"><span class="string">这是多行注释，用三个双引号</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h2><h3 id="十进制转N进制"><a href="#十进制转N进制" class="headerlink" title="十进制转N进制"></a>十进制转N进制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取用户输入十进制数 </span></span><br><span class="line">dec = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入数字：&quot;</span>))  </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;十进制数为：&quot;</span>, dec) </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;转换为二进制为：&quot;</span>, <span class="built_in">bin</span>(dec)) </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;转换为八进制为：&quot;</span>, <span class="built_in">oct</span>(dec)) </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;转换为十六进制为：&quot;</span>, <span class="built_in">hex</span>(dec))</span><br></pre></td></tr></table></figure>

<h3 id="二进制转N进制"><a href="#二进制转N进制" class="headerlink" title="二进制转N进制"></a>二进制转N进制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">binary_number = <span class="string">&#x27;101010&#x27;</span></span><br><span class="line">decimal_number = <span class="built_in">int</span>(binary_number, <span class="number">2</span>)  <span class="comment"># 二进制转换为十进制</span></span><br><span class="line">octal_number = <span class="built_in">oct</span>(decimal_number)    <span class="comment"># 十进制转换为八进制</span></span><br><span class="line">hexadecimal_number = <span class="built_in">hex</span>(decimal_number)  <span class="comment"># 十进制转换为十六进制</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;二进制数:&#x27;</span>, binary_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为十进制:&#x27;</span>, decimal_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为八进制:&#x27;</span>, octal_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为十六进制:&#x27;</span>, hexadecimal_number)</span><br></pre></td></tr></table></figure>

<h3 id="八进制转N进制"><a href="#八进制转N进制" class="headerlink" title="八进制转N进制"></a>八进制转N进制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">octal_number = <span class="string">&#x27;52&#x27;</span></span><br><span class="line">decimal_number = <span class="built_in">int</span>(octal_number, <span class="number">8</span>)      <span class="comment"># 八进制转换为十进制</span></span><br><span class="line">binary_number = <span class="built_in">bin</span>(decimal_number)         <span class="comment"># 十进制转换为二进制</span></span><br><span class="line">hexadecimal_number = <span class="built_in">hex</span>(decimal_number)    <span class="comment"># 十进制转换为十六进制</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;八进制数:&#x27;</span>, octal_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为十进制:&#x27;</span>, decimal_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为二进制:&#x27;</span>, binary_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为十六进制:&#x27;</span>, hexadecimal_number)</span><br></pre></td></tr></table></figure>

<h3 id="十六进制转N进制"><a href="#十六进制转N进制" class="headerlink" title="十六进制转N进制"></a>十六进制转N进制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hexadecimal_number = <span class="string">&#x27;2a&#x27;</span></span><br><span class="line">decimal_number = <span class="built_in">int</span>(hexadecimal_number, <span class="number">16</span>)   <span class="comment"># 十六进制转换为十进制</span></span><br><span class="line">binary_number = <span class="built_in">bin</span>(decimal_number)             <span class="comment"># 十进制转换为二进制</span></span><br><span class="line">octal_number = <span class="built_in">oct</span>(decimal_number)              <span class="comment"># 十进制转换为八进制</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;十六进制数:&#x27;</span>, hexadecimal_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为十进制:&#x27;</span>, decimal_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为二进制:&#x27;</span>, binary_number)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;转换为八进制:&#x27;</span>, octal_number)</span><br></pre></td></tr></table></figure>

<h2 id="字符串（String）"><a href="#字符串（String）" class="headerlink" title="字符串（String）"></a>字符串（String）</h2><h3 id="访问字符串的值"><a href="#访问字符串的值" class="headerlink" title="访问字符串的值"></a>访问字符串的值</h3><p>Python 访问子字符串，可以使用方括号来截取字符串，如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var1 = <span class="string">&#x27;Hello World!&#x27;</span> </span><br><span class="line">var2 = <span class="string">&quot;Python Runoob&quot;</span>  </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(var1[<span class="number">0</span>]) </span><br><span class="line"><span class="comment"># H</span></span><br><span class="line"><span class="built_in">print</span>(var2[<span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line"><span class="comment"># ytho</span></span><br></pre></td></tr></table></figure>

<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><p>在需要在字符中使用特殊字符时，python 用反斜杠<code>\</code>转义字符。如下表：</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>\(在行尾时)</td>
<td>续行符</td>
</tr>
<tr>
<td>\\</td>
<td>反斜杠符号</td>
</tr>
<tr>
<td>\‘</td>
<td>单引号</td>
</tr>
<tr>
<td>\“</td>
<td>双引号</td>
</tr>
<tr>
<td>\a</td>
<td>响铃</td>
</tr>
<tr>
<td>\b</td>
<td>退格(Backspace)</td>
</tr>
<tr>
<td>\e</td>
<td>转义</td>
</tr>
<tr>
<td>\000</td>
<td>空</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\v</td>
<td>纵向制表符</td>
</tr>
<tr>
<td>\t</td>
<td>横向制表符</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\f</td>
<td>换页</td>
</tr>
<tr>
<td>\oyy</td>
<td>八进制数，y 代表 0~7 的字符，例如：\012 代表换行。</td>
</tr>
<tr>
<td>\xyy</td>
<td>十六进制数，以 \x 开头，yy代表的字符，例如：\x0a代表换行</td>
</tr>
<tr>
<td>\other</td>
<td>其它的字符以普通格式输出</td>
</tr>
</tbody></table>
<p>如果不希望前置 <code>\</code> 的字符转义成特殊字符，可以使用 <em>原始字符串</em>，在引号前添加 <code>r</code> 即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;C:\some\name&#x27;</span>)  </span><br><span class="line"><span class="comment"># 这里\n的意思是换行</span></span><br><span class="line"><span class="comment"># C:\some</span></span><br><span class="line"><span class="comment"># ame</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">r&#x27;C:\some\name&#x27;</span>)  </span><br><span class="line"><span class="comment"># 这里\n不会转义</span></span><br><span class="line">C:\some\name</span><br></pre></td></tr></table></figure>

<h3 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h3><p>下表实例变量 a 值为字符串 “Hello”，b 变量值为 “Python”：</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>字符串连接</td>
<td>&gt;&gt;&gt;a + b ‘HelloPython’</td>
</tr>
<tr>
<td>*</td>
<td>重复输出字符串</td>
<td>&gt;&gt;&gt;a * 2 ‘HelloHello’</td>
</tr>
<tr>
<td>[]</td>
<td>通过索引获取字符串中字符</td>
<td>&gt;&gt;&gt;a[1] ‘e’</td>
</tr>
<tr>
<td>[ : ]</td>
<td>截取字符串中的一部分</td>
<td>&gt;&gt;&gt;a[1:4] ‘ell’</td>
</tr>
<tr>
<td>in</td>
<td>成员运算符 - 如果字符串中包含给定的字符返回 True</td>
<td>&gt;&gt;&gt;”H” in a True</td>
</tr>
<tr>
<td>not in</td>
<td>成员运算符 - 如果字符串中不包含给定的字符返回 True</td>
<td>&gt;&gt;&gt;”M” not in a True</td>
</tr>
<tr>
<td><strong>r&#x2F;R</strong></td>
<td>原始字符串 - 原始字符串：所有的字符串都是直接按照字面的意思来使用，没有转义特殊或不能打印的字符。 原始字符串除在字符串的第一个引号前加上字母”r”（可以大小写）以外，与普通字符串有着几乎完全相同的语法。</td>
<td>&gt;&gt;&gt;print r’\n’ \n &gt;&gt;&gt; print R’\n’ \n</td>
</tr>
</tbody></table>
<h3 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h3><p>基本的用法是将一个值插入到一个有字符串格式符 %s 的字符串中。</p>
<p>字符串格式化符号：</p>
<table>
<thead>
<tr>
<th>符  号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>%c</td>
<td>格式化字符及其ASCII码</td>
</tr>
<tr>
<td>%s</td>
<td>格式化字符串</td>
</tr>
<tr>
<td>%d</td>
<td>格式化整数</td>
</tr>
<tr>
<td>%u</td>
<td>格式化无符号整型</td>
</tr>
<tr>
<td>%o</td>
<td>格式化无符号八进制数</td>
</tr>
<tr>
<td>%x</td>
<td>格式化无符号十六进制数</td>
</tr>
<tr>
<td>%X</td>
<td>格式化无符号十六进制数（大写）</td>
</tr>
<tr>
<td>%f</td>
<td>格式化浮点数字，可指定小数点后的精度</td>
</tr>
<tr>
<td>%e</td>
<td>用科学计数法格式化浮点数</td>
</tr>
<tr>
<td>%E</td>
<td>作用同%e，用科学计数法格式化浮点数</td>
</tr>
<tr>
<td>%g</td>
<td>%f和%e的简写</td>
</tr>
<tr>
<td>%G</td>
<td>%F 和 %E 的简写</td>
</tr>
<tr>
<td>%p</td>
<td>用十六进制数格式化变量的地址</td>
</tr>
</tbody></table>
<p>实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;My name is %s and weight is %d kg!&quot;</span> % (<span class="string">&#x27;Zara&#x27;</span>, <span class="number">21</span>))</span><br><span class="line"><span class="comment"># My name is Zara and weight is 21 kg!</span></span><br></pre></td></tr></table></figure>

<h3 id="多行字符串"><a href="#多行字符串" class="headerlink" title="多行字符串"></a>多行字符串</h3><h4 id="三引号"><a href="#三引号" class="headerlink" title="三引号"></a>三引号</h4><p>Python 中三引号可以将复杂的字符串进行赋值。</p>
<p>Python 三引号允许一个字符串跨多行，字符串中可以包含换行符、制表符以及其他特殊字符。</p>
<p>三引号的语法是一对连续的单引号或者双引号（通常都是成对的用）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;&quot;&quot;My Name is Pankaj.</span></span><br><span class="line"><span class="string">I am the owner of JournalDev.com</span></span><br><span class="line"><span class="string">JournalDev is a very popular website in Developers community.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment"># My Name is Pankaj.</span></span><br><span class="line"><span class="comment"># I am the owner of JournalDev.com</span></span><br><span class="line"><span class="comment"># JournalDev is a very popular website in Developers # # community.</span></span><br></pre></td></tr></table></figure>

<h4 id="续航符"><a href="#续航符" class="headerlink" title="续航符"></a>续航符</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sql = <span class="string">&quot;select * &quot;</span> \</span><br><span class="line"><span class="string">&quot; from a &quot;</span> \</span><br><span class="line"><span class="string">&quot; where b = 1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sql)</span><br><span class="line"><span class="comment"># select * from a  where b = 1</span></span><br></pre></td></tr></table></figure>

<h4 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sql = (<span class="string">&quot;select *&quot;</span></span><br><span class="line"><span class="string">&quot; from a &quot;</span></span><br><span class="line"><span class="string">&quot; where b = 1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sql)</span><br><span class="line"><span class="comment"># select * from a  where b = 1</span></span><br></pre></td></tr></table></figure>

<h3 id="内建函数"><a href="#内建函数" class="headerlink" title="内建函数"></a>内建函数</h3><h4 id="upper-、lower-、title"><a href="#upper-、lower-、title" class="headerlink" title="upper()、lower()、title()"></a>upper()、lower()、title()</h4><p>将字符串进行大小写或标题化。</p>
<p><code>string.upper()</code></p>
<ul>
<li>转换 string 中的小写字母为大写</li>
</ul>
<p><code>string.lower()</code></p>
<ul>
<li>转换 string 中所有大写字符为小写</li>
</ul>
<p><code>string.title()</code></p>
<ul>
<li>返回”标题化”的 string，就是说所有单词都是以大写开始，其余字母均为小写</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;Ada Lovelace&quot;</span> </span><br><span class="line"><span class="built_in">print</span>(name.title()) <span class="comment"># Ada Lovelace</span></span><br><span class="line"><span class="built_in">print</span>(name.upper()) <span class="comment"># ADA LOVELACE </span></span><br><span class="line"><span class="built_in">print</span>(name.lower()) <span class="comment"># ada lovelace</span></span><br></pre></td></tr></table></figure>

<h4 id="strip"><a href="#strip" class="headerlink" title="strip()"></a>strip()</h4><p>删除字符串的空格。</p>
<p><code>string.strip()</code></p>
<ul>
<li>在 string 上执行 lstrip()和 rstrip()，删除string首尾的空格</li>
</ul>
<p><code>string.lstrip()</code></p>
<ul>
<li>截掉 string 开头的空格</li>
</ul>
<p><code>string.rstrip()</code></p>
<ul>
<li>删除 string 末尾的空格</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">favorite_language = <span class="string">&#x27; python &#x27;</span></span><br><span class="line">favorite_language.rstrip() <span class="comment"># &#x27; python&#x27;</span></span><br><span class="line">favorite_language.lstrip() <span class="comment"># &#x27;python &#x27; </span></span><br><span class="line">favorite_language.strip()  <span class="comment"># &#x27;python&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="count"><a href="#count" class="headerlink" title="count()"></a>count()</h4><p>返回 sub 在 string 里面出现的次数。</p>
<p><code>string.count(sub, start= 0, end=len(string))</code></p>
<ul>
<li>sub – 搜索的子字符串</li>
<li>start – 字符串开始搜索的位置。默认为第一个字符，第一个字符索引值为0。</li>
<li>end – 字符串中结束搜索的位置。字符中第一个字符的索引为 0。默认为字符串的最后一个位置。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span>=<span class="string">&quot;1011011&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>.count(<span class="string">&#x27;0&#x27;</span>))</span><br><span class="line"><span class="comment">## 2</span></span><br></pre></td></tr></table></figure>

<h4 id="split"><a href="#split" class="headerlink" title="split()"></a>split()</h4><p>以 str 为分隔符截取字符串。</p>
<p><code>string.split(str=&quot;&quot;, num=string.count(str))</code></p>
<ul>
<li><p>str – 分隔符，<strong>默认为所有的空字符</strong>，包括空格、换行(\n)、制表符(\t)等。</p>
</li>
<li><p>num – 分割次数。<strong>默认为 -1, 即分隔所有</strong>。</p>
</li>
<li><p>返回值返回分割后的<strong>字符串列表</strong>。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;this is string example....wow!!!&quot;</span> </span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>.split( ))       <span class="comment"># 以空格为分隔符 </span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>.split(<span class="string">&#x27;i&#x27;</span>,<span class="number">1</span>))   <span class="comment"># 以 i 为分隔符分割一次</span></span><br><span class="line"><span class="built_in">print</span> (<span class="built_in">str</span>.split(<span class="string">&#x27;w&#x27;</span>))     <span class="comment"># 以 w 为分隔符</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;this&#x27;, &#x27;is&#x27;, &#x27;string&#x27;, &#x27;example....wow!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;th&#x27;, &#x27;s is string example....wow!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this is string example....&#x27;, &#x27;o&#x27;, &#x27;!!!&#x27;]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;http://www.baidu.com/python/image/123456.jpg&quot;</span></span><br><span class="line">path = url.split(<span class="string">&quot;/&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(path[-<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 123456.jpg</span></span><br></pre></td></tr></table></figure>

<h4 id="replace"><a href="#replace" class="headerlink" title="replace()"></a>replace()</h4><p><code>string.replace(old, new[, max])</code></p>
<ul>
<li>old – 将被替换的子字符串。</li>
<li>new – 新字符串，用于替换old子字符串。</li>
<li>max – 可选, 替换不超过 max 次</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;www.w3cschool.cc&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>.replace(<span class="string">&quot;w3cschool.cc&quot;</span>, <span class="string">&quot;runoob.com&quot;</span>))  )</span><br><span class="line"><span class="comment"># www.runoob.com</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&quot;is is is is&quot;</span> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>.replace(<span class="string">&quot;is&quot;</span>, <span class="string">&quot;was&quot;</span>, <span class="number">3</span>))</span><br><span class="line"><span class="comment"># was was was is</span></span><br></pre></td></tr></table></figure>

<h4 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h4><p>检测 str 是否包含在字符串string中。</p>
<p><code>string.find(str, beg=0, end=len(string))</code></p>
<ul>
<li>str – 指定检索的字符串</li>
<li>beg – 开始索引，默认为0。</li>
<li>end – 结束索引，默认为字符串的长度。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;Runoob example....wow!!!&quot;</span> </span><br><span class="line">str2 = <span class="string">&quot;exam&quot;</span>;  </span><br><span class="line"><span class="built_in">print</span>(str1.find(str2)) </span><br><span class="line"><span class="comment"># 7</span></span><br><span class="line"><span class="built_in">print</span>(str1.find(str2, <span class="number">10</span>))</span><br><span class="line"><span class="comment"># -1</span></span><br></pre></td></tr></table></figure>

<h4 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h4><p> join() 方法用于将序列中的元素以指定的字符连接生成一个新的字符串。</p>
<p><code>string.join(sequence)</code></p>
<ul>
<li>sequence – 要连接的元素序列。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&quot;-&quot;</span></span><br><span class="line">s2 = <span class="string">&quot;&quot;</span></span><br><span class="line">seq = (<span class="string">&quot;r&quot;</span>, <span class="string">&quot;u&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;b&quot;</span>) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s1.join( seq ))</span><br><span class="line"><span class="comment"># r-u-n-o-o-b</span></span><br><span class="line"><span class="built_in">print</span>(s2.join( seq ))</span><br><span class="line"><span class="comment"># runoob</span></span><br></pre></td></tr></table></figure>

<h4 id="isxxx"><a href="#isxxx" class="headerlink" title="isxxx()"></a>isxxx()</h4><p>判断字符串是否是字母或数字或空白</p>
<p><code>string.isalnum()</code></p>
<p>判断字符串是否是字母或数字</p>
<p><code>string.isalpha()</code></p>
<p>判断字符串是否是字母或中文字</p>
<p><code>string.isdigit()</code></p>
<p>判断字符串是否是数字</p>
<p><code>string.isnumeric()</code></p>
<p>判断字符串是否是数字字符</p>
<p><code>string.isspace()</code></p>
<p>判断字符串是否只包含空白</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&quot;runoob2016&quot;</span>  </span><br><span class="line"><span class="built_in">print</span> (str1.isalnum())</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">str2 = <span class="string">&quot;23443434&quot;</span></span><br><span class="line"><span class="built_in">print</span> (str2.isnumeric())</span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<h4 id="format"><a href="#format" class="headerlink" title="format()"></a>format()</h4><p>基本语法是通过 {} 和 : 来代替以前的 % 。</p>
<p>format 函数可以接受不限个参数，位置可以不按顺序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)    </span><br><span class="line"><span class="comment"># 不设置指定位置，按默认顺序 </span></span><br><span class="line"><span class="comment"># &#x27;hello world&#x27;  </span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&#123;0&#125; &#123;1&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)  </span><br><span class="line"><span class="comment"># 设置指定位置 </span></span><br><span class="line"><span class="comment"># &#x27;hello world&#x27;  </span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&#123;1&#125; &#123;0&#125; &#123;1&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)  </span><br><span class="line"><span class="comment"># 设置指定位置 </span></span><br><span class="line"><span class="comment"># &#x27;world hello world&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;网站名：&#123;name&#125;, 地址 &#123;url&#125;&quot;</span>.<span class="built_in">format</span>(name=<span class="string">&quot;菜鸟教程&quot;</span>, url=<span class="string">&quot;www.runoob.com&quot;</span>))</span><br><span class="line"><span class="comment"># 网站名：菜鸟教程, 地址 www.runoob.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过字典设置参数</span></span><br><span class="line">site = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;菜鸟教程&quot;</span>, <span class="string">&quot;url&quot;</span>: <span class="string">&quot;www.runoob.com&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;网站名：&#123;name&#125;, 地址 &#123;url&#125;&quot;</span>.<span class="built_in">format</span>(site))</span><br><span class="line"><span class="comment"># 网站名：菜鸟教程, 地址 www.runoob.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过列表索引设置参数</span></span><br><span class="line">my_list = [<span class="string">&#x27;菜鸟教程&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;网站名：&#123;0[0]&#125;, 地址 &#123;0[1]&#125;&quot;</span>.<span class="built_in">format</span>(my_list))  <span class="comment"># &quot;0&quot; 是必须的</span></span><br><span class="line"><span class="comment"># 网站名：菜鸟教程, 地址 www.runoob.com</span></span><br></pre></td></tr></table></figure>

<h4 id="数字格式化"><a href="#数字格式化" class="headerlink" title="数字格式化"></a>数字格式化</h4><p>下表展示了 <code>str.format() </code>格式化数字的多种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:.2f&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">3.1415926</span>))</span><br><span class="line"><span class="comment"># 注意返回的是字符串</span></span><br><span class="line"><span class="comment"># &#x27;3.14&#x27;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>数字</th>
<th>格式</th>
<th>输出</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>3.1415926</td>
<td>{:.2f}</td>
<td>3.14</td>
<td>保留小数点后两位</td>
</tr>
<tr>
<td>3.1415926</td>
<td>{:+.2f}</td>
<td>+3.14</td>
<td>带符号保留小数点后两位</td>
</tr>
<tr>
<td>-1</td>
<td>{:-.2f}</td>
<td>-1.00</td>
<td>带符号保留小数点后两位</td>
</tr>
<tr>
<td>2.71828</td>
<td>{:.0f}</td>
<td>3</td>
<td>不带小数</td>
</tr>
<tr>
<td>5</td>
<td>{:0&gt;2d}</td>
<td>05</td>
<td>数字补零 (填充左边, 宽度为2)</td>
</tr>
<tr>
<td>5</td>
<td>{:x&lt;4d}</td>
<td>5xxx</td>
<td>数字补x (填充右边, 宽度为4)</td>
</tr>
<tr>
<td>10</td>
<td>{:x&lt;4d}</td>
<td>10xx</td>
<td>数字补x (填充右边, 宽度为4)</td>
</tr>
<tr>
<td>1000000</td>
<td>{:,}</td>
<td>1,000,000</td>
<td>以逗号分隔的数字格式</td>
</tr>
<tr>
<td>0.25</td>
<td>{:.2%}</td>
<td>25.00%</td>
<td>百分比格式</td>
</tr>
<tr>
<td>1000000000</td>
<td>{:.2e}</td>
<td>1.00e+09</td>
<td>指数记法</td>
</tr>
<tr>
<td>13</td>
<td>{:&gt;10d}</td>
<td>13</td>
<td>右对齐 (默认, 宽度为10)</td>
</tr>
<tr>
<td>13</td>
<td>{:&lt;10d}</td>
<td>13</td>
<td>左对齐 (宽度为10)</td>
</tr>
<tr>
<td>13</td>
<td>{:^10d}</td>
<td>13</td>
<td>中间对齐 (宽度为10)</td>
</tr>
<tr>
<td>11</td>
<td><code>&#39;&#123;:b&#125;&#39;.format(11) &#39;&#123;:d&#125;&#39;.format(11) &#39;&#123;:o&#125;&#39;.format(11) &#39;&#123;:x&#125;&#39;.format(11) &#39;&#123;:#x&#125;&#39;.format(11) &#39;&#123;:#X&#125;&#39;.format(11)</code></td>
<td><code>1011 11 13 b 0xb 0XB</code></td>
<td>进制</td>
</tr>
</tbody></table>
<p><code>^</code>, <code>&lt;</code>, <code>&gt;</code> 分别是居中、左对齐、右对齐，后面带宽度</p>
<p> <code>:</code>号后面带填充的字符，只能是一个字符，不指定则默认是用空格填充。</p>
<p><code>+ </code>表示在正数前显示 <code>+</code>，负数前显示 <code>-</code>；<code> </code>（空格）表示在正数前加空格</p>
<p>b、d、o、x 分别是二进制、十进制、八进制、十六进制。</p>
<p>此外我们可以使用大括号<code>&#123;&#125;</code>来转义大括号，如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> (<span class="string">&quot;&#123;&#125; 对应的位置是 &#123;&#123;0&#125;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;runoob&quot;</span>))</span><br><span class="line"><span class="comment"># runoob 对应的位置是 &#123;0&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="f-string"><a href="#f-string" class="headerlink" title="f-string"></a>f-string</h4><p><strong>f-string</strong> 是 python3.6 之后版本添加的，称之为字面量格式化字符串，是新的格式化字符串的语法。</p>
<p><strong>f-string</strong> 格式化字符串以 f 开头，后面跟着字符串，字符串中的表达式用大括号 {} 包起来，它会将变量或表达式计算后的值替换进去，实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;Runoob&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Hello <span class="subst">&#123;name&#125;</span>&#x27;</span>)  <span class="comment"># 替换变量</span></span><br><span class="line"><span class="comment"># &#x27;Hello Runoob&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;<span class="number">1</span>+<span class="number">2</span>&#125;</span>&#x27;</span>)     <span class="comment"># 使用表达式</span></span><br><span class="line"><span class="comment"># &#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line">w = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;url&#x27;</span>: <span class="string">&#x27;www.runoob.com&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;w[<span class="string">&quot;name&quot;</span>]&#125;</span>: <span class="subst">&#123;w[<span class="string">&quot;url&quot;</span>]&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># &#x27;Runoob: www.runoob.com&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="列表（List）"><a href="#列表（List）" class="headerlink" title="列表（List）"></a>列表（List）</h2><p>列表由一系列按特定顺序排列的元素组成。你可以创建包含字母表中所有字母、数字0~9或所有家庭成员姓名的列表；也可以将任何东西加入列表中，其中的元素之间可以没有任何关系。</p>
<p>与元组对比，列表的长度可变、内容可以被修改。你可以用方括号定义，或用<code>list</code>函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>]</span><br><span class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br><span class="line">list3 = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line">list4 = <span class="built_in">list</span>((<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;baz&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><code>list</code>函数常用来在数据处理中实体化迭代器或生成器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gen = <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(gen))</span><br><span class="line"><span class="comment"># [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>

<h3 id="访问列表值"><a href="#访问列表值" class="headerlink" title="访问列表值"></a>访问列表值</h3><p>在Python中，第一个列表元素的索引为0，而不是1。</p>
<p>Python为访问最后一个列表元素提供了一种特殊语法。通过将索引指定为-1，可让Python返回最后一个列表元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>]</span><br><span class="line">list2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"> </span><br><span class="line">list1[<span class="number">0</span>]      <span class="comment"># physics</span></span><br><span class="line">list1[<span class="number">2</span>:]      <span class="comment"># [1997, 2000]</span></span><br><span class="line">list2[<span class="number">1</span>:<span class="number">5</span>]    <span class="comment"># [2, 3, 4, 5]</span></span><br><span class="line">list2[:]      <span class="comment"># [1, 2, 3, 4, 5, 6, 7]</span></span><br><span class="line">list2[-<span class="number">1</span>]     <span class="comment"># 7</span></span><br></pre></td></tr></table></figure>

<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p>用切边可以选取大多数序列类型的一部分，切片的基本形式是在方括号中使用<code>start:stop</code>：</p>
<p>切片的起始元素是包括的，不包含结束元素。因此，结果中包含的元素个数是<code>stop - start</code>。</p>
<p><code>start</code>或<code>stop</code>都可以被省略，省略之后，分别默认序列的开头和结尾：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">seq = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">seq[:<span class="number">5</span>]</span><br><span class="line"><span class="comment"># [7, 2, 3, 6, 3]</span></span><br><span class="line">seq[-<span class="number">4</span>:]</span><br><span class="line"><span class="comment"># [5, 6, 0, 1]</span></span><br></pre></td></tr></table></figure>

<p>下图展示了正整数和负整数的切片。在图中，指数标示在边缘以表明切片是在哪里开始哪里结束的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-522e2b688b755ff3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Python切片演示"></p>
<p>在第二个冒号后面使用<code>step</code>，可以隔一个取一个元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq[::<span class="number">2</span>]</span><br><span class="line"><span class="comment"># [7, 3, 3, 6, 1]</span></span><br></pre></td></tr></table></figure>

<p>一个聪明的方法是使用<code>-1</code>，它可以将列表或元组颠倒过来：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq[::-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># [1, 0, 6, 5, 3, 6, 3, 2, 7]</span></span><br></pre></td></tr></table></figure>

<h3 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h3><p><code>list.append(obj)</code></p>
<ul>
<li>用于在列表<strong>末尾</strong>添加新元素。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">motorcycles = [<span class="string">&#x27;honda&#x27;</span>, <span class="string">&#x27;yamaha&#x27;</span>, <span class="string">&#x27;suzuki&#x27;</span>] </span><br><span class="line">motorcycles.append(<span class="string">&#x27;ducati&#x27;</span>)  </span><br><span class="line"><span class="comment"># [&#x27;honda&#x27;, &#x27;yamaha&#x27;, &#x27;suzuki&#x27;, &#x27;ducati&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="插入元素"><a href="#插入元素" class="headerlink" title="插入元素"></a>插入元素</h3><p><code>list.insert(index, obj)</code></p>
<ul>
<li>用于将指定对象插入列表的指定位置。为此，你需要指定新元素的索引和值。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">motorcycles = [<span class="string">&#x27;honda&#x27;</span>, <span class="string">&#x27;yamaha&#x27;</span>, <span class="string">&#x27;suzuki&#x27;</span>] </span><br><span class="line">motorcycles.insert(<span class="number">0</span>, <span class="string">&#x27;ducati&#x27;</span>) </span><br><span class="line"><span class="comment"># [&#x27;ducati&#x27;, &#x27;honda&#x27;, &#x27;yamaha&#x27;, &#x27;suzuki&#x27;]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aList = [<span class="number">123</span>, <span class="string">&#x27;xyz&#x27;</span>, <span class="string">&#x27;zara&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br><span class="line">aList.insert(<span class="number">3</span>, <span class="number">2009</span>)      </span><br><span class="line"><span class="comment"># [123, &#x27;xyz&#x27;, &#x27;zara&#x27;, 2009, &#x27;abc&#x27;]</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>警告：与<code>append</code>相比，<code>insert</code>耗费的计算量大，因为对后续元素的引用必须在内部迁移，以便为新元素提供空间。如果要在序列的头部和尾部插入元素，你可能需要使用<code>collections.deque</code>，一个双尾部队列。</p>
</blockquote>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><p><code>del 语句</code></p>
<p>使用 del 语句可以从一个列表中根据索引来删除一个元素，而不是值来删除元素。这与使用pop() 返回删除的元素值不同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">motorcycles = [<span class="string">&#x27;honda&#x27;</span>, <span class="string">&#x27;yamaha&#x27;</span>, <span class="string">&#x27;suzuki&#x27;</span>] </span><br><span class="line"><span class="keyword">del</span> motorcycles[<span class="number">1</span>] </span><br><span class="line"><span class="built_in">print</span>(motorcycles)     <span class="comment"># [&#x27;honda&#x27;, &#x27;suzuki&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><code>list.remove(obj)</code></p>
<ul>
<li><p>用于移除列表中某个值的第一个匹配项。</p>
</li>
<li><p><strong>remove()只删除第一个指定的值。</strong>如果要删除的值可能在列表中出现多次，就需要使用循环来判断是否删除了所有这样的值。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aList = [<span class="number">123</span>, <span class="string">&#x27;xyz&#x27;</span>, <span class="string">&#x27;zara&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>]</span><br><span class="line">aList.remove(<span class="string">&#x27;xyz&#x27;</span>)         </span><br><span class="line"><span class="comment"># [123, &#x27;zara&#x27;, &#x27;abc&#x27;, &#x27;xyz&#x27;]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">aList = [<span class="number">123</span>, <span class="string">&#x27;xyz&#x27;</span>, <span class="string">&#x27;zara&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;xyz&#x27;</span>,<span class="string">&#x27;xyz&#x27;</span>,<span class="string">&#x27;xyz&#x27;</span>]</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;xyz&#x27;</span> <span class="keyword">in</span> aList:</span><br><span class="line">       aList.remove(<span class="string">&#x27;xyz&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(aList)</span><br><span class="line"><span class="comment"># [123, &#x27;zara&#x27;, &#x27;abc&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><code>list.pop([index=-1])</code></p>
<ul>
<li>用于移除列表中的一个元素（默认最后一个元素），并且返回该元素的值。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">motorcycles = [<span class="string">&#x27;honda&#x27;</span>, <span class="string">&#x27;yamaha&#x27;</span>, <span class="string">&#x27;suzuki&#x27;</span>] </span><br><span class="line">popped_motorcycle = motorcycles.pop() </span><br><span class="line"><span class="built_in">print</span>(motorcycles)        <span class="comment"># [&#x27;honda&#x27;, &#x27;yamaha&#x27;] </span></span><br><span class="line"><span class="built_in">print</span>(popped_motorcycle)  <span class="comment"># suzuki</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>]</span><br><span class="line">list_pop = list1.pop(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(list_pop)         <span class="comment"># Runoob</span></span><br><span class="line"><span class="built_in">print</span>(list1)            <span class="comment"># [&#x27;Google&#x27;, &#x27;Taobao&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><code>list.clear()</code></p>
<ul>
<li>用于清空列表，类似于 **del a[:]**。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>, <span class="string">&#x27;Baidu&#x27;</span>]</span><br><span class="line">list1.clear()</span><br><span class="line"><span class="built_in">print</span> (list1)</span><br><span class="line"><span class="comment"># []</span></span><br></pre></td></tr></table></figure>

<h3 id="扩展列表"><a href="#扩展列表" class="headerlink" title="扩展列表"></a>扩展列表</h3><p><code>list.extend(seq)</code></p>
<ul>
<li>用于在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表）。</li>
<li>seq – 元素列表，可以是列表、元组、集合、字典，若为字典,则仅会将键(key)作为元素依次添加至原列表的末尾。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>] </span><br><span class="line">list2 = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">5</span>)) <span class="comment"># 创建 0-4 的列表 </span></span><br><span class="line">list1.extend(list2)  <span class="comment"># 扩展列表 </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (list1)</span><br><span class="line"><span class="comment"># [&#x27;Google&#x27;, &#x27;Runoob&#x27;, &#x27;Taobao&#x27;, 0, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语言列表 </span></span><br><span class="line">language = [<span class="string">&#x27;French&#x27;</span>, <span class="string">&#x27;English&#x27;</span>, <span class="string">&#x27;German&#x27;</span>]  </span><br><span class="line"><span class="comment"># 元组 </span></span><br><span class="line">language_tuple = (<span class="string">&#x27;Spanish&#x27;</span>, <span class="string">&#x27;Portuguese&#x27;</span>)  </span><br><span class="line"><span class="comment"># 集合 </span></span><br><span class="line">language_set = &#123;<span class="string">&#x27;Chinese&#x27;</span>, <span class="string">&#x27;Japanese&#x27;</span>&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加元组元素到列表末尾 </span></span><br><span class="line">language.extend(language_tuple)  </span><br><span class="line"><span class="built_in">print</span>(language)  </span><br><span class="line"><span class="comment"># [&#x27;French&#x27;, &#x27;English&#x27;, &#x27;German&#x27;, &#x27;Spanish&#x27;, &#x27;Portuguese&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加集合元素到列表末尾 </span></span><br><span class="line">language.extend(language_set)  </span><br><span class="line"><span class="built_in">print</span>(language)</span><br><span class="line"><span class="comment"># [&#x27;French&#x27;, &#x27;English&#x27;, &#x27;German&#x27;, &#x27;Spanish&#x27;, &#x27;Portuguese&#x27;, &#x27;Chinese&#x27;, &#x27;Japanese&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="组织排序"><a href="#组织排序" class="headerlink" title="组织排序"></a>组织排序</h3><p><code>list.sort(cmp=None, key=None, reverse=False)</code></p>
<ul>
<li>sort()函数用于对原列表进行原地排序（不创建新的对象），如果指定参数，则使用比较函数指定的比较函数。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cars = [<span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>] </span><br><span class="line">cars.sort()</span><br><span class="line"><span class="built_in">print</span>(cars)    </span><br><span class="line"><span class="comment"># [&#x27;audi&#x27;, &#x27;bmw&#x27;, &#x27;subaru&#x27;, &#x27;toyota&#x27;]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vowels = [<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;i&#x27;</span>]</span><br><span class="line">vowels.sort(reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(vowels)  </span><br><span class="line"><span class="comment"># [&#x27;u&#x27;, &#x27;o&#x27;, &#x27;i&#x27;, &#x27;e&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b = [<span class="string">&#x27;saw&#x27;</span>, <span class="string">&#x27;small&#x27;</span>, <span class="string">&#x27;He&#x27;</span>, <span class="string">&#x27;foxes&#x27;</span>, <span class="string">&#x27;six&#x27;</span>]</span><br><span class="line"><span class="comment">#对列表按照元素的长度进行排序</span></span><br><span class="line">b.sort(key=<span class="built_in">len</span>)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment"># [&#x27;He&#x27;, &#x27;saw&#x27;, &#x27;six&#x27;, &#x27;small&#x27;, &#x27;foxes&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="反转顺序"><a href="#反转顺序" class="headerlink" title="反转顺序"></a>反转顺序</h3><p><code>list.reverse()</code></p>
<ul>
<li>reverse() 函数用于反向列表中元素。方法reverse()永久性地修改列表元素的排列顺序。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aList = [<span class="number">123</span>, <span class="string">&#x27;xyz&#x27;</span>, <span class="string">&#x27;zara&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>]</span><br><span class="line">aList.reverse()</span><br><span class="line"><span class="built_in">print</span>(aList)        <span class="comment"># [&#x27;xyz&#x27;, &#x27;abc&#x27;, &#x27;zara&#x27;, &#x27;xyz&#x27;, 123]</span></span><br></pre></td></tr></table></figure>

<h3 id="获取列表长度"><a href="#获取列表长度" class="headerlink" title="获取列表长度"></a>获取列表长度</h3><p><code>len(list)</code></p>
<ul>
<li>使用函数len()可快速获悉列表的长度。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cars = [<span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(cars))      <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<h3 id="匹配位置"><a href="#匹配位置" class="headerlink" title="匹配位置"></a>匹配位置</h3><p><code>list.index(x[, start[, end]])</code></p>
<ul>
<li>x– 查找的对象。</li>
<li>start– 可选，查找的起始位置。</li>
<li>end– 可选，查找的结束位置。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(list1.index(<span class="string">&#x27;Taobao&#x27;</span>))</span><br><span class="line"><span class="comment">## 1</span></span><br></pre></td></tr></table></figure>

<h3 id="脚本操作符"><a href="#脚本操作符" class="headerlink" title="脚本操作符"></a>脚本操作符</h3><table>
<thead>
<tr>
<th align="left">Python 表达式</th>
<th align="left">结果</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">len([1, 2, 3])</td>
<td align="left">3</td>
<td align="left">长度</td>
</tr>
<tr>
<td align="left">[1, 2, 3] + [4, 5, 6]</td>
<td align="left">[1, 2, 3, 4, 5, 6]</td>
<td align="left">组合</td>
</tr>
<tr>
<td align="left">[‘Hi!’] * 4</td>
<td align="left">[‘Hi!’, ‘Hi!’, ‘Hi!’, ‘Hi!’]</td>
<td align="left">重复</td>
</tr>
<tr>
<td align="left">3 <strong>in</strong> [1, 2, 3]</td>
<td align="left">True</td>
<td align="left">元素是否存在于列表中</td>
</tr>
<tr>
<td align="left">for x in [1, 2, 3]: print x,</td>
<td align="left">1 2 3</td>
<td align="left">迭代</td>
</tr>
</tbody></table>
<h3 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h3><p>列表推导式格式为：</p>
<p><code>[表达式 for 变量 in 列表]</code><br><code>[out_exp_res for out_exp in input_list]</code></p>
<p>或者</p>
<p><code>[表达式 for 变量 in 列表 if 条件]</code><br><code>[out_exp_res for out_exp in input_list if condition]</code></p>
<ul>
<li>out_exp_res：列表生成元素表达式，可以是有返回值的函数。</li>
<li>for out_exp in input_list：迭代 input_list 将 out_exp 传入到 out_exp_res 表达式中。</li>
<li>if condition：条件语句，可以过滤列表中不符合条件的值。</li>
</ul>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">names = [<span class="string">&#x27;Bob&#x27;</span>,<span class="string">&#x27;Tom&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;Jerry&#x27;</span>,<span class="string">&#x27;Wendy&#x27;</span>,<span class="string">&#x27;Smith&#x27;</span>]</span><br><span class="line">new_names = [name.upper() <span class="keyword">for</span> name <span class="keyword">in</span> names <span class="keyword">if</span> <span class="built_in">len</span>(name)&gt;<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(new_names)</span><br><span class="line"><span class="comment"># [&#x27;ALICE&#x27;, &#x27;JERRY&#x27;, &#x27;WENDY&#x27;, &#x27;SMITH&#x27;]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">multiples = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30</span>) <span class="keyword">if</span> i % <span class="number">3</span> == <span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(multiples)</span><br><span class="line"><span class="comment"># [0, 3, 6, 9, 12, 15, 18, 21, 24, 27]</span></span><br></pre></td></tr></table></figure>

<h2 id="元组（Tuple）"><a href="#元组（Tuple）" class="headerlink" title="元组（Tuple）"></a>元组（Tuple）</h2><p>Python 的元组与列表类似，不同之处在于元组的元素不能修改。</p>
<h3 id="创建元组"><a href="#创建元组" class="headerlink" title="创建元组"></a>创建元组</h3><p>元组是一个固定长度，不可改变的Python序列对象。创建元组的最简单方式，是用逗号分隔一列值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 小括号</span></span><br><span class="line">tup1 = (<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 内置函数tuple()</span></span><br><span class="line">tup2 = <span class="built_in">tuple</span>((<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>, <span class="string">&#x27;C#&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 任意无符号的对象，以逗号隔开，默认为元组</span></span><br><span class="line">tup3 = <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span></span><br></pre></td></tr></table></figure>

<p>创建空元组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup1 = ()</span><br><span class="line">tup2 = <span class="built_in">tuple</span>()</span><br></pre></td></tr></table></figure>

<p>元组中只包含一个元素时，需要在元素后面添加逗号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">1</span>,)</span><br><span class="line">tup2 = (<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tup1))</span><br><span class="line"><span class="comment"># &lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tup2))</span><br><span class="line"><span class="comment"># &lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p>用<code>tuple</code>可以将任意序列或迭代器转换成元组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>([<span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span>]))</span><br><span class="line"><span class="comment"># (4, 0, 2)</span></span><br><span class="line"></span><br><span class="line">tup = <span class="built_in">tuple</span>(<span class="string">&#x27;string&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(tup)</span><br><span class="line"><span class="comment"># (&#x27;s&#x27;, &#x27;t&#x27;, &#x27;r&#x27;, &#x27;i&#x27;, &#x27;n&#x27;, &#x27;g&#x27;)</span></span><br></pre></td></tr></table></figure>

<h3 id="修改元组"><a href="#修改元组" class="headerlink" title="修改元组"></a>修改元组</h3><p>元组中存储的对象可能是可变对象。一旦创建了元组，元组中的对象就不能修改了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tup = <span class="built_in">tuple</span>([<span class="string">&#x27;foo&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="literal">True</span>])</span><br><span class="line"></span><br><span class="line">tup[<span class="number">2</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TypeError                                 Traceback (most recent call last)</span></span><br><span class="line"><span class="comment"># &lt;ipython-input-10-c7308343b841&gt; in &lt;module&gt;()</span></span><br><span class="line"><span class="comment"># ----&gt; 1 tup[2] = False</span></span><br><span class="line"><span class="comment"># TypeError: &#x27;tuple&#x27; object does not support item assignment</span></span><br></pre></td></tr></table></figure>

<p>元组中的元素值是不允许修改的，但我们可以对元组用加法运算符进行连接组合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tup1 = (<span class="number">12</span>, <span class="number">34.56</span>) </span><br><span class="line">tup2 = (<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个新的元组 </span></span><br><span class="line">tup3 = tup1 + tup2 </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(tup3)</span><br><span class="line"><span class="comment"># (12, 34.56, &#x27;abc&#x27;, &#x27;xyz&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>如果元组中的某个对象是可变的，比如列表，可以在原位进行修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tup = <span class="built_in">tuple</span>([<span class="string">&#x27;foo&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>], <span class="literal">True</span>])</span><br><span class="line">tup[<span class="number">1</span>].append(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(tup)</span><br><span class="line"><span class="comment"># (&#x27;foo&#x27;, [1, 2, 3], True)</span></span><br></pre></td></tr></table></figure>

<h3 id="删除元组"><a href="#删除元组" class="headerlink" title="删除元组"></a>删除元组</h3><p>元组中的元素值是不允许删除的，但我们可以使用del语句来删除整个元组，如下实例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup = (<span class="string">&#x27;physics&#x27;</span>, <span class="string">&#x27;chemistry&#x27;</span>, <span class="number">1997</span>, <span class="number">2000</span>)  </span><br><span class="line"><span class="keyword">del</span> tup </span><br></pre></td></tr></table></figure>

<h3 id="访问元组"><a href="#访问元组" class="headerlink" title="访问元组"></a>访问元组</h3><p>| Python 表达式 |描述                         |<br>| :———— | :—————- | :————————— |<br>| L[2]          |    读取第三个元素               |<br>| L[-2]         |  反向读取，读取倒数第二个元素 |<br>| L[1:]         | 截取元素                     |</p>
<h3 id="迭代元组"><a href="#迭代元组" class="headerlink" title="迭代元组"></a>迭代元组</h3><p>元组是可迭代对象，可以使用for…in进行遍历</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t = <span class="built_in">tuple</span>((<span class="string">&#x27;Python&#x27;</span>, <span class="string">&#x27;Java&#x27;</span>, <span class="string">&#x27;C#&#x27;</span>))</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> t:</span><br><span class="line">	<span class="built_in">print</span>(item)</span><br><span class="line"><span class="comment"># Python Java C#</span></span><br></pre></td></tr></table></figure>

<h3 id="拆分元祖"><a href="#拆分元祖" class="headerlink" title="拆分元祖"></a>拆分元祖</h3><p>如果你想将元组赋值给类似元组的变量，Python会试图拆分等号右边的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tup = (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">a, b, c = tup</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="comment"># 6</span></span><br></pre></td></tr></table></figure>

<p>即使含有元组的元组也会被拆分：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tup = <span class="number">4</span>, <span class="number">5</span>, (<span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">a, b, (c, d) = tup</span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"><span class="comment"># 7</span></span><br></pre></td></tr></table></figure>

<p>变量拆分常用来迭代元组或列表序列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">seq = [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)]</span><br><span class="line"><span class="keyword">for</span> a, b, c <span class="keyword">in</span> seq:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;a=&#123;0&#125;, b=&#123;1&#125;, c=&#123;2&#125;&#x27;</span>.<span class="built_in">format</span>(a, b, c))</span><br><span class="line">    </span><br><span class="line"><span class="comment"># a=1, b=2, c=3</span></span><br><span class="line"><span class="comment"># a=4, b=5, c=6</span></span><br><span class="line"><span class="comment"># a=7, b=8, c=9</span></span><br></pre></td></tr></table></figure>

<p>Python允许从元组的开头“摘取”几个元素。它使用了特殊的语法<code>*rest</code>，这也用在函数签名中以抓取任意长度列表的位置参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">values = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></span><br><span class="line">a, b, *rest = values</span><br><span class="line"><span class="built_in">print</span>(rest)</span><br><span class="line"><span class="comment"># [3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p><code>rest</code>的部分是想要舍弃的部分，rest的名字不重要。作为惯用写法，许多Python程序员会将不需要的变量使用下划线：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, b, *_ = values</span><br></pre></td></tr></table></figure>

<p>因为元组的大小和内容不能修改，它的实例方法都很轻量。其中一个很有用的就是<code>count</code>（也适用于列表），它可以统计某个值得出现频率：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(a.count(<span class="number">2</span>))</span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></table></figure>



<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><table>
<thead>
<tr>
<th align="left">Python 表达式</th>
<th align="left">结果</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">len((1, 2, 3))</td>
<td align="left">3</td>
<td align="left">计算元素个数</td>
</tr>
<tr>
<td align="left">(1, 2, 3) + (4, 5, 6)</td>
<td align="left">(1, 2, 3, 4, 5, 6)</td>
<td align="left">连接</td>
</tr>
<tr>
<td align="left">(‘Hi!’,) * 4</td>
<td align="left">(‘Hi!’, ‘Hi!’, ‘Hi!’, ‘Hi!’)</td>
<td align="left">复制</td>
</tr>
<tr>
<td align="left">3 in (1, 2, 3)</td>
<td align="left">True</td>
<td align="left">元素是否存在</td>
</tr>
<tr>
<td align="left">for x in (1, 2, 3): print x,</td>
<td align="left">1 2 3</td>
<td align="left">迭代</td>
</tr>
</tbody></table>
<h3 id="元组推导式"><a href="#元组推导式" class="headerlink" title="元组推导式"></a>元组推导式</h3><p>元组推导式可以利用 range 区间、元组、列表、字典和集合等数据类型，快速生成一个满足指定需求的元组。</p>
<p>元组推导式基本格式：</p>
<p><code>(expression for item in Sequence )</code><br>或<br><code>(expression for item in Sequence if conditional )</code></p>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = (x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x7faf6ee20a50</span>&gt;  </span><br><span class="line"><span class="comment"># 返回的是生成器对象</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">tuple</span>(a)    <span class="comment"># 使用 tuple() 函数，可以直接将生成器对象转换成元组</span></span><br><span class="line"><span class="comment">#(1, 2, 3, 4, 5, 6, 7, 8, 9)</span></span><br></pre></td></tr></table></figure>



<h2 id="字典（Dict）"><a href="#字典（Dict）" class="headerlink" title="字典（Dict）"></a>字典（Dict）</h2><p>字典是另一种可变容器模型，且可存储任意类型对象。</p>
<p>字典的每个键值 <strong>key:value</strong> 对用冒号 <strong>:</strong> 分割，每个键值对之间用逗号 <strong>,</strong> 分割，整个字典包括在花括号 <strong>{}</strong> 中 。</p>
<p><strong>注意：dict 作为 Python 的关键字和内置函数，变量名不建议命名为 dict</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;3&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(tinydict[<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="comment"># &#x27;3&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="访问字典中的值"><a href="#访问字典中的值" class="headerlink" title="访问字典中的值"></a>访问字典中的值</h3><p>把相应的键放入熟悉的方括弧，如下实例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Zara&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Class&#x27;</span>: <span class="string">&#x27;First&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(tinydict[<span class="string">&#x27;Name&#x27;</span>])</span><br><span class="line"><span class="comment"># Zara</span></span><br><span class="line"><span class="built_in">print</span>(tinydict[<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line"><span class="comment"># 7</span></span><br></pre></td></tr></table></figure>

<h3 id="修改字典"><a href="#修改字典" class="headerlink" title="修改字典"></a>修改字典</h3><p>如果键存在则修改对应的值，如果键不存在则新增这个键和值。</p>
<p>向字典添加新内容的方法是增加新的键&#x2F;值对，修改或删除已有键&#x2F;值对如下实例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Zara&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Class&#x27;</span>: <span class="string">&#x27;First&#x27;</span>&#125;  </span><br><span class="line"></span><br><span class="line">tinydict[<span class="string">&#x27;Age&#x27;</span>] = <span class="number">8</span> </span><br><span class="line"><span class="comment"># 更新 </span></span><br><span class="line"></span><br><span class="line">tinydict[<span class="string">&#x27;School&#x27;</span>] = <span class="string">&quot;RUNOOB&quot;</span> </span><br><span class="line"><span class="comment"># 添加   </span></span><br></pre></td></tr></table></figure>

<p>你可以用检查列表和元组是否包含某个值的方法，检查字典中是否包含某个键：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Age&#x27;</span> <span class="keyword">in</span> tinydict	</span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<h3 id="删除字典元素"><a href="#删除字典元素" class="headerlink" title="删除字典元素"></a>删除字典元素</h3><p><code>del</code></p>
<p>对于字典中不再需要的信息，可使用del语句将相应的键—值对彻底删除。使用del语句时，必须指定字典名和要删除的键。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;points&#x27;</span>: <span class="number">5</span>&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> alien_0[<span class="string">&#x27;points&#x27;</span>] </span><br></pre></td></tr></table></figure>

<p><code>dict.pop(key[,default])</code></p>
<p>字典 pop() 方法删除字典 key（键）所对应的值，返回被删除的值。</p>
<ul>
<li><strong>key</strong> - 要删除的键</li>
<li><strong>default</strong> - 当键 key 不存在时返回的值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alien_0 = &#123;<span class="string">&#x27;color&#x27;</span>: <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;points&#x27;</span>: <span class="number">5</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(alien_0.pop(<span class="string">&#x27;points&#x27;</span>))</span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;alien_0&#x27;</span>)</span><br><span class="line"><span class="comment"># alien_0</span></span><br></pre></td></tr></table></figure>

<h3 id="清空字典"><a href="#清空字典" class="headerlink" title="清空字典"></a>清空字典</h3><p><code>dict.clear()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Class&#x27;</span>: <span class="string">&#x27;First&#x27;</span>&#125;  </span><br><span class="line">tinydict.clear()     <span class="comment"># 清空字典 </span></span><br><span class="line"><span class="keyword">del</span> tinydict         <span class="comment"># 删除字典</span></span><br></pre></td></tr></table></figure>

<h3 id="遍历字典"><a href="#遍历字典" class="headerlink" title="遍历字典"></a>遍历字典</h3><h4 id="遍历所有键值对"><a href="#遍历所有键值对" class="headerlink" title="遍历所有键值对"></a>遍历所有键值对</h4><p><code>dict.items()</code></p>
<p>以列表返回可遍历的(键, 值) 元组数组。</p>
<p><strong>注意，即便遍历字典时，键—值对的返回顺序也与存储顺序不同。Python不关心键—值对的存储顺序，而只跟踪键和值之间的关联关系。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">user_0 = &#123; </span><br><span class="line">  <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;efermi&#x27;</span>, </span><br><span class="line">  <span class="string">&#x27;first&#x27;</span>: <span class="string">&#x27;enrico&#x27;</span>, </span><br><span class="line">  <span class="string">&#x27;last&#x27;</span>: <span class="string">&#x27;fermi&#x27;</span>, </span><br><span class="line"> &#125; </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> user_0.items(): </span><br><span class="line">	<span class="built_in">print</span>(key, value)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># username efermi</span></span><br><span class="line"><span class="comment"># first enrico</span></span><br><span class="line"><span class="comment"># last fermi</span></span><br></pre></td></tr></table></figure>

<h4 id="遍历所有键"><a href="#遍历所有键" class="headerlink" title="遍历所有键"></a>遍历所有键</h4><p><code>dict.keys()</code></p>
<p>返回一个字典所有的键。方法keys()并非只能用于遍历；实际上，它返回一个列表，其中包含字典中的所有键。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">favorite_languages = &#123; </span><br><span class="line"> <span class="string">&#x27;jen&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;sarah&#x27;</span>: <span class="string">&#x27;c&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;edward&#x27;</span>: <span class="string">&#x27;ruby&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;phil&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, </span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> favorite_languages.keys():</span><br><span class="line"><span class="comment"># for name in favorite_languages:	</span></span><br><span class="line">	<span class="built_in">print</span>(name.title())  </span><br></pre></td></tr></table></figure>

<p> 遍历字典时，会默认遍历所有的键，因此，如果将上述代码中的for name in favorite_ languages.keys(): 替换为 for name in favorite_languages:，输出将不变。</p>
<h4 id="遍历所有值"><a href="#遍历所有值" class="headerlink" title="遍历所有值"></a>遍历所有值</h4><p><code>dict.values()</code></p>
<p>以列表返回一个字典所有的值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">favorite_languages = &#123; </span><br><span class="line"> <span class="string">&#x27;jen&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;sarah&#x27;</span>: <span class="string">&#x27;c&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;edward&#x27;</span>: <span class="string">&#x27;ruby&#x27;</span>, </span><br><span class="line"> <span class="string">&#x27;phil&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, </span><br><span class="line"> &#125; </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> language <span class="keyword">in</span> favorite_languages.values(): </span><br><span class="line">     <span class="built_in">print</span>(language.title())</span><br></pre></td></tr></table></figure>

<h3 id="融合字典"><a href="#融合字典" class="headerlink" title="融合字典"></a>融合字典</h3><p><code>dict.update(dict2)</code></p>
<p>用<code>update</code>方法可以将一个字典与另一个融合：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">d1 = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;some value&#x27;</span>, <span class="string">&#x27;b&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="number">7</span>: <span class="string">&#x27;an integer&#x27;</span>&#125;</span><br><span class="line">d1.update(&#123;<span class="string">&#x27;b&#x27;</span> : <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;c&#x27;</span> : <span class="number">12</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(d1)</span><br><span class="line"><span class="comment"># &#123;&#x27;a&#x27;: &#x27;some value&#x27;, &#x27;b&#x27;: &#x27;foo&#x27;, 7: &#x27;an integer&#x27;, &#x27;c&#x27;: 12&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>update</code>方法是原地改变字典，因此任何传递给<code>update</code>的键的旧的值都会被舍弃。</p>
<h3 id="用序列创建字典"><a href="#用序列创建字典" class="headerlink" title="用序列创建字典"></a>用序列创建字典</h3><p>常常，你可能想将两个序列配对组合成字典。下面是一种写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mapping = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> <span class="built_in">zip</span>(key_list, value_list):</span><br><span class="line">    mapping[key] = value</span><br></pre></td></tr></table></figure>

<p>因为字典本质上是2元元组的集合，dict可以接受二元元组的列表：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">key = <span class="built_in">range</span>(<span class="number">5</span>)</span><br><span class="line">value = <span class="built_in">reversed</span>(<span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line">mapping = <span class="built_in">dict</span>(<span class="built_in">zip</span>(key,value))</span><br><span class="line"><span class="built_in">print</span>(mapping)</span><br><span class="line"><span class="comment"># &#123;0: 4, 1: 3, 2: 2, 3: 1, 4: 0&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="字典推导式"><a href="#字典推导式" class="headerlink" title="字典推导式"></a>字典推导式</h3><p>字典推导基本格式</p>
<p><code>&#123; key_expr: value_expr for value in collection &#125;</code><br>或<br><code>&#123; key_expr: value_expr for value in collection if condition &#125;</code></p>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">listdemo = [<span class="string">&#x27;Google&#x27;</span>,<span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>]</span><br><span class="line"><span class="comment"># 将列表中各字符串值为键，各字符串的长度为值，组成键值对</span></span><br><span class="line">newdict = &#123;key:<span class="built_in">len</span>(key) **<span class="keyword">for</span>** key **<span class="keyword">in</span>** listdemo&#125;</span><br><span class="line"><span class="built_in">print</span>(newdict)</span><br><span class="line"><span class="comment"># &#123;&#x27;Google&#x27;: 6, &#x27;Runoob&#x27;: 6, &#x27;Taobao&#x27;: 6&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;x: x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>)&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic)</span><br><span class="line"><span class="comment"># &#123;2: 4, 4: 16, 6: 36&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="字典键的特性"><a href="#字典键的特性" class="headerlink" title="字典键的特性"></a>字典键的特性</h3><p>字典值可以没有限制地取任何 python 对象，既可以是标准的对象，也可以是用户定义的，但键不行。</p>
<p>两个重要的点需要记住：</p>
<ul>
<li>不允许同一个键出现两次。创建时如果同一个键被赋值两次，后一个值会被记住，如下实例：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>, <span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Manni&#x27;</span>&#125;  </span><br><span class="line"><span class="built_in">print</span>(tinydict[<span class="string">&#x27;Name&#x27;</span>])</span><br><span class="line"><span class="comment"># Manni</span></span><br></pre></td></tr></table></figure>

<ul>
<li>键必须不可变，所以可以用数字，字符串或元组充当，不可以是列表，如下实例：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;[<span class="string">&#x27;Name&#x27;</span>]: <span class="string">&#x27;Zara&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">7</span>&#125; </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(tinydict[<span class="string">&#x27;Name&#x27;</span>])</span><br><span class="line"> <span class="comment"># TypeError: unhashable type: &#x27;list&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h3><h4 id="get"><a href="#get" class="headerlink" title="get()"></a>get()</h4><p>get() 函数返回指定键的值。</p>
<p><code>dict.get(key[, value])</code> </p>
<ul>
<li><p>key – 字典中要查找的键。</p>
</li>
<li><p>value – 可选，如果指定键的值不存在时，返回该默认值。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;<span class="string">&#x27;Name&#x27;</span>: <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Age&#x27;</span>: <span class="number">27</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(tinydict.get(<span class="string">&#x27;Age&#x27;</span>))</span><br><span class="line"><span class="comment"># 27</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 没有设置 Sex，也没有设置默认的值，输出 None</span></span><br><span class="line"><span class="built_in">print</span> (tinydict.get(<span class="string">&#x27;Sex&#x27;</span>))  </span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 没有设置 Salary，输出默认的值  0.0</span></span><br><span class="line"><span class="built_in">print</span> (tinydict.get(<span class="string">&#x27;Salary&#x27;</span>, <span class="number">0.0</span>))</span><br><span class="line"><span class="comment"># 0.0</span></span><br></pre></td></tr></table></figure>

<p><strong>get() 方法 Vs dict[key] 访问元素区别</strong></p>
<ul>
<li><p>get(key)  方法在 key（键）不在字典中时，可以返回默认值 <strong>None</strong> 或者设置的默认值。</p>
</li>
<li><p>dict[key] 在 key（键）不在字典中时，会触发 <strong>KeyError</strong> 异常。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">runoob = &#123;&#125;</span><br><span class="line"><span class="built_in">print</span>(runoob.get(<span class="string">&#x27;url&#x27;</span>))     <span class="comment"># 返回 None</span></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(runoob[<span class="string">&#x27;url&#x27;</span>])     <span class="comment"># 触发 KeyError</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment"># KeyError: &#x27;url&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="keys"><a href="#keys" class="headerlink" title="keys()"></a>keys()</h4><p>字典 keys() 方法返回一个视图对象。视图对象不是列表，不支持索引，可以使用 list() 来转换为列表。</p>
<p>我们不能对视图对象进行任何的修改，因为字典的视图对象都是只读的。</p>
<p><code>dict.keys()</code></p>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dishes = &#123;<span class="string">&#x27;eggs&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;sausage&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;bacon&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;spam&#x27;</span>: <span class="number">500</span>&#125;</span><br><span class="line">keys = dishes.keys()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(keys)</span><br><span class="line"><span class="comment"># dict_keys([&#x27;eggs&#x27;, &#x27;sausage&#x27;, &#x27;bacon&#x27;, &#x27;spam&#x27;])</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(keys))</span><br><span class="line"><span class="comment"># [&#x27;eggs&#x27;, &#x27;sausage&#x27;, &#x27;bacon&#x27;, &#x27;spam&#x27;]</span></span><br></pre></td></tr></table></figure>

<h4 id="values"><a href="#values" class="headerlink" title="values()"></a>values()</h4><p>字典 values() 方法返回一个视图对象。视图对象不是列表，不支持索引，可以使用 list() 来转换为列表。</p>
<p>我们不能对视图对象进行任何的修改，因为字典的视图对象都是只读的。</p>
<p><code>dict.values()</code></p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dishes = &#123;&#x27;eggs&#x27;: 2, &#x27;sausage&#x27;: 1, &#x27;bacon&#x27;: 1, &#x27;spam&#x27;: 500&#125;</span><br><span class="line">values = dishes.values()</span><br><span class="line"></span><br><span class="line">print(values)</span><br><span class="line"># dict_values([2, 1, 1, 500])</span><br><span class="line"></span><br><span class="line">print(list(values))</span><br><span class="line"># </span><br><span class="line">.[2, 1, 1, 500]</span><br><span class="line"></span><br><span class="line"># 迭代</span><br><span class="line">n = 0</span><br><span class="line">for val in values:</span><br><span class="line">	n += val</span><br><span class="line">print(n)</span><br><span class="line"># 504</span><br></pre></td></tr></table></figure>

<h4 id="items"><a href="#items" class="headerlink" title="items()"></a>items()</h4><p>items() 方法以列表返回视图对象，是一个可遍历的key&#x2F;value 对。视图对象不是列表，不支持索引，可以使用 list() 来转换为列表。</p>
<p>我们不能对视图对象进行任何的修改，因为字典的视图对象都是只读的。</p>
<p><code>dict.items()</code></p>
<p>实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tinydict = &#123;&#x27;Name&#x27;: &#x27;Runoob&#x27;, &#x27;Age&#x27;: 7&#125;  </span><br><span class="line">print(tinydict.items())</span><br><span class="line"># dict_items([(&#x27;Name&#x27;, &#x27;Runoob&#x27;), (&#x27;Age&#x27;, 7)])</span><br></pre></td></tr></table></figure>



<h2 id="集合（Set）"><a href="#集合（Set）" class="headerlink" title="集合（Set）"></a>集合（Set）</h2><p>集合（set）是一个<strong>无序</strong>的<strong>不重复</strong>元素序列。</p>
<p>可以使用大括号 { } 或者 set() 函数创建集合，</p>
<p>**创建一个空集合必须用 set() 而不是 { }**，因为 { } 是用来创建一个空字典。</p>
<p>集合的特点</p>
<ul>
<li>自动去除重复数据</li>
<li>顺序随机，不支持下标</li>
</ul>
<h3 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h3><p><code>parame = &#123;value01,value02,...&#125;</code><br>或者<br><code>set(value)</code></p>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">basket = &#123;<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;pear&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(basket)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里演示的是去重功能</span></span><br><span class="line"><span class="comment"># &#123;&#x27;orange&#x27;, &#x27;banana&#x27;, &#x27;pear&#x27;, &#x27;apple&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="添加元素-1"><a href="#添加元素-1" class="headerlink" title="添加元素"></a>添加元素</h3><p><code>set.add(x)</code></p>
<p>将元素x添加到集合s中，如果元素已存在，则不进行任何操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">thisset = <span class="built_in">set</span>((<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>, <span class="string">&quot;Taobao&quot;</span>))</span><br><span class="line">thisset.add(<span class="string">&quot;Facebook&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(thisset)</span><br><span class="line"><span class="comment"># &#123;&#x27;Taobao&#x27;, &#x27;Facebook&#x27;, &#x27;Google&#x27;, &#x27;Runoob&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>set.update(set)</code></p>
<p>update() 方法用于修改当前集合，可以添加新的元素或集合到当前集合中，如果添加的元素在集合中已存在，则该元素只会出现一次，重复的会忽略。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125; </span><br><span class="line">y = &#123;<span class="string">&quot;google&quot;</span>, <span class="string">&quot;runoob&quot;</span>, <span class="string">&quot;apple&quot;</span>&#125;  </span><br><span class="line">x.update(y)   </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment">## &#123;&#x27;banana&#x27;, &#x27;apple&#x27;, &#x27;google&#x27;, &#x27;runoob&#x27;, &#x27;cherry&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="删除元素-1"><a href="#删除元素-1" class="headerlink" title="删除元素"></a>删除元素</h3><p><code>set.remove(item)</code></p>
<p>remove() 方法用于移除集合中的指定元素。remove()方法在移除一个不存在的元素时会发生错误。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;  </span><br><span class="line"></span><br><span class="line">fruits.remove(<span class="string">&quot;banana&quot;</span>)   </span><br><span class="line"><span class="built_in">print</span>(fruits)</span><br><span class="line"><span class="comment"># &#123;&#x27;cherry&#x27;, &#x27;apple&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">fruits.remove(<span class="string">&quot;melon&quot;</span>)  </span><br><span class="line"><span class="comment">#Traceback (most recent call last):</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">KeyError: <span class="string">&#x27;melon&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>set.discard(value)</code></p>
<p>discard() 方法用于移除指定的集合元素。</p>
<p>该方法不同于 <code>remove()</code> 方法，因为 <code>remove()</code> 方法在移除一个不存在的元素时会发生错误，而 <code>discard()</code> 方法不会。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;  </span><br><span class="line">fruits.discard(<span class="string">&quot;banana&quot;</span>)   </span><br><span class="line"><span class="built_in">print</span>(fruits)</span><br><span class="line"><span class="comment"># &#123;&#x27;cherry&#x27;, &#x27;apple&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>set.pop()</code></p>
<p>pop()方法用于随机移除一个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>, <span class="string">&quot;cherry&quot;</span>&#125;  </span><br><span class="line">fruits.pop()   </span><br><span class="line"><span class="built_in">print</span>(fruits)</span><br><span class="line"><span class="comment"># &#123;&#x27;apple&#x27;, &#x27;banana&#x27;&#125; 也可能是 &#123;&#x27;cherry&#x27;, &#x27;banana&#x27;&#125; 或者 &#123;&#x27;cherry&#x27;, &#x27;banana&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="判断元素是否在集合中存在"><a href="#判断元素是否在集合中存在" class="headerlink" title="判断元素是否在集合中存在"></a>判断元素是否在集合中存在</h3><p><code>x (not)in s</code></p>
<p>判断元素 x 是否在集合 s 中，存在返回 True，不存在返回 False。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">thisset = <span class="built_in">set</span>((<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>, <span class="string">&quot;Taobao&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Runoob&quot;</span> <span class="keyword">in</span> thisset)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Facebook&quot;</span> <span class="keyword">in</span> thisset)</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<h3 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h3><p>集合支持合并、交集、差分和对称差等数学集合运算。考虑两个示例集合：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">b = &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br></pre></td></tr></table></figure>

<p>合并是取两个集合中不重复的元素。可以用<code>union</code>方法，或者<code>|</code>运算符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.union(b))</span><br><span class="line"><span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br><span class="line"><span class="built_in">print</span>(a|b)</span><br><span class="line"><span class="comment"># &#123;1, 2, 3, 4, 5, 6, 7, 8&#125;</span></span><br></pre></td></tr></table></figure>

<p>交集的元素包含在两个集合中。可以用<code>intersection</code>或<code>&amp;</code>运算符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a.intersection(b))</span><br><span class="line"><span class="comment"># &#123;3,4,5&#125;</span></span><br><span class="line"><span class="built_in">print</span>(a &amp; b)</span><br><span class="line"><span class="comment"># &#123;3,4,5&#125;</span></span><br></pre></td></tr></table></figure>

<p>表3-1列出了常用的集合方法。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-980efe5d98ecc4d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表3-1 Python的集合操作"></p>
<h3 id="集合推导式"><a href="#集合推导式" class="headerlink" title="集合推导式"></a>集合推导式</h3><p>集合推导式基本格式：</p>
<p><code>&#123; expression for item in Sequence &#125;</code><br>或<br><code>&#123; expression for item in Sequence if conditional &#125;</code></p>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setnew = &#123;i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)&#125;</span><br><span class="line"><span class="built_in">print</span>(setnew)</span><br><span class="line"><span class="comment"># &#123;1, 4, 9&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&#x27;abracadabra&#x27;</span> <span class="keyword">if</span> x <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">&#x27;abc&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># &#123;&#x27;d&#x27;, &#x27;r&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数是组织好的，可重复使用的，用来实现单一，或相关联功能的代码段。</p>
<p>你可以定义一个由自己想要功能的函数，以下是简单的规则：</p>
<ul>
<li>函数代码块以 <strong>def</strong> 关键词开头，后接函数标识符名称和圆括号**()**。</li>
<li>任何传入参数和自变量必须放在圆括号中间。圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进。</li>
<li><strong>return [表达式]</strong> 结束函数，选择性地返回一个值给调用方。不带表达式的return相当于返回 None。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def functionname( parameters ):  </span><br><span class="line">	&quot;函数_文档字符串&quot;   </span><br><span class="line">	function_suite   </span><br><span class="line">	return [expression]</span><br></pre></td></tr></table></figure>

<h3 id="可更改-mutable-与不可更改-immutable-对象"><a href="#可更改-mutable-与不可更改-immutable-对象" class="headerlink" title="可更改(mutable)与不可更改(immutable)对象"></a>可更改(mutable)与不可更改(immutable)对象</h3><p>在 python 中，strings, tuples, 和 numbers 是不可更改的对象，而 list,dict 等则是可以修改的对象。</p>
<ul>
<li><strong>不可变类型：</strong>变量赋值 <strong>a&#x3D;5</strong> 后再赋值 <strong>a&#x3D;10</strong>，这里实际是新生成一个 int 值对象 10，再让 a 指向它，而 5 被丢弃，不是改变a的值，相当于新生成了a。</li>
<li><strong>可变类型：</strong>变量赋值 <strong>la&#x3D;[1,2,3,4]</strong> 后再赋值 <strong>la[2]&#x3D;5</strong> 则是将 list la 的第三个元素值更改，本身la没有动，只是其内部的一部分值被修改了。</li>
</ul>
<p>python 函数的参数传递：</p>
<ul>
<li><strong>不可变类型：</strong>类似 c++ 的值传递，如 整数、字符串、元组。如fun（a），传递的只是a的值，没有影响a对象本身。比如在 fun（a）内部修改 a 的值，只是修改另一个复制的对象，不会影响 a 本身。</li>
<li><strong>可变类型：</strong>类似 c++ 的引用传递，如 列表，字典。如 fun（la），则是将 la 真正的传过去，修改后fun外部的la也会受影响</li>
</ul>
<p>python 中一切都是对象，严格意义我们不能说值传递还是引用传递，我们应该说传不可变对象和传可变对象。</p>
<h4 id="传不可变对象实例"><a href="#传不可变对象实例" class="headerlink" title="传不可变对象实例"></a>传不可变对象实例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def ChangeInt( a ):    </span><br><span class="line">	a = 10  </span><br><span class="line">b = 2 </span><br><span class="line">ChangeInt(b) </span><br><span class="line"></span><br><span class="line">print(b)</span><br><span class="line"># 结果是 2</span><br></pre></td></tr></table></figure>

<p>实例中有 int 对象 2，指向它的变量是 b，在传递给 ChangeInt 函数时，按传值的方式复制了变量 b，a 和 b 都指向了同一个 Int 对象，在 a&#x3D;10 时，则新生成一个 int 值对象 10，并让 a 指向它。</p>
<h4 id="传可变对象实例"><a href="#传可变对象实例" class="headerlink" title="传可变对象实例"></a>传可变对象实例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 可写函数说明 def changeme( mylist ):   </span><br><span class="line">	&quot;修改传入的列表&quot;   </span><br><span class="line">	mylist.append([1,2,3,4])   </span><br><span class="line">	print &quot;函数内取值: &quot;, mylist   </span><br><span class="line">	return  </span><br><span class="line"># 调用changeme函数 </span><br><span class="line">mylist = [10,20,30] </span><br><span class="line">changeme( mylist ) </span><br><span class="line">print &quot;函数外取值: &quot;, mylist</span><br></pre></td></tr></table></figure>

<p>实例中传入函数的和在末尾添加新内容的对象用的是同一个引用，故输出结果如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">函数内取值:  [10, 20, 30, [1, 2, 3, 4]]</span><br><span class="line">函数外取值:  [10, 20, 30, [1, 2, 3, 4]]</span><br></pre></td></tr></table></figure>

<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><h4 id="位置参数（positional-argument）"><a href="#位置参数（positional-argument）" class="headerlink" title="位置参数（positional argument）"></a>位置参数（positional argument）</h4><p>所谓位置参数，是指用相对位置指代参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def functionname([formal_args,] *var_args_tuple ):   </span><br><span class="line">	&quot;函数_文档字符串&quot;   </span><br><span class="line">	function_suite   </span><br><span class="line">	return [expression]</span><br></pre></td></tr></table></figure>

<p><code>*</code>参数收集所有未匹配的位置参数组成一个<strong>tuple对象</strong>，局部变量args指向此tuple对象</p>
<p>位置参数实例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def printinfo( arg1, *vartuple):   </span><br><span class="line">	&quot;打印任何传入的参数&quot;    </span><br><span class="line">	print arg1   </span><br><span class="line">	for var in vartuple:      </span><br><span class="line">		print var   </span><br><span class="line">	return  </span><br><span class="line">	</span><br><span class="line"># 调用printinfo 函数 </span><br><span class="line">printinfo( 10 ) </span><br><span class="line"># 10</span><br><span class="line">printinfo( 70, 60, 50 )</span><br><span class="line"># 70 60 50</span><br></pre></td></tr></table></figure>

<h4 id="关键字参数（keyword-argument）"><a href="#关键字参数（keyword-argument）" class="headerlink" title="关键字参数（keyword argument）"></a>关键字参数（keyword argument）</h4><p>使用关键字指代参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def functionname([formal_args,]  **var_args_dict ):   </span><br><span class="line">	&quot;函数_文档字符串&quot;   </span><br><span class="line">	function_suite   </span><br><span class="line">	return [expression]</span><br></pre></td></tr></table></figure>

<p><code>**</code>参数收集所有未匹配的关键字参数组成一个<strong>dict对象</strong>，局部变量kwargs指向此dict对象</p>
<p>关键词参数实例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def bar(param1, **param2):</span><br><span class="line">   print(param1)</span><br><span class="line">   print(param2)</span><br><span class="line"></span><br><span class="line">bar(1,a=2,b=3)</span><br><span class="line"># 1</span><br><span class="line"># &#123;&#x27;a&#x27;: 2, &#x27;b&#x27;: 3&#125;</span><br></pre></td></tr></table></figure>

<h3 id="匿名-lambda-函数"><a href="#匿名-lambda-函数" class="headerlink" title="匿名(lambda)函数"></a>匿名(lambda)函数</h3><p>python 使用 lambda 来创建匿名函数。</p>
<ul>
<li>lambda只是一个表达式，函数体比def简单很多。</li>
<li>lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。</li>
<li>lambda函数拥有自己的命名空间，且不能访问自有参数列表之外或全局命名空间里的参数。</li>
<li>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ul>
<p>语法：</p>
<p><code>lambda [arg1 [,arg2,.....argn]]:expression</code></p>
<p>实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line"><span class="comment"># 30</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>((lamda a, b, c=<span class="number">5</span>: a+b+c)(<span class="number">2</span>,<span class="number">6</span>))</span><br><span class="line"><span class="comment"># 13</span></span><br></pre></td></tr></table></figure>

<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><h3 id="print"><a href="#print" class="headerlink" title="print()"></a>print()</h3><p>print()方法用于打印输出</p>
<p><code>print(objects, sep=&#39; &#39;, end=&#39;\n&#39;, file=sys.stdout, flush=False)</code></p>
<ul>
<li>objects – 复数，表示可以一次输出多个对象。输出多个对象时，需要用 , 分隔。</li>
<li>sep – 用来间隔多个对象，<strong>默认值是一个空格</strong>。</li>
<li>end – 用来设定以什么结尾。<strong>默认值是换行符 \n</strong>，我们可以换成其他字符串。</li>
<li>file – 要写入的文件对象。</li>
<li>flush – 输出是否被缓存通常决定于 file，但如果 flush 关键字参数为 True，流会被强制刷新。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">&#x27;111&#x27;</span></span><br><span class="line">str2 = <span class="string">&#x27;222&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(str1,str2,sep=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 111</span></span><br><span class="line"><span class="comment"># 222</span></span><br></pre></td></tr></table></figure>

<h3 id="eval"><a href="#eval" class="headerlink" title="eval()"></a>eval()</h3><p>eval() 函数用来执行一个字符串表达式，并返回表达式的值。</p>
<p><code>eval(expression[, globals[, locals]])</code></p>
<ul>
<li>expression – 表达式。</li>
<li>globals – 变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。</li>
<li>locals – 变量作用域，局部命名空间，如果被提供，可以是任何映射对象。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">eval</span>(<span class="string">&#x27;2+2&#x27;</span>))</span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line">data = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">raw_data = <span class="string">&quot;[&#123;&#x27;姓名&#x27;:&#x27;张三&#x27;,&#x27;年龄&#x27;:14&#125;,&#123;&#x27;姓名&#x27;:&#x27;李四&#x27;,&#x27;年龄&#x27;:25&#125;]&quot;</span></span><br><span class="line">data = <span class="built_in">eval</span>(raw_data)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment"># [&#123;&#x27;姓名&#x27;: &#x27;张三&#x27;, &#x27;年龄&#x27;: 14&#125;, &#123;&#x27;姓名&#x27;: &#x27;李四&#x27;, &#x27;年龄&#x27;: 25&#125;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(data))  </span><br><span class="line"><span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate()"></a>enumerate()</h3><p>enumerate() 函数用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出<strong>数据</strong>和<strong>数据下标</strong>，可以返回<code>(i, value)</code><strong>元组序列</strong>，一般用在 for 循环当中。</p>
<p><code>enumerate(sequence, [start=0])</code></p>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">seasons = [<span class="string">&#x27;Spring&#x27;</span>, <span class="string">&#x27;Summer&#x27;</span>, <span class="string">&#x27;Fall&#x27;</span>, <span class="string">&#x27;Winter&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">enumerate</span>(seasons)))</span><br><span class="line">[(<span class="number">0</span>, <span class="string">&#x27;Spring&#x27;</span>), (<span class="number">1</span>, <span class="string">&#x27;Summer&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;Fall&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;Winter&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">enumerate</span>(seasons, start=<span class="number">1</span>)))   </span><br><span class="line"><span class="comment"># 下标从 1 开始</span></span><br><span class="line">[(<span class="number">1</span>, <span class="string">&#x27;Spring&#x27;</span>), (<span class="number">2</span>, <span class="string">&#x27;Summer&#x27;</span>), (<span class="number">3</span>, <span class="string">&#x27;Fall&#x27;</span>), (<span class="number">4</span>, <span class="string">&#x27;Winter&#x27;</span>)]</span><br></pre></td></tr></table></figure>

<p>for循环使用enumerate</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">seq = [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>] </span><br><span class="line"><span class="keyword">for</span> i, j <span class="keyword">in</span> <span class="built_in">enumerate</span>(seq):    </span><br><span class="line">	<span class="built_in">print</span>(i, j)</span><br><span class="line"><span class="comment"># 0 one</span></span><br><span class="line"><span class="comment"># 1 two</span></span><br><span class="line"><span class="comment"># 2 three	</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> <span class="built_in">enumerate</span>(seq):</span><br><span class="line">	<span class="built_in">print</span>(element)</span><br><span class="line"><span class="comment"># (0, &#x27;one&#x27;)</span></span><br><span class="line"><span class="comment"># (1, &#x27;two&#x27;)</span></span><br><span class="line"><span class="comment"># (2, &#x27;three&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>当你索引数据时，使用<code>enumerate</code>的一个好方法是计算序列（唯一的）<code>dict</code>映射到位置的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">some_list = [<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;baz&#x27;</span>]</span><br><span class="line">mapping = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i, v <span class="keyword">in</span> <span class="built_in">enumerate</span>(some_list):</span><br><span class="line">	mapping[v] = i</span><br><span class="line"><span class="built_in">print</span>(mapping)</span><br><span class="line"><span class="comment"># &#123;&#x27;foo&#x27;: 0, &#x27;bar&#x27;: 1, &#x27;baz&#x27;: 2&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h3><p><strong>filter()</strong> 函数用于过滤序列，过滤掉不符合条件的元素，返回一个迭代器对象，如果要转换为列表，可以使用 list() 来转换。</p>
<p>该接收两个参数，第一个为函数，第二个为序列，序列的每个元素作为参数传递给函数进行判断，然后返回 True 或 False，最后将返回 True 的元素放到新列表中。</p>
<p><code>filter(function, iterable)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tmplist = <span class="built_in">filter</span>(<span class="keyword">lambda</span> n: n % <span class="number">2</span> == <span class="number">1</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]) </span><br><span class="line">newlist = <span class="built_in">list</span>(tmplist) </span><br><span class="line"><span class="built_in">print</span>(newlist)</span><br><span class="line"><span class="comment"># [1,3,5,7,9]</span></span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p>map() 函数会根据提供的函数对指定序列做映射。</p>
<p>第一个参数 function 以参数序列中的每一个元素调用 function 函数，返回包含每次 function 函数返回值的新列表。</p>
<p><code>map(function, iterable, ...)</code></p>
<ul>
<li>function – <strong>函数名！！！</strong></li>
<li>iterable – 一个或多个序列</li>
<li><strong>返回一个迭代器</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):  <span class="comment"># 计算平方数</span></span><br><span class="line">    <span class="keyword">return</span> x ** <span class="number">2</span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">map</span>(square, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]))  <span class="comment"># 计算列表各个元素的平方</span></span><br><span class="line"><span class="comment"># &lt;map object at 0x100d3d550&gt;       # 返回迭代器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(square, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])))  <span class="comment"># 使用 list() 转换为列表</span></span><br><span class="line"><span class="comment"># [1, 4, 9, 16, 25]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x ** <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])))  <span class="comment"># 使用 lambda 匿名函数</span></span><br><span class="line"><span class="comment"># [1, 4, 9, 16, 25]</span></span><br></pre></td></tr></table></figure>
输入一行整数，数字之间以空格间隔。输出这些数字组成的完整列表。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&quot;1 2 3 4 5&quot;</span></span><br><span class="line">num = <span class="built_in">str</span>.split()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, num)))</span><br><span class="line"><span class="comment"># map映射</span></span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">print</span>([<span class="built_in">int</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> num])</span><br><span class="line"><span class="comment"># 列表推导式</span></span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="sorted"><a href="#sorted" class="headerlink" title="sorted()"></a>sorted()</h3><p><code>sorted(iterable, key=None, reverse=False)   </code></p>
<ul>
<li>sorted()函数让你能够按特定顺序显示列表元素，同时<strong>不影响它们在列表中的原始排列顺序</strong>。</li>
<li>iterable –  可迭代对象。</li>
<li>key –  主要是用来进行比较的元素，只有一个参数，具体的函数的参数就是取自于可迭代对象中，指定可迭代对象中的一个元素来进行排序。</li>
<li>reverse –  排序规则，reverse &#x3D; True  降序 ， reverse &#x3D; False 升序（默认）。</li>
<li>返回值返回重新排序的<strong>列表</strong>。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cars = [<span class="string">&#x27;bmw&#x27;</span>, <span class="string">&#x27;audi&#x27;</span>, <span class="string">&#x27;toyota&#x27;</span>, <span class="string">&#x27;subaru&#x27;</span>] </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(cars))  </span><br><span class="line"><span class="comment"># [&#x27;audi&#x27;, &#x27;bmw&#x27;, &#x27;subaru&#x27;, &#x27;toyota&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(cars)          </span><br><span class="line"><span class="comment"># [&#x27;bmw&#x27;, &#x27;audi&#x27;, &#x27;toyota&#x27;, &#x27;subaru&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="zip"><a href="#zip" class="headerlink" title="zip()"></a>zip()</h3><p><code>zip([iterable, ...])</code></p>
<p>zip() 函数用于将可迭代的对象作为参数，将对象中对应的元素打包成一个个<strong>元组</strong>，然后返回由这些元组组成的对象，这样做的好处是节约了不少的内存。</p>
<p>我们可以使用 list() 转换来输出列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">c = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line">zipped = <span class="built_in">zip</span>(a,b)   </span><br><span class="line"><span class="comment"># 返回一个对象&lt;zip object at 0x000001D2A6F817C0&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(zipped))  <span class="comment"># list() 转换为列表</span></span><br><span class="line"><span class="comment"># [(1, 4), (2, 5), (3, 6)]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">zip</span>(a,c)))        <span class="comment"># 元素个数与最短的列表一致</span></span><br><span class="line"><span class="comment"># [(1, 4), (2, 5), (3, 6)]</span></span><br><span class="line"></span><br><span class="line">a1, a2 = <span class="built_in">zip</span>(*<span class="built_in">zip</span>(a,b))      <span class="comment"># 与 zip 相反，zip(*) 可理解为解压，返回二维矩阵式</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(a1))</span><br><span class="line"><span class="comment"># [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(a2))</span><br><span class="line"><span class="comment"># [4, 5, 6]</span></span><br></pre></td></tr></table></figure>

<p>给出一个“被压缩的”序列，<code>zip</code>可以被用来解压序列。也可以当作把行的列表转换为列的列表。这个方法看起来有点神奇:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pitchers = [(<span class="string">&#x27;Nolan&#x27;</span>, <span class="string">&#x27;Ryan&#x27;</span>), (<span class="string">&#x27;Roger&#x27;</span>, <span class="string">&#x27;Clemens&#x27;</span>),(<span class="string">&#x27;Schilling&#x27;</span>, <span class="string">&#x27;Curt&#x27;</span>)]</span><br><span class="line">first_names, last_names = <span class="built_in">zip</span>(*pitchers)</span><br><span class="line"><span class="built_in">print</span>(first_names)</span><br><span class="line"><span class="comment"># (&#x27;Nolan&#x27;, &#x27;Roger&#x27;, &#x27;Schilling&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(last_names)</span><br><span class="line"><span class="comment"># (&#x27;Ryan&#x27;, &#x27;Clemens&#x27;, &#x27;Curt&#x27;)</span></span><br></pre></td></tr></table></figure>

<p><code>zip</code>的常见用法之一是同时迭代多个序列，可能结合<code>enumerate</code>使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i, (a, b) <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">zip</span>(seq1, seq2)):</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&#x27;&#123;0&#125;: &#123;1&#125;, &#123;2&#125;&#x27;</span>.<span class="built_in">format</span>(i, a, b))</span><br><span class="line"><span class="comment"># 0: foo, one</span></span><br><span class="line"><span class="comment"># 1: bar, two</span></span><br><span class="line"><span class="comment"># 2: baz, three</span></span><br></pre></td></tr></table></figure>

<h3 id="reversed"><a href="#reversed" class="headerlink" title="reversed()"></a>reversed()</h3><p><code>reversed(seq)</code></p>
<p>reversed 函数返回一个反转的迭代器。</p>
<ul>
<li>seq – 要转换的序列，可以是 tuple, string, list 或 range。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">reversed</span>(<span class="built_in">range</span>(<span class="number">10</span>))))</span><br><span class="line"><span class="comment"># [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span></span><br></pre></td></tr></table></figure>

<p>要记住<code>reversed</code>是一个生成器，只有实体化（即列表或for循环）之后才能创建翻转的序列。</p>
<h3 id="setattr"><a href="#setattr" class="headerlink" title="setattr()"></a>setattr()</h3><p><code>setattr(object, name, value)</code></p>
<p>setattr() 函数对应函数 getattr()，用于设置属性值，该属性不一定是存在的。</p>
<p>如果属性不存在会创建一个新的对象属性，并对属性赋值。</p>
<ul>
<li>object – 对象。</li>
<li>name – 字符串，对象属性。</li>
<li>value – 属性值。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">	bar = <span class="number">1</span></span><br><span class="line">a = A()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getattr</span>(a, <span class="string">&#x27;bar&#x27;</span>))          <span class="comment"># 获取属性 bar 值</span></span><br><span class="line"><span class="comment">## 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">setattr</span>(a, <span class="string">&#x27;bar&#x27;</span>, <span class="number">5</span>))       <span class="comment"># 设置属性 bar 值</span></span><br><span class="line"><span class="built_in">print</span>(a.bar)</span><br><span class="line"><span class="comment">## 5</span></span><br></pre></td></tr></table></figure>

<h3 id="hasattr"><a href="#hasattr" class="headerlink" title="hasattr()"></a>hasattr()</h3><p><code>hasattr(object, name)</code></p>
<p><strong>hasattr()</strong> 函数用于判断对象是否包含对应的属性。</p>
<ul>
<li>object – 对象。</li>
<li>name – 字符串，属性名。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Coordinate</span>:    </span><br><span class="line">	x = <span class="number">10</span>    </span><br><span class="line">	y = -<span class="number">5</span>    </span><br><span class="line">	z = <span class="number">0</span>  </span><br><span class="line">point1 = Coordinate()  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(point1, <span class="string">&#x27;x&#x27;</span>)) </span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(point1, <span class="string">&#x27;y&#x27;</span>)) </span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(point1, <span class="string">&#x27;z&#x27;</span>)) </span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(point1, <span class="string">&#x27;no&#x27;</span>))  <span class="comment"># 没有该属性</span></span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<h3 id="getattr"><a href="#getattr" class="headerlink" title="getattr()"></a>getattr()</h3><p><code>getattr(object, name[, default])</code></p>
<p><strong>getattr()</strong> 函数用于返回一个对象属性值。</p>
<ul>
<li>object – 对象。</li>
<li>name – 字符串，对象属性。</li>
<li>default – 默认返回值，如果不提供该参数，在没有对应属性时，将触发 AttributeError。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>): </span><br><span class="line">	bar = <span class="number">1</span> </span><br><span class="line"></span><br><span class="line">a = A() </span><br><span class="line"><span class="built_in">getattr</span>(a, <span class="string">&#x27;bar&#x27;</span>)        <span class="comment"># 获取属性 bar 值 </span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="built_in">getattr</span>(a, <span class="string">&#x27;bar2&#x27;</span>)       <span class="comment"># 属性 bar2 不存在，触发异常 </span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; AttributeError: &#x27;A&#x27; object has no attribute &#x27;bar2&#x27;</span></span><br><span class="line"><span class="built_in">getattr</span>(a, <span class="string">&#x27;bar2&#x27;</span>, <span class="number">3</span>)    <span class="comment"># 属性 bar2 不存在，但设置了默认值 3</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<h2 id="三元表达式"><a href="#三元表达式" class="headerlink" title="三元表达式"></a>三元表达式</h2><p>python中的三元操作符可以使用 if-else 语句也就是条件操作符的一个快捷方式：</p>
<p><code>value = true-expr if condition else false-expr</code></p>
<ul>
<li><code>true-expr</code>或<code>false-expr</code>可以是任何Python代码。它和下面的代码效果相同：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition:</span><br><span class="line">    value = true-expr</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    value = false-expr</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sex = <span class="number">1</span></span><br><span class="line">label = <span class="string">&#x27;男&#x27;</span> <span class="keyword">if</span> sex == <span class="number">1</span> <span class="keyword">else</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(label)</span><br><span class="line"><span class="comment"># 男</span></span><br><span class="line"></span><br><span class="line">x = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Non-negative&#x27;</span> <span class="keyword">if</span> x &gt;= <span class="number">0</span> <span class="keyword">else</span> <span class="string">&#x27;Negative&#x27;</span>)</span><br><span class="line"><span class="comment"># Non-negative</span></span><br></pre></td></tr></table></figure>

<h2 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h2><h3 id="文件打开"><a href="#文件打开" class="headerlink" title="文件打开"></a>文件打开</h3><p>Python open() 方法用于打开一个文件，并<strong>返回文件对象</strong>。</p>
<p>在对文件进行处理过程都需要使用到这个函数，如果该文件无法被打开，会抛出 OSError。最常使用的是两个位置参数和一个关键字参数：open(filename, mode, encoding&#x3D;None)</p>
<p><code>f = open(&#39;workfile&#39;, &#39;w&#39;, encoding=&quot;utf-8&quot;)</code></p>
<p>完整的语法格式为：</p>
<p><code>open(file, mode=&#39;r&#39;, buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)</code></p>
<p>mode 参数有：</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong>r</strong></td>
<td>以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td><strong>w</strong></td>
<td>打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td><strong>a</strong></td>
<td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>t</td>
<td>文本模式 (默认)。</td>
</tr>
<tr>
<td>b</td>
<td>二进制模式。</td>
</tr>
<tr>
<td>+</td>
<td>打开一个文件进行更新(可读可写)。</td>
</tr>
<tr>
<td>U</td>
<td>通用换行模式（<strong>Python 3 不支持</strong>）。</td>
</tr>
<tr>
<td>x</td>
<td>写模式，新建一个文件，如果该文件已存在则会报错。</td>
</tr>
<tr>
<td>rb</td>
<td>以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td>rb+</td>
<td>以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>wb</td>
<td>以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb+</td>
<td>以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>ab</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td>
</tr>
<tr>
<td>ab+</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td>
</tr>
</tbody></table>
<ul>
<li><code>b</code>二进制；<code>+</code>可读可写</li>
<li><code>r</code>、<code>rb</code>、<code>r+</code>、<code>rb+</code>: 只要文件不存在就报错，指针放在文件开头</li>
<li><code>w</code>、<code>wb</code>、<code>w+</code>、<code>wb+</code>: 只要文件不存在就新建文件，指针放在文件开头，用新内容覆盖原内容</li>
<li><code>a</code>、<code>ab</code>、<code>a+</code>、<code>ab+</code>: 只要文件不存在就新建文件，指针放在文件结尾</li>
</ul>
<h3 id="With关键字"><a href="#With关键字" class="headerlink" title="With关键字"></a>With关键字</h3><p>在处理文件对象时，最好使用 <code>with</code> 关键字。优点是，子句体结束后，文件会正确关闭，即便触发异常也可以。而且，使用 <code>with</code> 相比等效的 <code>try-finally</code>代码块要简短得多：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;workfile&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    read_data = f.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># We can check that the file has been automatically closed.</span></span><br><span class="line">f.closed</span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<p><strong>警告:调用 <code>f.write()</code> 时，未使用 <code>with</code> 关键字，或未调用 <code>f.close()</code>，即使程序正常退出，也可能导致 <code>f.write()</code> 的参数没有完全写入磁盘。</strong></p>
<h3 id="文件对象读写"><a href="#文件对象读写" class="headerlink" title="文件对象读写"></a>文件对象读写</h3><h4 id="file-read"><a href="#file-read" class="headerlink" title="file.read()"></a>file.read()</h4><p><code>read()</code> 方法用于从文件读取指定的字符数（文本模式 t）或字节数（二进制模式 b），如果未给定参数 <strong>size</strong> 或 <strong>size</strong> 为负数则<strong>读取文件所有内容</strong>。如已到达文件末尾，<code>f.read()</code> 返回空字符串（<code>&#39;&#39;</code>）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开文件</span></span><br><span class="line">fo = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(fo.read())</span><br><span class="line"><span class="comment"># This is the entire file.\n</span></span><br><span class="line"><span class="built_in">print</span>(fo.read())</span><br><span class="line"><span class="comment"># &#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="file-readline"><a href="#file-readline" class="headerlink" title="file.readline()"></a>file.readline()</h4><p><code>f.readline()</code>从文件中<strong>读取单行数据</strong>；字符串末尾保留换行符（<code>\n</code>），只有在文件不以换行符结尾时，文件的最后一行才会省略换行符。这种方式让返回值清晰明确；只要 <code>f.readline()</code>返回空字符串，就表示已经到达了文件末尾，空行使用 <code>&#39;\n&#39;</code> 表示，该字符串只包含一个换行符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f.readline()</span><br><span class="line"><span class="comment"># &#x27;This is the first line of the file.\n&#x27;</span></span><br><span class="line">f.readline()</span><br><span class="line"><span class="comment"># &#x27;Second line of the file\n&#x27;</span></span><br><span class="line">f.readline()</span><br><span class="line"><span class="comment"># &#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>从文件中读取多行时，可以用循环遍历整个文件对象。这种操作能高效利用内存，快速，且代码简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    <span class="built_in">print</span>(line, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># This is the first line of the file.</span></span><br><span class="line"><span class="comment"># Second line of the file</span></span><br></pre></td></tr></table></figure>

<h4 id="file-readlines"><a href="#file-readlines" class="headerlink" title="file.readlines()"></a>file.readlines()</h4><p><code>readlines()</code> 方法用于读取所有行(直到结束符 EOF)并返回列表，该列表可以由 Python 的 for… in … 结构进行处理。 如果碰到结束符 EOF 则返回空字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f.readlines()</span><br><span class="line"><span class="comment"># [&#x27;This is the first line of the file\n&#x27;, &#x27;Second line of the file&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">    <span class="built_in">print</span>(line, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># This is the first line of the file.</span></span><br><span class="line"><span class="comment"># Second line of the file    </span></span><br></pre></td></tr></table></figure>

<p>如需以列表形式读取文件中的所有行，可以用 <code>list(f)</code> 或 <code>f.readlines()</code>。</p>
<h4 id="file-write"><a href="#file-write" class="headerlink" title="file.write()"></a>file.write()</h4><p><code>write()</code> 方法用于向文件中写入指定字符串，并返回写入的字符数。</p>
<p>在文件关闭前或缓冲区刷新前，字符串内容存储在缓冲区中，这时你在文件中是看不到写入的内容的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r = f.write(<span class="string">&#x27;This is a test\n&#x27;</span>)</span><br><span class="line"><span class="comment"># 15</span></span><br></pre></td></tr></table></figure>

<h4 id="file-tell"><a href="#file-tell" class="headerlink" title="file.tell()"></a>file.tell()</h4><p>返回整数，给出文件对象在文件中的当前位置，表示为二进制模式下时从文件开始的字节数，以及文本模式下的意义不明的数字。</p>
<h4 id="file-seek"><a href="#file-seek" class="headerlink" title="file.seek()"></a>file.seek()</h4><p><code>seek()</code> 方法用于移动文件读取指针到指定位置。</p>
<p><code>f.seek(offset, whence)</code></p>
<ul>
<li><strong>offset</strong> – 开始的偏移量，也就是代表需要移动偏移的字节数，如果是负数表示从倒数第几位开始。</li>
<li><strong>whence：</strong>可选，默认值为 0。给 offset 定义一个参数，表示要从哪个位置开始偏移；0 代表从文件开头开始算起，1 代表从当前位置开始算起，2 代表从文件末尾算起。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;workfile&#x27;</span>, <span class="string">&#x27;rb+&#x27;</span>)</span><br><span class="line">f.write(<span class="string">b&#x27;0123456789abcdef&#x27;</span>)</span><br><span class="line"><span class="comment"># 16</span></span><br><span class="line">f.seek(<span class="number">5</span>)    <span class="comment"># 移动到文件的第六个字节</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line">f.read(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># b&#x27;5&#x27;</span></span><br><span class="line">f.seek(-<span class="number">3</span>, <span class="number">2</span>)  <span class="comment"># 移动到文件倒数第三个字节</span></span><br><span class="line"><span class="comment"># 13</span></span><br><span class="line">f.read(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># b&#x27;d&#x27;</span></span><br></pre></td></tr></table></figure>

<h1 id="NumPy"><a href="#NumPy" class="headerlink" title="NumPy"></a>NumPy</h1><p>NumPy是一个功能强大的Python库，主要用于对多维数组执行计算。NumPy这个词来源于两个单词– <code>Numerical</code>和<code>Python</code>。</p>
<h2 id="Ndarray-对象"><a href="#Ndarray-对象" class="headerlink" title="Ndarray 对象"></a>Ndarray 对象</h2><p>NumPy 最重要的一个特点是其 N 维数组对象 ndarray，它是一系列同类型数据的集合，以 0 下标为开始进行集合中元素的索引。 </p>
<p>ndarray 内部由以下内容组成： </p>
<ul>
<li>一个指向数据（内存或内存映射文件中的一块数据）的指针。</li>
<li>数据类型或 dtype，描述在数组中的固定大小值的格子。</li>
<li>一个表示数组形状（shape）的元组，表示各维度大小的元组。</li>
<li>一个跨度元组（stride），其中的整数指的是为了前进到当前维度下一个元素需要”跨过”的字节数。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.runoob.com/wp-content/uploads/2018/10/ndarray.png" alt="img"></p>
<h3 id="numpy-array"><a href="#numpy-array" class="headerlink" title="numpy.array"></a>numpy.array</h3><p><code>numpy.array(object, dtype = None, copy = True, order = None, subok = False, ndmin = 0)</code></p>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">object</td>
<td align="left">数组或嵌套的数列</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">数组元素的数据类型，可选</td>
</tr>
<tr>
<td align="left">copy</td>
<td align="left">对象是否需要复制，可选</td>
</tr>
<tr>
<td align="left">order</td>
<td align="left">创建数组的样式，C为行方向，F为列方向，A为任意方向（默认）</td>
</tr>
<tr>
<td align="left">subok</td>
<td align="left">默认返回一个与基类类型一致的数组</td>
</tr>
<tr>
<td align="left">ndmin</td>
<td align="left">指定生成数组的最小维度</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line">my_array_1 = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])  </span><br><span class="line"><span class="built_in">print</span>(my_array_1)</span><br><span class="line"><span class="comment"># [1 2 3]</span></span><br><span class="line"></span><br><span class="line">my_array_2 = np.array([[<span class="number">1</span>,  <span class="number">2</span>],  [<span class="number">3</span>,  <span class="number">4</span>]])  </span><br><span class="line"><span class="built_in">print</span>(my_array_2)</span><br><span class="line"><span class="comment"># [[1  2] </span></span><br><span class="line"><span class="comment">#  [3  4]]</span></span><br></pre></td></tr></table></figure>

<h2 id="数组属性"><a href="#数组属性" class="headerlink" title="数组属性"></a>数组属性</h2><p>NumPy 数组的维数称为秩（rank），秩就是轴的数量，即数组的维度，一维数组的秩为 1，二维数组的秩为 2，以此类推。</p>
<p>在   NumPy中，每一个线性的数组称为是一个轴（axis），也就是维度（dimensions）。比如说，二维数组相当于是两个一维数组，其中第一个一维数组中每个元素又是一个一维数组。所以一维数组就是 NumPy 中的轴（axis），第一个轴相当于是底层数组，第二个轴是底层数组里的数组。而轴的数量——秩，就是数组的维数。</p>
<p>很多时候可以声明 axis。axis&#x3D;0，表示沿着第 0 轴进行操作，即对每一列进行操作；axis&#x3D;1，表示沿着第1轴进行操作，即对每一行进行操作。</p>
<table>
<thead>
<tr>
<th><strong>属性</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>ndarray.ndim</strong></td>
<td><strong>秩，即轴的数量或维度的数量</strong></td>
</tr>
<tr>
<td><strong>ndarray.shape</strong></td>
<td><strong>数组的维度，对于矩阵，n 行 m 列</strong></td>
</tr>
<tr>
<td><strong>ndarray.size</strong></td>
<td><strong>数组元素的总个数</strong>，相当于 .shape 中 n*m 的值</td>
</tr>
<tr>
<td><strong>ndarray.dtype</strong></td>
<td>ndarray 对象的<strong>元素类型</strong></td>
</tr>
<tr>
<td>ndarray.itemsize</td>
<td>ndarray 对象中每个元素的大小，以字节为单位</td>
</tr>
<tr>
<td>ndarray.flags</td>
<td>ndarray 对象的内存信息</td>
</tr>
<tr>
<td>ndarray.real</td>
<td>ndarray元素的实部</td>
</tr>
<tr>
<td>ndarray.imag</td>
<td>ndarray 元素的虚部</td>
</tr>
<tr>
<td>ndarray.data</td>
<td>包含实际数组元素的缓冲区，由于一般通过数组的索引获取元素，所以通常不需要使用这个属性。</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">              [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>],</span><br><span class="line">              [<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>],</span><br><span class="line">              [<span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span> ,<span class="number">29</span>, <span class="number">30</span>],</span><br><span class="line">              [<span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))    <span class="comment"># &lt;class &#x27;numpy.ndarray&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(a.dtype)    <span class="comment"># int64</span></span><br><span class="line"><span class="built_in">print</span>(a.size)     <span class="comment"># 25</span></span><br><span class="line"><span class="built_in">print</span>(a.shape)    <span class="comment"># (5, 5)</span></span><br><span class="line"><span class="built_in">print</span>(a.itemsize) <span class="comment"># 8</span></span><br><span class="line"><span class="built_in">print</span>(a.ndim)     <span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<h2 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h2><h3 id="numpy-arange"><a href="#numpy-arange" class="headerlink" title="numpy.arange"></a>numpy.arange</h3><p>numpy 包中的使用 arange 函数创建数值范围并返回 ndarray 对象，函数格式如下：</p>
<p><code>numpy.arange(start, stop, step, dtype)</code></p>
<p>根据 start 与 stop 指定的范围以及 step 设定的步长，生成一个 ndarray。</p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">start</td>
<td align="left">起始值，默认为<code>0</code></td>
</tr>
<tr>
<td align="left">stop</td>
<td align="left">终止值（不包含）</td>
</tr>
<tr>
<td align="left">step</td>
<td align="left">步长，默认为<code>1</code></td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">返回<code>ndarray</code>的数据类型，如果没有提供，则会使用输入数据的类型。</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line">x1 = np.arange(<span class="number">5</span>)   </span><br><span class="line"><span class="built_in">print</span> (x1)</span><br><span class="line"><span class="comment"># [0 1 2 3 4]</span></span><br><span class="line"></span><br><span class="line">x2 = np.arange(<span class="number">10</span>,<span class="number">20</span>,<span class="number">2</span>,dtype=<span class="string">&#x27;float&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (x2)</span><br><span class="line"><span class="comment"># [10. 12. 14. 16. 18.]</span></span><br></pre></td></tr></table></figure>
<h3 id="numpy-empty"><a href="#numpy-empty" class="headerlink" title="numpy.empty"></a>numpy.empty</h3><p>numpy.empty 方法用来创建一个指定形状（shape）、数据类型（dtype）且未初始化的数组：</p>
<p><code>numpy.empty(shape, dtype = float, order = &#39;C&#39;)</code></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">shape</td>
<td align="left">数组形状</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">数据类型，可选</td>
</tr>
<tr>
<td align="left">order</td>
<td align="left">有”C”和”F”两个选项,分别代表，行优先和列优先，在计算机内存中的存储元素的顺序。</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">n = np.empty([<span class="number">4</span>,<span class="number">3</span>],dtype= <span class="built_in">int</span> )</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组元素为随机值，因为它们未初始化。</span></span><br><span class="line"><span class="comment"># [[7602259 7471215 7536741]</span></span><br><span class="line"><span class="comment"># [6619219 7733362 6488169]</span></span><br><span class="line"><span class="comment"># [4391013 6357100 7536755]</span></span><br><span class="line"><span class="comment"># [7209033 7274598 4456448]]</span></span><br></pre></td></tr></table></figure>

<h3 id="numpy-zeros"><a href="#numpy-zeros" class="headerlink" title="numpy.zeros"></a>numpy.zeros</h3><p>创建指定大小的数组，数组元素以 0 来填充：</p>
<p><code>numpy.zeros(shape, dtype = float, order = &#39;C&#39;)</code></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">shape</td>
<td align="left">数组形状</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">数据类型，可选</td>
</tr>
<tr>
<td align="left">order</td>
<td align="left">‘C’ 用于 C 的行数组，或者 ‘F’ 用于 FORTRAN 的列数组</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认为浮点数 </span></span><br><span class="line">x = np.zeros(<span class="number">5</span>)  </span><br><span class="line"><span class="built_in">print</span>(x)  </span><br><span class="line"><span class="comment"># [0. 0. 0. 0. 0.]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置类型为整数 </span></span><br><span class="line">y = np.zeros((<span class="number">5</span>,), dtype = <span class="built_in">int</span>)  </span><br><span class="line"><span class="built_in">print</span>(y)  </span><br><span class="line"><span class="comment"># [0 0 0 0 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义类型,i4即int4 </span></span><br><span class="line">z = np.zeros((<span class="number">2</span>,<span class="number">2</span>), dtype = [(<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;i4&#x27;</span>), (<span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;i4&#x27;</span>)])  </span><br><span class="line"><span class="built_in">print</span>(z)</span><br><span class="line"><span class="comment"># [[(0, 0) (0, 0)]</span></span><br><span class="line"><span class="comment"># [(0, 0) (0, 0)]]</span></span><br></pre></td></tr></table></figure>

<h3 id="numpy-ones"><a href="#numpy-ones" class="headerlink" title="numpy.ones"></a>numpy.ones</h3><p>创建指定形状的数组，数组元素以 1 来填充：</p>
<p><code>numpy.ones(shape, dtype = None, order = &#39;C&#39;)</code></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">shape</td>
<td align="left">数组形状</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">数据类型，可选</td>
</tr>
<tr>
<td align="left">order</td>
<td align="left">‘C’ 用于 C 的行数组，或者 ‘F’ 用于 FORTRAN 的列数组</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"><span class="comment"># 默认为浮点数 </span></span><br><span class="line">x = np.ones(<span class="number">5</span>)  </span><br><span class="line"><span class="built_in">print</span>(x)  </span><br><span class="line"><span class="comment"># [1. 1. 1. 1. 1.]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义类型 </span></span><br><span class="line">y = np.ones([<span class="number">2</span>,<span class="number">2</span>], dtype = <span class="built_in">int</span>) </span><br><span class="line"><span class="built_in">print</span>(y)</span><br><span class="line"><span class="comment"># [[1 1]</span></span><br><span class="line"><span class="comment">#  [1 1]]</span></span><br></pre></td></tr></table></figure>

<h3 id="numpy-zeros-like"><a href="#numpy-zeros-like" class="headerlink" title="numpy.zeros_like"></a>numpy.zeros_like</h3><p>numpy.zeros_like 用于创建一个与给定数组具有相同形状的数组，数组元素以 0 来填充。</p>
<p>numpy.zeros 和 numpy.zeros_like 都是用于创建一个指定形状的数组，其中所有元素都是 0。</p>
<p>它们之间的区别在于：numpy.zeros 可以直接指定要创建的数组的形状，而 numpy.zeros_like 则是创建一个与给定数组具有相同形状的数组。</p>
<p><code>numpy.zeros_like(a, dtype=None, order=&#39;K&#39;, subok=True, shape=None)</code></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">a</td>
<td align="left">给定要创建相同形状的数组</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">创建的数组的数据类型</td>
</tr>
<tr>
<td align="left">order</td>
<td align="left">数组在内存中的存储顺序，可选值为 ‘C’（按行优先）或 ‘F’（按列优先），默认为 ‘K’（保留输入数组的存储顺序）</td>
</tr>
<tr>
<td align="left">subok</td>
<td align="left">是否允许返回子类，如果为 True，则返回一个子类对象，否则返回一个与 a 数组具有相同数据类型和存储顺序的数组</td>
</tr>
<tr>
<td align="left">shape</td>
<td align="left">创建的数组的形状，如果不指定，则默认为 a 数组的形状。</td>
</tr>
</tbody></table>
<p>创建一个与 arr 形状相同的，所有元素都为 0 的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"><span class="comment"># 创建一个 3x3 的二维数组 </span></span><br><span class="line">arr = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])  </span><br><span class="line"><span class="comment"># 创建一个与 arr 形状相同的，所有元素都为 0 的数组 </span></span><br><span class="line">zeros_arr = np.zeros_like(arr) </span><br><span class="line"><span class="built_in">print</span>(zeros_arr)</span><br><span class="line"><span class="comment"># [[0 0 0]</span></span><br><span class="line"><span class="comment">#  [0 0 0]</span></span><br><span class="line"><span class="comment">#  [0 0 0]]</span></span><br></pre></td></tr></table></figure>

<h3 id="numpy-ones-like"><a href="#numpy-ones-like" class="headerlink" title="numpy.ones_like"></a>numpy.ones_like</h3><p>numpy.ones_like 用于创建一个与给定数组具有相同形状的数组，数组元素以 1 来填充。</p>
<p>numpy.ones 和 numpy.ones_like 都是用于创建一个指定形状的数组，其中所有元素都是 1。</p>
<p>它们之间的区别在于：numpy.ones 可以直接指定要创建的数组的形状，而 numpy.ones_like 则是创建一个与给定数组具有相同形状的数组。</p>
<p><code>numpy.ones_like(a, dtype=None, order=&#39;K&#39;, subok=True, shape=None)</code></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">a</td>
<td align="left">给定要创建相同形状的数组</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left">创建的数组的数据类型</td>
</tr>
<tr>
<td align="left">order</td>
<td align="left">数组在内存中的存储顺序，可选值为 ‘C’（按行优先）或 ‘F’（按列优先），默认为 ‘K’（保留输入数组的存储顺序）</td>
</tr>
<tr>
<td align="left">subok</td>
<td align="left">是否允许返回子类，如果为 True，则返回一个子类对象，否则返回一个与 a 数组具有相同数据类型和存储顺序的数组</td>
</tr>
<tr>
<td align="left">shape</td>
<td align="left">创建的数组的形状，如果不指定，则默认为 a 数组的形状。</td>
</tr>
</tbody></table>
<p>创建一个与 arr 形状相同的，所有元素都为 1 的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line"><span class="comment"># 创建一个 3x3 的二维数组 </span></span><br><span class="line">arr = np.array([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]])  </span><br><span class="line"><span class="comment"># 创建一个与 arr 形状相同的，所有元素都为 1 的数组 </span></span><br><span class="line">ones_arr = np.ones_like(arr) </span><br><span class="line"><span class="built_in">print</span>(ones_arr)</span><br><span class="line"><span class="comment">#[[1 1 1]</span></span><br><span class="line"><span class="comment"># [1 1 1]</span></span><br><span class="line"><span class="comment"># [1 1 1]]</span></span><br></pre></td></tr></table></figure>

<h3 id="numpy-linspace"><a href="#numpy-linspace" class="headerlink" title="numpy.linspace"></a>numpy.linspace</h3><p>numpy.linspace 函数用于创建一个一维数组，数组是一个<strong>等差数列</strong>构成的，格式如下：</p>
<p><code>np.linspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None)</code></p>
<p>参数说明：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>start</strong></td>
<td align="left">序列的起始值</td>
</tr>
<tr>
<td align="left"><strong>stop</strong></td>
<td align="left">序列的终止值，如果<code>endpoint</code>为<code>true</code>，该值包含于数列中</td>
</tr>
<tr>
<td align="left"><strong>num</strong></td>
<td align="left">要生成的等步长的样本数量，默认为<code>50</code></td>
</tr>
<tr>
<td align="left">endpoint</td>
<td align="left">该值为 <code>true</code> 时，数列中包含<code>stop</code>值，反之不包含，默认是True。</td>
</tr>
<tr>
<td align="left">retstep</td>
<td align="left">如果为 True 时，生成的数组中会显示间距，反之不显示。</td>
</tr>
<tr>
<td align="left">dtype</td>
<td align="left"><code>ndarray</code> 的数据类型</td>
</tr>
</tbody></table>
<p>以下实例用到三个参数，设置起始点为 1 ，终止点为 10，数列个数为 10。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line">a = np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">10</span>) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment">## [ 1.  2.  3.  4.  5.  6.  7.  8.  9. 10.]</span></span><br></pre></td></tr></table></figure>

<h2 id="切片和索引"><a href="#切片和索引" class="headerlink" title="切片和索引"></a>切片和索引</h2><p>ndarray对象的内容可以通过索引或切片来访问和修改，与 Python 中 list 的切片操作一样。</p>
<p>ndarray 数组可以基于 0 - n 的下标进行索引，切片对象可以通过内置的 slice 函数，并设置 start, stop 及 step 参数进行，从原数组中切割出一个新数组。</p>
<p>我们可以通过<strong>冒号</strong><code>:</code>分隔切片参数 <strong>[start:stop:step]</strong> 来进行切片操作：</p>
<p>下面的图表说明了给定的示例切片是如何进行工作的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.numpy.org.cn/static/images/article/numpy_2D_slicing_diagram-1.jpg" alt="numpy数组切片工作原理"></p>
<p>切片还可以包括<strong>省略号</strong> <code>…</code>，来使选择元组的长度与数组的维度相同。 如果在行位置使用省略号，它将返回包含行中元素的 ndarray。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])  </span><br><span class="line"><span class="built_in">print</span> (a[...,<span class="number">1</span>])   <span class="comment"># 第2列元素</span></span><br><span class="line"><span class="comment"># [2 4 5]</span></span><br><span class="line"><span class="built_in">print</span> (a[<span class="number">1</span>,...])   <span class="comment"># 第2行元素</span></span><br><span class="line"><span class="comment"># [3 4 5]</span></span><br><span class="line"><span class="built_in">print</span> (a[...,<span class="number">1</span>:])  <span class="comment"># 第2列及剩下的所有元素</span></span><br><span class="line"><span class="comment">#[[2 3]</span></span><br><span class="line"><span class="comment"># [4 5]</span></span><br><span class="line"><span class="comment"># [5 6]]</span></span><br></pre></td></tr></table></figure>

<h3 id="数组索引"><a href="#数组索引" class="headerlink" title="数组索引"></a>数组索引</h3><p>以下实例获取数组中 (0,0)，(1,1) 和 (2,0) 位置处的元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np   </span><br><span class="line">my_array = np.array([[<span class="number">1</span>,  <span class="number">2</span>],  [<span class="number">3</span>,  <span class="number">4</span>],  [<span class="number">5</span>,  <span class="number">6</span>]])  </span><br><span class="line">y = my_array[[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>], [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>]]   </span><br><span class="line"><span class="built_in">print</span> (y)</span><br><span class="line"><span class="comment"># [1  4  5]</span></span><br></pre></td></tr></table></figure>

<p>可以借助切片<code>:</code>或 <code>…</code> 与索引数组组合。如下面例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"> </span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], </span><br><span class="line">              [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],</span><br><span class="line">              [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])</span><br><span class="line">b = a[<span class="number">1</span>:<span class="number">3</span>, <span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">c = a[<span class="number">1</span>:<span class="number">3</span>,[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">d = a[...,<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment"># [[5 6]</span></span><br><span class="line"><span class="comment"># [8 9]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line"><span class="comment"># [[5 6]</span></span><br><span class="line"><span class="comment"># [8 9]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d)</span><br><span class="line"><span class="comment">#[[2 3]</span></span><br><span class="line"><span class="comment"># [5 6]</span></span><br><span class="line"><span class="comment"># [8 9]]</span></span><br></pre></td></tr></table></figure>

<h3 id="布尔索引"><a href="#布尔索引" class="headerlink" title="布尔索引"></a>布尔索引</h3><p>我们可以通过一个布尔数组来索引目标数组。</p>
<p>布尔索引通过布尔运算（如：比较运算符）来获取符合指定条件的元素的数组。</p>
<p>以下实例获取大于 5 的元素：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"> </span><br><span class="line">x = np.array([[  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>],[  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>],[  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],[  <span class="number">9</span>,  <span class="number">10</span>,  <span class="number">11</span>]])  </span><br><span class="line"><span class="built_in">print</span> (x[x &gt;  <span class="number">5</span>])</span><br><span class="line"><span class="comment"># [ 6  7  8  9 10 11]</span></span><br></pre></td></tr></table></figure>

<p>假设每个名字都对应data数组中的一行，而我们想要选出对应于用户”andy”的所有行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">users = np.array([<span class="string">&#x27;andy&#x27;</span>,<span class="string">&#x27;jim&#x27;</span>,<span class="string">&#x27;andy&#x27;</span>])</span><br><span class="line">data = np.random.randint(<span class="number">1</span>,<span class="number">11</span>,size=(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(users,data,sep=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="comment"># [&#x27;andy&#x27; &#x27;jim&#x27; &#x27;andy&#x27;]</span></span><br><span class="line"><span class="comment"># [[1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 7 5 9]</span></span><br><span class="line"><span class="comment">#  [5 5 3 8]]</span></span><br><span class="line"><span class="built_in">print</span>(data[users == <span class="string">&#x27;andy&#x27;</span>])</span><br><span class="line"><span class="comment"># [[1 2 3 4]</span></span><br><span class="line"><span class="comment">#  [5 5 3 8]]</span></span><br></pre></td></tr></table></figure>

<p>要选择除”andy”以外的其他值，既可以使用不等于符号（!&#x3D;），也可以通过~对条件进行否定：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data[~(names == <span class="string">&#x27;andy&#x27;</span>)])</span><br><span class="line"><span class="comment">#  [5 7 5 9]</span></span><br></pre></td></tr></table></figure>

<h3 id="花式索引"><a href="#花式索引" class="headerlink" title="花式索引"></a>花式索引</h3><p>花式索引指的是利用整数数组进行索引。</p>
<p><strong>花式索引根据索引数组的值作为目标数组的某个轴的下标来取值。</strong></p>
<p>对于使用一维整型数组作为索引，如果目标是一维数组，那么索引的结果就是对应位置的元素，如果目标是二维数组，那么就是对应下标的行。</p>
<p>花式索引跟切片不一样，它总是将数据复制到新数组中。</p>
<h4 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h4><p>一维数组只有一个轴 <strong>axis &#x3D; 0</strong>，所以一维数组就在 <strong>axis &#x3D; 0</strong> 这个轴上取值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.arange(<span class="number">9</span>)</span><br><span class="line">x2 = x[[<span class="number">0</span>, <span class="number">6</span>]] <span class="comment"># 使用花式索引</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x2)</span><br><span class="line"><span class="comment"># [0 6]</span></span><br><span class="line"><span class="built_in">print</span>(x2[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line"><span class="built_in">print</span>(x2[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 6</span></span><br></pre></td></tr></table></figure>

<h4 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"> </span><br><span class="line">x = np.arange(<span class="number">32</span>).reshape((<span class="number">8</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二维数组读取指定下标对应的行</span></span><br><span class="line"><span class="built_in">print</span>(x[[<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">7</span>]])</span><br><span class="line"><span class="comment"># [[16 17 18 19]</span></span><br><span class="line"><span class="comment">#  [ 8  9 10 11]</span></span><br><span class="line"><span class="comment">#  [ 4  5  6  7]</span></span><br><span class="line"><span class="comment">#  [28 29 30 31]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取所有行的，第1列和第3列</span></span><br><span class="line"><span class="built_in">print</span>(x[:,[<span class="number">1</span>,<span class="number">3</span>]])</span><br><span class="line"><span class="comment"># [[ 1  3]</span></span><br><span class="line"><span class="comment">#  [ 5  7]</span></span><br><span class="line"><span class="comment">#  [ 9 11]</span></span><br><span class="line"><span class="comment">#  [13 15]</span></span><br><span class="line"><span class="comment">#  [17 19]</span></span><br><span class="line"><span class="comment">#  [21 23]</span></span><br><span class="line"><span class="comment">#  [25 27]</span></span><br><span class="line"><span class="comment">#  [29 31]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取第一行第0列，第五行第三列，第二行第一列</span></span><br><span class="line"><span class="built_in">print</span>(x[[<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>]])</span><br><span class="line"><span class="comment"># [ 4 23  9]</span></span><br></pre></td></tr></table></figure>

<h2 id="数组操作"><a href="#数组操作" class="headerlink" title="数组操作"></a>数组操作</h2><h3 id="修改数组形状"><a href="#修改数组形状" class="headerlink" title="修改数组形状"></a>修改数组形状</h3><table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>reshape</td>
<td>不改变数据的条件下修改形状</td>
</tr>
<tr>
<td>flat</td>
<td>数组元素迭代器</td>
</tr>
<tr>
<td>flatten</td>
<td>返回一份数组拷贝，对拷贝所做的修改不会影响原始数组</td>
</tr>
<tr>
<td>ravel</td>
<td>返回展开数组</td>
</tr>
</tbody></table>
<h4 id="numpy-reshape"><a href="#numpy-reshape" class="headerlink" title="numpy.reshape"></a>numpy.reshape</h4><p>numpy.reshape 函数可以在不改变数据的条件下修改形状，格式如下：</p>
<p><code>numpy.reshape(arr, newshape, order=&#39;C&#39;)</code></p>
<ul>
<li>arr：要修改形状的数组</li>
<li>newshape：整数或者整数数组，新的形状应当兼容原有形状</li>
<li>order：’C’ – 按行，’F’ – 按列，’A’ – 原顺序，’k’ – 元素在内存中的出现顺序。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </span><br><span class="line">a = np.arange(<span class="number">8</span>) </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> (a) </span><br><span class="line"><span class="comment"># [0 1 2 3 4 5 6 7]</span></span><br><span class="line"></span><br><span class="line">b = a.reshape(<span class="number">4</span>,<span class="number">2</span>) </span><br><span class="line"><span class="built_in">print</span> (b)</span><br><span class="line"><span class="comment"># [[0 1]</span></span><br><span class="line"><span class="comment">#  [2 3]</span></span><br><span class="line"><span class="comment">#  [4 5]</span></span><br><span class="line"><span class="comment">#  [6 7]]</span></span><br></pre></td></tr></table></figure>

<h3 id="数组转置和轴对换"><a href="#数组转置和轴对换" class="headerlink" title="数组转置和轴对换"></a>数组转置和轴对换</h3><p>转置是重塑的一种特殊形式，它返回的是源数据的视图（不会进行任何复制操作）。数组不仅有<strong>transpose</strong>方法，还有一个特殊的T属性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[0 1 2]</span></span><br><span class="line"><span class="comment">#  [3 4 5]]</span></span><br><span class="line"><span class="built_in">print</span>(arr.T)</span><br><span class="line"><span class="comment"># [[0 3]</span></span><br><span class="line"><span class="comment">#  [1 4]</span></span><br><span class="line"><span class="comment">#  [2 5]]</span></span><br><span class="line"><span class="built_in">print</span>(arr.transpose())</span><br><span class="line"><span class="comment"># [[0 3]</span></span><br><span class="line"><span class="comment">#  [1 4]</span></span><br><span class="line"><span class="comment">#  [2 5]]</span></span><br></pre></td></tr></table></figure>

<p>在进行矩阵计算时，经常需要用到该操作，比如利用<strong>np.dot</strong>计算矩阵内积：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr = np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[0 1 2]</span></span><br><span class="line"><span class="comment">#  [3 4 5]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr.T)</span><br><span class="line"><span class="comment"># [[0 3]</span></span><br><span class="line"><span class="comment">#  [1 4]</span></span><br><span class="line"><span class="comment">#  [2 5]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(np.dot(arr,arr.T))</span><br><span class="line"><span class="comment"># [[ 5 14]</span></span><br><span class="line"><span class="comment">#  [14 50]]</span></span><br></pre></td></tr></table></figure>

<p>对于高维数组，transpose需要得到一个由轴编号组成的元组才能对这些轴进行转置（比较费脑子）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr = np.arange(<span class="number">16</span>).reshape((<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[[ 0  1  2  3]</span></span><br><span class="line"><span class="comment">#   [ 4  5  6  7]]</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#  [[ 8  9 10 11]</span></span><br><span class="line"><span class="comment">#   [12 13 14 15]]]</span></span><br><span class="line"><span class="built_in">print</span>(arr.transpose((<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>)))</span><br><span class="line"><span class="comment"># arr.transpose(1,0,2),这里就是让索引1变换到了索引0的位置，索引0变到了索引1的位置，索引2保持不变</span></span><br><span class="line"><span class="comment"># [[[ 0  1  2  3]</span></span><br><span class="line"><span class="comment">#   [ 8  9 10 11]]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  [[ 4  5  6  7]</span></span><br><span class="line"><span class="comment">#  [12 13 14 15]]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>简单的转置可以使用.T，它其实就是进行轴对换而已。ndarray还有一个<strong>swapaxes</strong>方法，它需要接受一对轴编号：</p>
<p>arr.swapaxes(1,2)（实际上等价于arr.swapaxes(2,1)）,将轴1和轴2进行互换。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr = np.arange(<span class="number">16</span>).reshape((<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[[ 0  1  2  3]</span></span><br><span class="line"><span class="comment">#   [ 4  5  6  7]]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  [[ 8  9 10 11]</span></span><br><span class="line"><span class="comment">#   [12 13 14 15]]]</span></span><br><span class="line"><span class="built_in">print</span>(arr.swapaxes(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line"><span class="comment"># [[[ 0  4]</span></span><br><span class="line"><span class="comment">#   [ 1  5]</span></span><br><span class="line"><span class="comment">#   [ 2  6]</span></span><br><span class="line"><span class="comment">#   [ 3  7]]</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#  [[ 8 12]</span></span><br><span class="line"><span class="comment">#   [ 9 13]</span></span><br><span class="line"><span class="comment">#   [10 14]</span></span><br><span class="line"><span class="comment">#   [11 15]]]</span></span><br></pre></td></tr></table></figure>

<p>swapaxes也是返回源数据的视图（不会进行任何复制操作）。</p>
<h2 id="利用数组进行数据处理"><a href="#利用数组进行数据处理" class="headerlink" title="利用数组进行数据处理"></a>利用数组进行数据处理</h2><h3 id="将条件逻辑表述为数组运算"><a href="#将条件逻辑表述为数组运算" class="headerlink" title="将条件逻辑表述为数组运算"></a>将条件逻辑表述为数组运算</h3><p>numpy.where函数是三元表达式x if condition else y的矢量化版本。假设我们有一个布尔数组和两个值数组，我们想要根据cond中的值选取xarr和yarr的值：当cond中的值为True时，选取xarr的值，否则从yarr中选取。列表推导式的写法应该如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">xarr = np.array([<span class="number">1.1</span>, <span class="number">1.2</span>, <span class="number">1.3</span>, <span class="number">1.4</span>, <span class="number">1.5</span>])</span><br><span class="line">yarr = np.array([<span class="number">2.1</span>, <span class="number">2.2</span>, <span class="number">2.3</span>, <span class="number">2.4</span>, <span class="number">2.5</span>])</span><br><span class="line">cond = np.array([<span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">True</span>, <span class="literal">False</span>])</span><br><span class="line">result = [(x <span class="keyword">if</span> c <span class="keyword">else</span> y) <span class="keyword">for</span> x,y,c <span class="keyword">in</span> <span class="built_in">zip</span>(xarr,yarr,cond)]</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment"># [1.1, 2.2, 1.3, 1.4, 2.5]</span></span><br></pre></td></tr></table></figure>

<p>这有几个问题。第一，它对大数组的处理速度不是很快（因为所有工作都是由纯Python完成的）。第二，无法用于多维数组。若使用np.where，则可以将该功能写得非常简洁：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result = np.where(cond, xarr, yarr)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment"># [1.1 2.2 1.3 1.4 2.5]</span></span><br></pre></td></tr></table></figure>

<p>np.where的第二个和第三个参数不必是数组，它们都可以是标量值。在数据分析工作中，where通常用于根据另一个数组而产生一个新的数组。假设有一个由随机数据组成的矩阵，你希望将所有正值替换为’正数’，将所有负值替换为’负数’。若利用np.where，则会非常简单：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr = np.random.randn(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[-0.58616216 -1.17916735]</span></span><br><span class="line"><span class="comment">#  [ 0.41563713  0.75208178]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(np.where(arr &gt; <span class="number">0</span>, <span class="string">&#x27;正数&#x27;</span>, <span class="string">&#x27;负数&#x27;</span>))</span><br><span class="line"><span class="comment"># [[&#x27;负数&#x27; &#x27;负数&#x27;]</span></span><br><span class="line"><span class="comment">#  [&#x27;正数&#x27; &#x27;正数&#x27;]]</span></span><br></pre></td></tr></table></figure>

<p>使用np.where，可以将标量和数组结合起来。例如，可用常数2替换arr中所有正的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.where(arr&gt;<span class="number">0</span>,<span class="number">2</span>,arr))</span><br><span class="line"><span class="comment"># [[-0.58616216  -1.17916735]</span></span><br><span class="line"><span class="comment">#  [ 2.          2.         ]]</span></span><br></pre></td></tr></table></figure>

<h3 id="数学和统计方法"><a href="#数学和统计方法" class="headerlink" title="数学和统计方法"></a>数学和统计方法</h3><p>可以通过数组上的一组数学函数对整个数组或某个轴向的数据进行统计计算。sum、mean以及标准差std等聚合计算（aggregation，通常叫做约简（reduction））既可以当做数组的实例方法调用，也可以当做顶级NumPy函数使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">arr= np.random.randint(<span class="number">0</span>,<span class="number">100</span>,size=(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[37 12 72  9]</span></span><br><span class="line"><span class="comment">#  [75  5 79 64]</span></span><br><span class="line"><span class="comment">#  [16  1 76 71]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr.mean())</span><br><span class="line"><span class="comment"># 43.083333333333336</span></span><br><span class="line"><span class="built_in">print</span>(np.mean(arr))</span><br><span class="line"><span class="comment"># 43.083333333333336</span></span><br><span class="line"><span class="built_in">print</span>(arr.<span class="built_in">sum</span>())</span><br><span class="line"><span class="comment"># 517</span></span><br></pre></td></tr></table></figure>

<p>mean和sum这类的函数可以接受一个axis选项参数，用于计算该轴向上的统计值，最终结果是一个少一维的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr.mean(axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment"># [32.5  55.75 41.  ]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr.<span class="built_in">sum</span>(axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment"># [130 223 164]</span></span><br></pre></td></tr></table></figure>

<p>表4-5列出了全部的基本数组统计方法。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-a6c6df3ca8e0b98e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-866fcde885b1d357.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<h3 id="用于布尔型数组的方法"><a href="#用于布尔型数组的方法" class="headerlink" title="用于布尔型数组的方法"></a>用于布尔型数组的方法</h3><p>在上面这些方法中，布尔值会被强制转换为1（True）和0（False）。因此，sum经常被用来对布尔型数组中的True值计数<strong>（注意：是计数不是求和！！！）</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">arr = np.random.randint(-<span class="number">10</span>,<span class="number">11</span>,size=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [-10   2   9   0  -5]</span></span><br><span class="line"><span class="built_in">print</span>(arr&gt;<span class="number">0</span>)</span><br><span class="line"><span class="comment"># [False  True  True False False]</span></span><br><span class="line"><span class="built_in">print</span>((arr&gt;<span class="number">0</span>).<span class="built_in">sum</span>())</span><br><span class="line"><span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<p>另外还有两个方法any和all，它们对布尔型数组非常有用。any用于测试数组中是否存在一个或多个True，而all则检查数组中所有值是否都是True：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">bools = np.array([<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">True</span>, <span class="literal">False</span>])</span><br><span class="line"><span class="built_in">print</span>(bools.<span class="built_in">any</span>())</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(bools.<span class="built_in">all</span>())</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<p>这两个方法也能用于非布尔型数组，所有非0元素将会被当做True。</p>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>跟Python内置的列表类型一样，NumPy数组也可以通过sort方法就地排序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">arr = np.random.randint(-<span class="number">10</span>,<span class="number">11</span>,size=<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [-5  1  2 -2 -1]</span></span><br><span class="line"></span><br><span class="line">arr.sort()</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [-5 -2 -1  1  2]</span></span><br></pre></td></tr></table></figure>

<p>多维数组可以在任何一个轴向上进行排序，只需将轴编号传给sort即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line">arr = np.random.randint(-<span class="number">10</span>,<span class="number">11</span>,size=(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[ -5   1   2  -2]</span></span><br><span class="line"><span class="comment">#  [ -1   1  -5   5]</span></span><br><span class="line"><span class="comment">#  [-10   6  -9   2]]</span></span><br><span class="line"></span><br><span class="line">arr.sort(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[ -5  -2   1   2]</span></span><br><span class="line"><span class="comment">#  [ -5  -1   1   5]</span></span><br><span class="line"><span class="comment">#  [-10  -9   2   6]]</span></span><br></pre></td></tr></table></figure>

<h3 id="唯一化以及其它的集合逻辑"><a href="#唯一化以及其它的集合逻辑" class="headerlink" title="唯一化以及其它的集合逻辑"></a>唯一化以及其它的集合逻辑</h3><p>NumPy提供了一些针对一维ndarray的基本集合运算。最常用的可能要数np.unique了，它用于找出数组中的唯一值并返回已排序的结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">names = np.array([<span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Will&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;Joe&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(np.unique(names))</span><br><span class="line"><span class="comment"># [&#x27;Bob&#x27; &#x27;Joe&#x27; &#x27;Will&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>另一个函数np.in1d用于测试一个数组中的值在另一个数组中的成员资格，返回一个布尔型数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">values = np.array([<span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="built_in">print</span>(np.in1d(values, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>]))</span><br><span class="line"><span class="comment"># [ True False False  True  True False  True]</span></span><br></pre></td></tr></table></figure>

<p>NumPy中的集合函数请参见<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-80e85ae6b9c89ada.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">表4-6。</p>
<h2 id="深拷贝-浅拷贝"><a href="#深拷贝-浅拷贝" class="headerlink" title="深拷贝&amp;浅拷贝"></a>深拷贝&amp;浅拷贝</h2><p><strong>概述</strong></p>
<ul>
<li><p>b &#x3D; a</p>
<p>对象b引用对象a，对象b本身没有单独分配内存空间，它指向计算机中存储对象a的内存。a和b相互影响，b发生变化了，b也会发生变化。</p>
</li>
<li><p>b &#x3D; a.view()  or  b&#x3D;a[:]</p>
<p>a 和 b 并不同属一块内存，是两个不同的对象。对 b 的修改会改变 a。</p>
</li>
<li><p>b &#x3D; a.copy()</p>
<p><code>ndarray.copy()</code> 函数创建一个副本。 对副本数据进行修改，不会影响到原始数据，它们物理内存不在同一位置。</p>
</li>
</ul>
<h3 id="完全不复制"><a href="#完全不复制" class="headerlink" title="完全不复制"></a>完全不复制</h3><p>简单分配不会复制数组对象或其数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">12</span>)</span><br><span class="line">b = a            <span class="comment"># no new object is created</span></span><br><span class="line"><span class="built_in">print</span>(b <span class="keyword">is</span> a)           <span class="comment"># a and b are two names for the same ndarray object</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">b.shape = <span class="number">3</span>,<span class="number">4</span>    <span class="comment"># changes the shape of a</span></span><br><span class="line"><span class="built_in">print</span>(a.shape)</span><br><span class="line"><span class="comment"># (3, 4)</span></span><br></pre></td></tr></table></figure>

<h3 id="视图或浅拷贝"><a href="#视图或浅拷贝" class="headerlink" title="视图或浅拷贝"></a>视图或浅拷贝</h3><p>不同的数组对象可以共享相同的数据。用<code>view</code>方法创建一个查看相同数据的新数组对象。</p>
<p><code>view</code>方法可以新建一个新的 ndarray，但是只会 copy 父对象，不会 copy 底层的数据，共用原始引用指向的对象数据。a和b相互影响，b发生变化了，b也会发生变化。</p>
<p>NumPy中，一个ndarray的视图和原ndarray是不同的对象，但是共享ndarray值的内存。这两个对象是相互关联的，这样的好处是不会涉及到数据在内存中的复制，这样可以节省空间，提高性能。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">12</span>)</span><br><span class="line">c = a.view()</span><br><span class="line"><span class="built_in">print</span>(c <span class="keyword">is</span> a, c.base <span class="keyword">is</span> a)</span><br><span class="line"><span class="comment"># False True</span></span><br><span class="line"></span><br><span class="line">c.shape = <span class="number">2</span>,<span class="number">6</span>                      <span class="comment"># a&#x27;s shape doesn&#x27;t change</span></span><br><span class="line"><span class="built_in">print</span>(a.shape)</span><br><span class="line"><span class="comment"># (12,)</span></span><br><span class="line"></span><br><span class="line">c[<span class="number">0</span>,<span class="number">4</span>] = <span class="number">1234</span>                      <span class="comment"># a&#x27;s data changes</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># [   0    1    2    3 1234    5    6    7    8    9   10   11]</span></span><br></pre></td></tr></table></figure>

<p>切片数组会返回一个视图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = a[ : , <span class="number">1</span>:<span class="number">3</span>]     <span class="comment"># spaces added for clarity; could also be written &quot;s = a[:,1:3]&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s[:] = <span class="number">10</span>           <span class="comment"># s[:] is a view of s. Note the difference between s=10 and s[:]=10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[   <span class="number">0</span>,   <span class="number">10</span>,   <span class="number">10</span>,    <span class="number">3</span>],</span><br><span class="line">       [<span class="number">1234</span>,   <span class="number">10</span>,   <span class="number">10</span>,    <span class="number">7</span>],</span><br><span class="line">       [   <span class="number">8</span>,   <span class="number">10</span>,   <span class="number">10</span>,   <span class="number">11</span>]])</span><br></pre></td></tr></table></figure>

<h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">d = a.copy()  <span class="comment"># a new array object with new data is created</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(d <span class="keyword">is</span> a)</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(d.base <span class="keyword">is</span> a) </span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">d[<span class="number">0</span>,<span class="number">0</span>] = <span class="number">999</span></span><br><span class="line"><span class="built_in">print</span>(a) </span><br><span class="line"><span class="comment"># [[ 0  1  2  3]</span></span><br><span class="line"><span class="comment">#  [ 4  5  6  7]</span></span><br><span class="line"><span class="comment">#  [ 8  9 10 11]]</span></span><br></pre></td></tr></table></figure>

<p>有时，如果不再需要原始数组，则应在切片后调用 <code>copy</code>。例如，假设a是一个巨大的中间结果，最终结果b只包含a的一小部分，那么在用切片构造b时应该做一个深拷贝：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="built_in">int</span>(<span class="number">1e8</span>))</span><br><span class="line">b = a[:<span class="number">100</span>].copy()</span><br><span class="line"><span class="keyword">del</span> a  <span class="comment"># the memory of ``a`` can be released.</span></span><br></pre></td></tr></table></figure>

<h1 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h1><p>Pandas 是 Python 的核心数据分析支持库，提供了快速、灵活、明确的数据结构，旨在简单、直观地处理关系型、标记型数据。</p>
<p>Pandas是基于NumPy数组构建的，特别是基于数组的函数和不使用for循环的数据处理。虽然Pandas采用了大量的NumPy编码风格，但二者最大的不同是Pandas是专门为处理表格和混杂数据设计的。而NumPy更适合处理统一的数值数组数据。</p>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><table>
<thead>
<tr>
<th>维数</th>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Series</td>
<td>带标签的一维同构数组</td>
</tr>
<tr>
<td>2</td>
<td>DataFrame</td>
<td>带标签的，大小可变的，二维异构表格</td>
</tr>
</tbody></table>
<h3 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h3><p>Pandas Series 类似表格中的一个列（column），类似于一维数组，可以保存任何数据类型。它由一组数据（各种NumPy数据类型）以及一组与之相关的数据标签（即索引）组成。仅由一组数据即可产生最简单的Series：</p>
<p><code>pandas.Series( data, index, dtype, name, copy)</code></p>
<ul>
<li><strong>data</strong>：一组数据(ndarray 类型)。</li>
<li><strong>index</strong>：数据索引标签，如果不指定，默认从 0 开始。</li>
<li><strong>dtype</strong>：数据类型，默认会自己判断。</li>
<li><strong>name</strong>：设置名称。</li>
<li><strong>copy</strong>：拷贝数据，默认为 False。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">my_data = pd.Series([<span class="number">2021</span>, <span class="number">2023</span>, <span class="number">2025</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_data)</span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="comment"># 0    2021</span></span><br><span class="line"><span class="comment"># 1    2023</span></span><br><span class="line"><span class="comment"># 2    2025</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>Series的字符串表现形式为：索引在左边，值在右边。由于我们没有为数据指定索引，于是<strong>会自动创建一个0到N-1（N为数据的长度）的整数型索引</strong>。</p>
<p>你可以通过Series 的values和index属性获取其数组表示形式和索引对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">my_data = pd.Series([<span class="number">2021</span>, <span class="number">2023</span>, <span class="number">2025</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_data.values)</span><br><span class="line"><span class="comment"># [2021 2023 2025]</span></span><br><span class="line"><span class="built_in">print</span>(my_data.index)</span><br><span class="line"><span class="comment"># RangeIndex(start=0, stop=3, step=1)</span></span><br></pre></td></tr></table></figure>

<p>我们可以指定索引值，如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj1 = pd.Series([<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>, <span class="string">&quot;Wiki&quot;</span>], index=[<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>,<span class="string">&quot;z&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj1)</span><br><span class="line"><span class="comment"># x    Google</span></span><br><span class="line"><span class="comment"># y    Runoob</span></span><br><span class="line"><span class="comment"># z      Wiki</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line"><span class="built_in">print</span>(obj1.index)</span><br><span class="line"><span class="comment"># Index([&#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;], dtype=&#x27;object&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>与普通NumPy数组相比，你可以通过索引的方式选取Series中的单个或一组值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj1 = pd.Series([<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>, <span class="string">&quot;Wiki&quot;</span>], index=[<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>,<span class="string">&quot;z&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj1[<span class="string">&#x27;x&#x27;</span>])</span><br><span class="line"><span class="comment"># Google</span></span><br><span class="line"></span><br><span class="line">obj1[<span class="string">&quot;y&quot;</span>] = <span class="string">&quot;Baidu&quot;</span></span><br><span class="line"><span class="built_in">print</span>(obj1[[<span class="string">&#x27;y&#x27;</span>,<span class="string">&#x27;z&#x27;</span>,<span class="string">&#x27;x&#x27;</span>]])</span><br><span class="line"><span class="comment"># y     Baidu</span></span><br><span class="line"><span class="comment"># z      Wiki</span></span><br><span class="line"><span class="comment"># x    Google</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<p>Series的索引可以通过赋值的方式就地修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj = pd.Series([<span class="number">4</span>,<span class="number">7</span>,-<span class="number">5</span>,<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># 0    4</span></span><br><span class="line"><span class="comment"># 1    7</span></span><br><span class="line"><span class="comment"># 2   -5</span></span><br><span class="line"><span class="comment"># 3    3</span></span><br><span class="line">dtype: int64</span><br><span class="line">obj.index=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># a    4</span></span><br><span class="line"><span class="comment"># c    7</span></span><br><span class="line"><span class="comment"># d   -5</span></span><br><span class="line"><span class="comment"># f    3</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>我们也可以使用 key&#x2F;value 对象，类似字典来创建 Series：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">sdata = &#123;<span class="string">&#x27;Ohio&#x27;</span>: <span class="number">35000</span>, <span class="string">&#x27;Texas&#x27;</span>: <span class="number">71000</span>, <span class="string">&#x27;Oregon&#x27;</span>: <span class="number">16000</span>, <span class="string">&#x27;Utah&#x27;</span>: <span class="number">5000</span>&#125;</span><br><span class="line">obj3 = pd.Series(sdata)</span><br><span class="line"><span class="built_in">print</span>(obj3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ohio      35000</span></span><br><span class="line"><span class="comment"># Oregon    16000</span></span><br><span class="line"><span class="comment"># Texas     71000</span></span><br><span class="line"><span class="comment"># Utah       5000</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>如果只传入一个字典，则结果Series中的索引就是原字典的键（有序排列）。你可以传入排好序的字典的键以改变顺序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">sdata = &#123;<span class="string">&#x27;Ohio&#x27;</span>: <span class="number">35000</span>, <span class="string">&#x27;Texas&#x27;</span>: <span class="number">71000</span>, <span class="string">&#x27;Oregon&#x27;</span>: <span class="number">16000</span>, <span class="string">&#x27;Utah&#x27;</span>: <span class="number">5000</span>&#125;</span><br><span class="line">states = [<span class="string">&#x27;California&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>]</span><br><span class="line">obj4 = pd.Series(sdata, index=states)</span><br><span class="line"><span class="built_in">print</span>(obj4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># California        NaN</span></span><br><span class="line"><span class="comment"># Ohio          35000.0</span></span><br><span class="line"><span class="comment"># Oregon        16000.0</span></span><br><span class="line"><span class="comment"># Texas         71000.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>在这个例子中，sdata中跟states索引相匹配的那3个值会被找出来并放到相应的位置上，但由于”California”所对应的sdata值找不到，所以其结果就为NaN（即“非数字”（not a number），在pandas中，它用于表示缺失或NA值）。因为‘Utah’不在states中，它被从结果中除去。</p>
<p>pandas的<code>isnull</code>和<code>notnull</code>函数可用于检测缺失数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">sdata = &#123;<span class="string">&#x27;Ohio&#x27;</span>: <span class="number">35000</span>, <span class="string">&#x27;Texas&#x27;</span>: <span class="number">71000</span>, <span class="string">&#x27;Oregon&#x27;</span>: <span class="number">16000</span>, <span class="string">&#x27;Utah&#x27;</span>: <span class="number">5000</span>&#125;</span><br><span class="line">states = [<span class="string">&#x27;California&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>]</span><br><span class="line">obj4 = pd.Series(sdata, index=states)</span><br><span class="line"><span class="built_in">print</span>(pd.isnull(obj4))</span><br><span class="line"><span class="comment"># California     True</span></span><br><span class="line"><span class="comment"># Ohio          False</span></span><br><span class="line"><span class="comment"># Oregon        False</span></span><br><span class="line"><span class="comment"># Texas         False</span></span><br><span class="line"><span class="comment"># dtype: bool</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(pd.notnull(obj4))</span><br><span class="line"><span class="comment"># California    False</span></span><br><span class="line"><span class="comment"># Ohio           True</span></span><br><span class="line"><span class="comment"># Oregon         True</span></span><br><span class="line"><span class="comment"># Texas          True</span></span><br><span class="line"><span class="comment"># dtype: bool</span></span><br></pre></td></tr></table></figure>

<p>Series也有类似的实例方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">sdata = &#123;<span class="string">&#x27;Ohio&#x27;</span>: <span class="number">35000</span>, <span class="string">&#x27;Texas&#x27;</span>: <span class="number">71000</span>, <span class="string">&#x27;Oregon&#x27;</span>: <span class="number">16000</span>, <span class="string">&#x27;Utah&#x27;</span>: <span class="number">5000</span>&#125;</span><br><span class="line">states = [<span class="string">&#x27;California&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>]</span><br><span class="line">obj4 = pd.Series(sdata, index=states)</span><br><span class="line"><span class="built_in">print</span>(obj4.isnull())</span><br><span class="line"><span class="comment"># California     True</span></span><br><span class="line"><span class="comment"># Ohio          False</span></span><br><span class="line"><span class="comment"># Oregon        False</span></span><br><span class="line"><span class="comment"># Texas         False</span></span><br><span class="line"><span class="comment"># dtype: bool</span></span><br><span class="line"><span class="built_in">print</span>(obj4.notnull())</span><br><span class="line"><span class="comment"># California    False</span></span><br><span class="line"><span class="comment"># Ohio           True</span></span><br><span class="line"><span class="comment"># Oregon         True</span></span><br><span class="line"><span class="comment"># Texas          True</span></span><br><span class="line"><span class="comment"># dtype: bool</span></span><br></pre></td></tr></table></figure>

<p>Series对象本身及其索引都有一个<code>name</code>属性，该属性跟pandas其他的关键功能关系非常密切：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">sdata = &#123;<span class="string">&#x27;Ohio&#x27;</span>: <span class="number">35000</span>, <span class="string">&#x27;Texas&#x27;</span>: <span class="number">71000</span>, <span class="string">&#x27;Oregon&#x27;</span>: <span class="number">16000</span>, <span class="string">&#x27;Utah&#x27;</span>: <span class="number">5000</span>&#125;</span><br><span class="line">states = [<span class="string">&#x27;California&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>]</span><br><span class="line">obj4 = pd.Series(sdata, index=states)</span><br><span class="line">obj4.name = <span class="string">&#x27;population&#x27;</span></span><br><span class="line">obj4.index.name = <span class="string">&#x27;state&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj4)</span><br><span class="line"><span class="comment"># state</span></span><br><span class="line"><span class="comment"># California        NaN</span></span><br><span class="line"><span class="comment"># Ohio          35000.0</span></span><br><span class="line"><span class="comment"># Oregon        16000.0</span></span><br><span class="line"><span class="comment"># Texas         71000.0</span></span><br><span class="line"><span class="comment"># Name: population, dtype: float64</span></span><br></pre></td></tr></table></figure>

<h3 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h3><p>DataFrame 是一个表格型的数据结构，它含有一组有序的列，每列可以是不同的值类型（数值、字符串、布尔型值）。DataFrame 既有行索引也有列索引，它可以被看做由 Series 组成的字典（共同用一个索引）。DataFrame中的数据是以一个或多个二维块存放的（而不是列表、字典或别的一维数据结构）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.runoob.com/wp-content/uploads/2021/04/pandas-DataStructure.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.runoob.com/wp-content/uploads/2021/04/df-dp.png" alt="img"></p>
<p><code>pandas.DataFrame( data, index, columns, dtype, copy)</code></p>
<ul>
<li><strong>data</strong>：一组数据(ndarray、series, map, lists, dict 等类型)。</li>
<li><strong>index</strong>：索引值，或者可以称为行标签。</li>
<li><strong>columns</strong>：列标签，默认为 RangeIndex (0, 1, 2, …, n) 。</li>
<li><strong>dtype</strong>：数据类型。</li>
<li><strong>copy</strong>：拷贝数据，默认为 False。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = [[<span class="string">&#x27;Google&#x27;</span>,<span class="number">10</span>],[<span class="string">&#x27;Baidu&#x27;</span>,<span class="number">12</span>],[<span class="string">&#x27;Wiki&#x27;</span>,<span class="number">13</span>]]</span><br><span class="line">df = pd.DataFrame(data,columns=[<span class="string">&#x27;Site&#x27;</span>,<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="comment">#      Site  Age</span></span><br><span class="line"><span class="comment"># 0  Google   10</span></span><br><span class="line"><span class="comment"># 1  Baidu   12</span></span><br><span class="line"><span class="comment"># 2    Wiki   13</span></span><br></pre></td></tr></table></figure>

<p>建DataFrame的办法有很多，最常用的一种是直接传入一个由等长列表或NumPy数组组成的字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">&#x27;Site&#x27;</span>:[<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Baidu&#x27;</span>, <span class="string">&#x27;Wiki&#x27;</span>], <span class="string">&#x27;Age&#x27;</span>:[<span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>]&#125;</span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line"><span class="built_in">print</span> (df)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="comment">#      Site  Age</span></span><br><span class="line"><span class="comment"># 0  Google   10</span></span><br><span class="line"><span class="comment"># 1  Baidu    12</span></span><br><span class="line"><span class="comment"># 2    Wiki   13</span></span><br></pre></td></tr></table></figure>

<p>如果指定了列序列，则DataFrame的列就会按照指定顺序进行排列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">&#x27;Site&#x27;</span>:[<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Wiki&#x27;</span>], <span class="string">&#x27;Age&#x27;</span>:[<span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>]&#125;</span><br><span class="line">df = pd.DataFrame(data, columns=[<span class="string">&#x27;Age&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span> (df)</span><br><span class="line"><span class="comment">#    Age</span></span><br><span class="line"><span class="comment"># 0   10</span></span><br><span class="line"><span class="comment"># 1   12</span></span><br><span class="line"><span class="comment"># 2   13</span></span><br></pre></td></tr></table></figure>

<p>如果传入的列在数据中找不到，就会在结果中产生缺失值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">&#x27;state&#x27;</span>: [<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">&#x27;pop&#x27;</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame2 = pd.DataFrame(data, columns=[<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;state&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;debt&#x27;</span>], index=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(frame2)</span><br><span class="line"><span class="comment">#    year   state  pop debt</span></span><br><span class="line"><span class="comment"># 1  2000    Ohio  1.5  NaN</span></span><br><span class="line"><span class="comment"># 2  2001    Ohio  1.7  NaN</span></span><br><span class="line"><span class="comment"># 3  2002    Ohio  3.6  NaN</span></span><br><span class="line"><span class="comment"># 4  2001  Nevada  2.4  NaN</span></span><br><span class="line"><span class="comment"># 5  2002  Nevada  2.9  NaN</span></span><br><span class="line"><span class="comment"># 6  2003  Nevada  3.2  NaN</span></span><br></pre></td></tr></table></figure>

<p>列可以通过赋值的方式进行修改。例如，我们可以给那个空的”debt”列赋上一个标量值或一组值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">&#x27;state&#x27;</span>: [<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">&#x27;pop&#x27;</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame2 = pd.DataFrame(data, columns=[<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;state&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;debt&#x27;</span>], index=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line">frame2[<span class="string">&#x27;debt&#x27;</span>] = np.arange(<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(frame2)</span><br><span class="line"><span class="comment">#    year   state  pop  debt</span></span><br><span class="line"><span class="comment"># 1  2000    Ohio  1.5     0</span></span><br><span class="line"><span class="comment"># 2  2001    Ohio  1.7     1</span></span><br><span class="line"><span class="comment"># 3  2002    Ohio  3.6     2</span></span><br><span class="line"><span class="comment"># 4  2001  Nevada  2.4     3</span></span><br><span class="line"><span class="comment"># 5  2002  Nevada  2.9     4</span></span><br><span class="line"><span class="comment"># 6  2003  Nevada  3.2     5</span></span><br></pre></td></tr></table></figure>

<p>将列表或数组赋值给某个列时，其长度必须跟DataFrame的长度相匹配。如果赋值的是一个Series，就会精确匹配DataFrame的索引，所有的空位都将被填上缺失值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">&#x27;state&#x27;</span>: [<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">&#x27;pop&#x27;</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame2 = pd.DataFrame(data, columns=[<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;state&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;debt&#x27;</span>], index=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">val = pd.Series([-<span class="number">1.2</span>, -<span class="number">1.5</span>, -<span class="number">1.7</span>], index=[<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">frame2[<span class="string">&#x27;debt&#x27;</span>] = val</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(frame2)</span><br><span class="line"><span class="comment">#    year   state  pop  debt</span></span><br><span class="line"><span class="comment"># 1  2000    Ohio  1.5  -1.2</span></span><br><span class="line"><span class="comment"># 2  2001    Ohio  1.7   NaN</span></span><br><span class="line"><span class="comment"># 3  2002    Ohio  3.6   NaN</span></span><br><span class="line"><span class="comment"># 4  2001  Nevada  2.4  -1.5</span></span><br><span class="line"><span class="comment"># 5  2002  Nevada  2.9  -1.7</span></span><br><span class="line"><span class="comment"># 6  2003  Nevada  3.2   NaN</span></span><br></pre></td></tr></table></figure>

<p>del方法可以用来删除列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">&#x27;state&#x27;</span>: [<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">&#x27;pop&#x27;</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame2 = pd.DataFrame(data, columns=[<span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;state&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;debt&#x27;</span>], index=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="built_in">print</span>(frame2)</span><br><span class="line"><span class="comment">#    year   state  pop debt</span></span><br><span class="line"><span class="comment"># 1  2000    Ohio  1.5  NaN</span></span><br><span class="line"><span class="comment"># 2  2001    Ohio  1.7  NaN</span></span><br><span class="line"><span class="comment"># 3  2002    Ohio  3.6  NaN</span></span><br><span class="line"><span class="comment"># 4  2001  Nevada  2.4  NaN</span></span><br><span class="line"><span class="comment"># 5  2002  Nevada  2.9  NaN</span></span><br><span class="line"><span class="comment"># 6  2003  Nevada  3.2  NaN</span></span><br><span class="line"><span class="keyword">del</span> frame2[<span class="string">&#x27;debt&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(frame2)</span><br><span class="line"><span class="comment">#    year   state  pop</span></span><br><span class="line"><span class="comment"># 1  2000    Ohio  1.5</span></span><br><span class="line"><span class="comment"># 2  2001    Ohio  1.7</span></span><br><span class="line"><span class="comment"># 3  2002    Ohio  3.6</span></span><br><span class="line"><span class="comment"># 4  2001  Nevada  2.4</span></span><br><span class="line"><span class="comment"># 5  2002  Nevada  2.9</span></span><br><span class="line"><span class="comment"># 6  2003  Nevada  3.2</span></span><br></pre></td></tr></table></figure>

<p>Pandas 可以使用 loc 属性返回指定行的数据，如果没有设置索引，第一行索引为 0，第二行索引为 1，以此类推：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;</span><br><span class="line">  <span class="string">&quot;calories&quot;</span>: [<span class="number">420</span>, <span class="number">380</span>, <span class="number">390</span>],</span><br><span class="line">  <span class="string">&quot;duration&quot;</span>: [<span class="number">50</span>, <span class="number">40</span>, <span class="number">45</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 数据载入到 DataFrame 对象</span></span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回第一行</span></span><br><span class="line"><span class="built_in">print</span>(df.loc[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 返回第二行</span></span><br><span class="line"><span class="built_in">print</span>(df.loc[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果如下：</span></span><br><span class="line"><span class="comment"># calories    420</span></span><br><span class="line"><span class="comment"># duration     50</span></span><br><span class="line"><span class="comment"># Name: 0, dtype: int64</span></span><br><span class="line"><span class="comment"># calories    380</span></span><br><span class="line"><span class="comment"># duration     40</span></span><br><span class="line"><span class="comment"># Name: 1, dtype: int64</span></span><br></pre></td></tr></table></figure>

<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">df.head(<span class="number">5</span>) <span class="comment">#查看前5行</span></span><br><span class="line">df.tail(<span class="number">3</span>) <span class="comment">#查看后3行</span></span><br><span class="line">df.values <span class="comment">#查看数值</span></span><br><span class="line">df.shape <span class="comment">#查看行数、列数</span></span><br><span class="line">df.fillna(<span class="number">0</span>) <span class="comment">#将空值填充0</span></span><br><span class="line">df.replace(<span class="number">1</span>, -<span class="number">1</span>) <span class="comment">#将1替换成-1</span></span><br><span class="line">df.isnull() <span class="comment">#查找数据中出现的空值</span></span><br><span class="line">df.notnull() <span class="comment">#非空值</span></span><br><span class="line">df.dropna() <span class="comment">#删除空值</span></span><br><span class="line">df.unique() <span class="comment">#查看唯一值</span></span><br><span class="line">df.reset_index() <span class="comment">#修改、删除，原有索引</span></span><br><span class="line">df.columns <span class="comment">#查看数据的列名</span></span><br><span class="line">df.index <span class="comment">#查看索引</span></span><br><span class="line">df.sort_index() <span class="comment">#索引排序 </span></span><br><span class="line">df.sort_values() <span class="comment">#值排序</span></span><br><span class="line">pd.merge(数据<span class="number">1</span>,数据<span class="number">1</span>) <span class="comment">#合并</span></span><br><span class="line">pd.concat([数据<span class="number">1</span>,数据<span class="number">2</span>]) <span class="comment">#合并，与merge的区别，自查</span></span><br><span class="line">pd.pivot_table( 数据 ) <span class="comment">#用df做数据透视表（类似于Excel的数透）</span></span><br></pre></td></tr></table></figure>



<h3 id="索引对象"><a href="#索引对象" class="headerlink" title="索引对象"></a>索引对象</h3><p>Pandas的索引对象负责管理轴标签和其他元数据（比如轴名称等）。构建Series或DataFrame时，所用到的任何数组或其他序列的标签都会被转换成一个Index：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj = pd.Series(<span class="built_in">range</span>(<span class="number">3</span>),index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line">index = obj.index</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(index)</span><br><span class="line"><span class="comment"># Index([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;], dtype=&#x27;object&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(index[:<span class="number">3</span>])</span><br><span class="line"><span class="comment"># Index([&#x27;a&#x27;, &#x27;b&#x27;], dtype=&#x27;object&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>Index对象是不可变的，因此用户不能对其进行修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index[<span class="number">1</span>] = <span class="string">&#x27;d&#x27;</span>  <span class="comment"># TypeError</span></span><br></pre></td></tr></table></figure>

<p>除了类似于数组，Index的功能也类似一个固定大小的集合：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = &#123;<span class="string">&#x27;state&#x27;</span>: [<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>, <span class="string">&#x27;Nevada&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>: [<span class="number">2000</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>],</span><br><span class="line">        <span class="string">&#x27;pop&#x27;</span>: [<span class="number">1.5</span>, <span class="number">1.7</span>, <span class="number">3.6</span>, <span class="number">2.4</span>, <span class="number">2.9</span>, <span class="number">3.2</span>]&#125;</span><br><span class="line">frame = pd.DataFrame(data,index=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;e&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#     state  year  pop</span></span><br><span class="line"><span class="comment"># a    Ohio  2000  1.5</span></span><br><span class="line"><span class="comment"># b    Ohio  2001  1.7</span></span><br><span class="line"><span class="comment"># c    Ohio  2002  3.6</span></span><br><span class="line"><span class="comment"># d  Nevada  2001  2.4</span></span><br><span class="line"><span class="comment"># s  Nevada  2002  2.9</span></span><br><span class="line"><span class="comment"># e  Nevada  2003  3.2</span></span><br><span class="line"><span class="built_in">print</span>(frame.index)</span><br><span class="line"><span class="comment"># Index([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;s&#x27;, &#x27;e&#x27;], dtype=&#x27;object&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>与python的集合不同，pandas的Index可以包含重复的标签：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">dup_labels = pd.Index([<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(dup_labels)</span><br><span class="line"><span class="comment"># Index([&#x27;foo&#x27;, &#x27;foo&#x27;, &#x27;bar&#x27;, &#x27;bar&#x27;], dtype=&#x27;object&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>每个索引都有一些方法和属性，它们可用于设置逻辑并回答有关该索引所包含的数据的常见问题。表5-2列出了这些函数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-5499d14f0e2cd639.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<h2 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h2><h3 id="重新索引"><a href="#重新索引" class="headerlink" title="重新索引"></a>重新索引</h3><p>pandas对象的一个重要方法是reindex，其作用是创建一个新对象，它的数据符合新的索引。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-efa3dbd4b83c61ec.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj = pd.Series([<span class="number">4.5</span>, <span class="number">7.2</span>, -<span class="number">5.3</span>, <span class="number">3.6</span>], index=[<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># d    4.5</span></span><br><span class="line"><span class="comment"># b    7.2</span></span><br><span class="line"><span class="comment"># a   -5.3</span></span><br><span class="line"><span class="comment"># c    3.6</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>用该Series的reindex将会根据新索引进行重排。如果某个索引值当前不存在，就引入缺失值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">obj2 = obj.reindex([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj2)</span><br><span class="line"><span class="comment"># a   -5.3</span></span><br><span class="line"><span class="comment"># b    7.2</span></span><br><span class="line"><span class="comment"># c    3.6</span></span><br><span class="line"><span class="comment"># d    4.5</span></span><br><span class="line"><span class="comment"># e    NaN</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>对于时间序列这样的有序数据，重新索引时可能需要做一些插值处理。method选项即可达到此目的，例如，使用ffill可以实现前向值填充：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj3 = pd.Series([<span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;purple&#x27;</span>, <span class="string">&#x27;yellow&#x27;</span>], index=[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(obj3)</span><br><span class="line"><span class="comment"># 0      blue</span></span><br><span class="line"><span class="comment"># 2    purple</span></span><br><span class="line"><span class="comment"># 4    yellow</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line"><span class="built_in">print</span>(obj3.reindex(<span class="built_in">range</span>(<span class="number">6</span>),method=<span class="string">&#x27;ffill&#x27;</span>))</span><br><span class="line"><span class="comment"># 0      blue</span></span><br><span class="line"><span class="comment"># 1      blue</span></span><br><span class="line"><span class="comment"># 2    purple</span></span><br><span class="line"><span class="comment"># 3    purple</span></span><br><span class="line"><span class="comment"># 4    yellow</span></span><br><span class="line"><span class="comment"># 5    yellow</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<p>借助DataFrame，reindex可以修改（行）索引和列。只传递一个序列时，会重新索引结果的行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">9</span>).reshape((<span class="number">3</span>, <span class="number">3</span>)),index=[<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;c&#x27;</span>],columns=[<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;California&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#    Ohio  Texas  California</span></span><br><span class="line"><span class="comment"># b     0      1           2</span></span><br><span class="line"><span class="comment"># a     3      4           5</span></span><br><span class="line"><span class="comment"># c     6      7           8</span></span><br><span class="line"></span><br><span class="line">frame2 = frame.reindex([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(frame2)</span><br><span class="line"><span class="comment">#    Ohio  Texas  California</span></span><br><span class="line"><span class="comment"># a   0.0    1.0         2.0</span></span><br><span class="line"><span class="comment"># b   3.0    4.0         5.0</span></span><br><span class="line"><span class="comment"># c   6.0    7.0         8.0</span></span><br><span class="line"><span class="comment"># d   NaN    NaN         NaN</span></span><br></pre></td></tr></table></figure>

<p>列可以用columns关键字重新索引：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">9</span>).reshape((<span class="number">3</span>, <span class="number">3</span>)),index=[<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;c&#x27;</span>],columns=[<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;California&#x27;</span>])</span><br><span class="line">states = [<span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;California&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(frame.reindex(columns=states))</span><br><span class="line"><span class="comment">#    Texas  Utah  California</span></span><br><span class="line"><span class="comment"># b      1   NaN           2</span></span><br><span class="line"><span class="comment"># a      4   NaN           5</span></span><br><span class="line"><span class="comment"># c      7   NaN           8</span></span><br></pre></td></tr></table></figure>

<h3 id="丢弃指定轴上的项"><a href="#丢弃指定轴上的项" class="headerlink" title="丢弃指定轴上的项"></a>丢弃指定轴上的项</h3><p>丢弃某条轴上的一个或多个项很简单，只要有一个索引数组或列表即可。由于需要执行一些数据整理和集合逻辑，所以<code>drop</code>方法返回的是一个在指定轴上删除了指定值的新对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj = pd.Series(np.arange(<span class="number">5.</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># c    2.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># e    4.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj.drop(<span class="string">&#x27;c&#x27;</span>))</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># e    4.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj.drop([<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]))</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># c    2.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>对于DataFrame，可以删除任意轴上的索引值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = pd.DataFrame(np.arange(<span class="number">16</span>).reshape(<span class="number">4</span>,<span class="number">4</span>),index=[<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Colorado&#x27;</span>, <span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;New York&#x27;</span>],columns=[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Ohio        0    1      2     3</span></span><br><span class="line"><span class="comment"># Colorado    4    5      6     7</span></span><br><span class="line"><span class="comment"># Utah        8    9     10    11</span></span><br><span class="line"><span class="comment"># New York   12   13     14    15</span></span><br></pre></td></tr></table></figure>

<p>用标签序列调用drop会从行标签（axis&#x3D;0）删除值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.drop([<span class="string">&#x27;Colorado&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>]))</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Utah        8    9     10    11</span></span><br><span class="line"><span class="comment"># New York   12   13     14    15</span></span><br></pre></td></tr></table></figure>

<p>通过传递axis&#x3D;1或axis&#x3D;’columns’可以删除列的值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.drop(<span class="string">&#x27;two&#x27;</span>, axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment">#           one  three  four</span></span><br><span class="line"><span class="comment"># Ohio        0      2     3</span></span><br><span class="line"><span class="comment"># Colorado    4      6     7</span></span><br><span class="line"><span class="comment"># Utah        8     10    11</span></span><br><span class="line"><span class="comment"># New York   12     14    15</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data.drop([<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;four&#x27;</span>], axis=<span class="string">&#x27;columns&#x27;</span>))</span><br><span class="line"><span class="comment">#           one  three</span></span><br><span class="line"><span class="comment"># Ohio        0      2</span></span><br><span class="line"><span class="comment"># Colorado    4      6</span></span><br><span class="line"><span class="comment"># Utah        8     10</span></span><br><span class="line"><span class="comment"># New York   12     14</span></span><br></pre></td></tr></table></figure>

<p>许多函数，如drop，会修改Series或DataFrame的大小或形状，可以就地修改对象，不会返回新的对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">obj = pd.Series(np.arange(<span class="number">5.</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>])</span><br><span class="line">obj.drop(<span class="string">&#x27;c&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># e    4.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p><strong>小心使用inplace，它会销毁所有被删除的数据。</strong></p>
<h3 id="索引、选取和过滤"><a href="#索引、选取和过滤" class="headerlink" title="索引、选取和过滤"></a>索引、选取和过滤</h3><p>Series索引（obj[…]）的工作方式类似于NumPy数组的索引，只不过Series的索引值不只是整数。下面是几个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">obj = pd.Series(np.arange(<span class="number">4.</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># c    2.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(obj[<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="comment"># 1.0</span></span><br><span class="line"><span class="built_in">print</span>(obj[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 1.0</span></span><br><span class="line"><span class="built_in">print</span>(obj[<span class="number">2</span>:<span class="number">4</span>])</span><br><span class="line"><span class="comment"># c    2.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(obj[[<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]])</span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(obj[[<span class="number">1</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(obj[obj &lt; <span class="number">2</span>])</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p><strong>利用标签的切片运算与普通的Python切片运算不同，其末端是包含的</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">obj = pd.Series(np.arange(<span class="number">4.</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj[<span class="string">&#x27;b&#x27;</span>:<span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="comment"># b    1.0</span></span><br><span class="line"><span class="comment"># c    2.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>用切片可以对Series的相应部分进行设置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">obj = pd.Series(np.arange(<span class="number">4.</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line">obj[<span class="string">&#x27;b&#x27;</span>:<span class="string">&#x27;c&#x27;</span>] = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># a    0.0</span></span><br><span class="line"><span class="comment"># b    5.0</span></span><br><span class="line"><span class="comment"># c    5.0</span></span><br><span class="line"><span class="comment"># d    3.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>用一个值或序列对DataFrame进行索引其实就是获取一个或多个列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = pd.DataFrame(np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>, <span class="number">4</span>)),index=[<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Colorado&#x27;</span>, <span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;New York&#x27;</span>],columns=[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Ohio        0    1      2     3</span></span><br><span class="line"><span class="comment"># Colorado    4    5      6     7</span></span><br><span class="line"><span class="comment"># Utah        8    9     10    11</span></span><br><span class="line"><span class="comment"># New York   12   13     14    15</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data[<span class="string">&#x27;two&#x27;</span>])</span><br><span class="line"><span class="comment"># Ohio         1</span></span><br><span class="line"><span class="comment"># Colorado     5</span></span><br><span class="line"><span class="comment"># Utah         9</span></span><br><span class="line"><span class="comment"># New York    13</span></span><br><span class="line"><span class="comment"># Name: two, dtype: int32</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data[[<span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;one&#x27;</span>]])</span><br><span class="line"><span class="comment">#           three  one</span></span><br><span class="line"><span class="comment"># Ohio          2    0</span></span><br><span class="line"><span class="comment"># Colorado      6    4</span></span><br><span class="line"><span class="comment"># Utah         10    8</span></span><br><span class="line"><span class="comment"># New York     14   12</span></span><br></pre></td></tr></table></figure>

<p>这种索引方式有几个特殊的情况。首先通过切片或布尔型数组选取数据：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data[:<span class="number">2</span>])</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Ohio        0    1      2     3</span></span><br><span class="line"><span class="comment"># Colorado    4    5      6     7</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data[data[<span class="string">&#x27;three&#x27;</span>] &gt; <span class="number">5</span>])</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Colorado    4    5      6     7</span></span><br><span class="line"><span class="comment"># Utah        8    9     10    11</span></span><br><span class="line"><span class="comment"># New York   12   13     14    15</span></span><br></pre></td></tr></table></figure>

<p>另一种用法是通过布尔型DataFrame（比如下面这个由标量比较运算得出的）进行索引,这使得DataFrame的语法与NumPy二维数组的语法很像。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data&lt;<span class="number">5</span>)</span><br><span class="line"><span class="comment">#             one    two  three   four</span></span><br><span class="line"><span class="comment"># Ohio       True   True   True   True</span></span><br><span class="line"><span class="comment"># Colorado   True  False  False  False</span></span><br><span class="line"><span class="comment"># Utah      False  False  False  False</span></span><br><span class="line"><span class="comment"># New York  False  False  False  False</span></span><br><span class="line"></span><br><span class="line">data[data&lt;<span class="number">5</span>] = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Ohio        0    0      0     0</span></span><br><span class="line"><span class="comment"># Colorado    0    5      6     7</span></span><br><span class="line"><span class="comment"># Utah        8    9     10    11</span></span><br><span class="line"><span class="comment"># New York   12   13     14    15</span></span><br></pre></td></tr></table></figure>

<h4 id="query"><a href="#query" class="headerlink" title="query()"></a>query()</h4><p>DataFrame对象有一个query() 允许使用表达式进行选择的方法。完全类似numpy的语法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">232</span>]: df = pd.DataFrame(np.random.randint(<span class="number">10</span>, size=(<span class="number">10</span>, <span class="number">3</span>)), columns=<span class="built_in">list</span>(<span class="string">&#x27;abc&#x27;</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">233</span>]: df</span><br><span class="line">Out[<span class="number">233</span>]: </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span></span><br><span class="line"><span class="number">1</span>  <span class="number">1</span>  <span class="number">0</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  <span class="number">2</span>  <span class="number">7</span>  <span class="number">2</span></span><br><span class="line"><span class="number">3</span>  <span class="number">6</span>  <span class="number">2</span>  <span class="number">2</span></span><br><span class="line"><span class="number">4</span>  <span class="number">2</span>  <span class="number">6</span>  <span class="number">3</span></span><br><span class="line"><span class="number">5</span>  <span class="number">3</span>  <span class="number">8</span>  <span class="number">2</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1</span>  <span class="number">7</span>  <span class="number">2</span></span><br><span class="line"><span class="number">7</span>  <span class="number">5</span>  <span class="number">1</span>  <span class="number">5</span></span><br><span class="line"><span class="number">8</span>  <span class="number">9</span>  <span class="number">8</span>  <span class="number">0</span></span><br><span class="line"><span class="number">9</span>  <span class="number">1</span>  <span class="number">5</span>  <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">234</span>]: df.query(<span class="string">&#x27;(a &lt; b) &amp; (b &lt; c)&#x27;</span>)</span><br><span class="line">Out[<span class="number">234</span>]: </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">235</span>]: df[(df.a &lt; df.b) &amp; (df.b &lt; df.c)]</span><br><span class="line">Out[<span class="number">235</span>]: </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>通过删除括号略微更好（通过绑定使比较运算符绑定比<code>&amp;</code>和更紧<code>|</code>）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">236</span>]: df.query(<span class="string">&#x27;a &lt; b &amp; b &lt; c&#x27;</span>)</span><br><span class="line">Out[<span class="number">236</span>]: </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>使用英语而不是符号：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">237</span>]: df.query(<span class="string">&#x27;a &lt; b and b &lt; c&#x27;</span>)</span><br><span class="line">Out[<span class="number">237</span>]: </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>非常接近你如何在纸上写它：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">238</span>]: df.query(<span class="string">&#x27;a &lt; b &lt; c&#x27;</span>)</span><br><span class="line">Out[<span class="number">238</span>]: </span><br><span class="line">   a  b  c</span><br><span class="line"><span class="number">0</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><code>query()</code>还支持Python <code>in</code>和 比较运算符的特殊用法，为调用或的方法提供了简洁的语法 。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get all rows where columns &quot;a&quot; and &quot;b&quot; have overlapping values</span></span><br><span class="line">In [<span class="number">239</span>]: df = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="built_in">list</span>(<span class="string">&#x27;aabbccddeeff&#x27;</span>), <span class="string">&#x27;b&#x27;</span>: <span class="built_in">list</span>(<span class="string">&#x27;aaaabbbbcccc&#x27;</span>),</span><br><span class="line">   .....:                    <span class="string">&#x27;c&#x27;</span>: np.random.randint(<span class="number">5</span>, size=<span class="number">12</span>),</span><br><span class="line">   .....:                    <span class="string">&#x27;d&#x27;</span>: np.random.randint(<span class="number">9</span>, size=<span class="number">12</span>)&#125;)</span><br><span class="line">   .....: </span><br><span class="line"></span><br><span class="line">In [<span class="number">240</span>]: df</span><br><span class="line">Out[<span class="number">240</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>   a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>   b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">4</span>   c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>   c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">241</span>]: df.query(<span class="string">&#x27;a in b&#x27;</span>)</span><br><span class="line">Out[<span class="number">241</span>]: </span><br><span class="line">   a  b  c  d</span><br><span class="line"><span class="number">0</span>  a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>  a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>  b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">4</span>  c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>  c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># How you&#x27;d do it in pure Python</span></span><br><span class="line">In [<span class="number">242</span>]: df[df.a.isin(df.b)]</span><br><span class="line">Out[<span class="number">242</span>]: </span><br><span class="line">   a  b  c  d</span><br><span class="line"><span class="number">0</span>  a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>  a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>  b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">4</span>  c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>  c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">243</span>]: df.query(<span class="string">&#x27;a not in b&#x27;</span>)</span><br><span class="line">Out[<span class="number">243</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pure Python</span></span><br><span class="line">In [<span class="number">244</span>]: df[~df.a.isin(df.b)]</span><br><span class="line">Out[<span class="number">244</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>您可以将此与其他表达式结合使用，以获得非常简洁的查询：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rows where cols a and b have overlapping values</span></span><br><span class="line"><span class="comment"># and col c&#x27;s values are less than col d&#x27;s</span></span><br><span class="line">In [<span class="number">245</span>]: df.query(<span class="string">&#x27;a in b and c &lt; d&#x27;</span>)</span><br><span class="line">Out[<span class="number">245</span>]: </span><br><span class="line">   a  b  c  d</span><br><span class="line"><span class="number">0</span>  a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>  a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>  b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">4</span>  c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>  c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pure Python</span></span><br><span class="line">In [<span class="number">246</span>]: df[df.b.isin(df.a) &amp; (df.c &lt; df.d)]</span><br><span class="line">Out[<span class="number">246</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>   a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">4</span>   c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>   c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><code>==</code>运算符与<code>list</code>对象的特殊用法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">247</span>]: df.query(<span class="string">&#x27;b == [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]&#x27;</span>)</span><br><span class="line">Out[<span class="number">247</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>   a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>   b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">4</span>   c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>   c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pure Python</span></span><br><span class="line">In [<span class="number">248</span>]: df[df.b.isin([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>])]</span><br><span class="line">Out[<span class="number">248</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">1</span>   a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>   b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">4</span>   c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>   c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">249</span>]: df.query(<span class="string">&#x27;c == [1, 2]&#x27;</span>)</span><br><span class="line">Out[<span class="number">249</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>   b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">250</span>]: df.query(<span class="string">&#x27;c != [1, 2]&#x27;</span>)</span><br><span class="line">Out[<span class="number">250</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">1</span>   a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">4</span>   c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>   c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># using in/not in</span></span><br><span class="line">In [<span class="number">251</span>]: df.query(<span class="string">&#x27;[1, 2] in c&#x27;</span>)</span><br><span class="line">Out[<span class="number">251</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>   b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">252</span>]: df.query(<span class="string">&#x27;[1, 2] not in c&#x27;</span>)</span><br><span class="line">Out[<span class="number">252</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">1</span>   a  a  <span class="number">4</span>  <span class="number">7</span></span><br><span class="line"><span class="number">4</span>   c  b  <span class="number">3</span>  <span class="number">6</span></span><br><span class="line"><span class="number">5</span>   c  b  <span class="number">0</span>  <span class="number">2</span></span><br><span class="line"><span class="number">6</span>   d  b  <span class="number">3</span>  <span class="number">3</span></span><br><span class="line"><span class="number">8</span>   e  c  <span class="number">4</span>  <span class="number">3</span></span><br><span class="line"><span class="number">10</span>  f  c  <span class="number">0</span>  <span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pure Python</span></span><br><span class="line">In [<span class="number">253</span>]: df[df.c.isin([<span class="number">1</span>, <span class="number">2</span>])]</span><br><span class="line">Out[<span class="number">253</span>]: </span><br><span class="line">    a  b  c  d</span><br><span class="line"><span class="number">0</span>   a  a  <span class="number">2</span>  <span class="number">6</span></span><br><span class="line"><span class="number">2</span>   b  a  <span class="number">1</span>  <span class="number">6</span></span><br><span class="line"><span class="number">3</span>   b  a  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">7</span>   d  b  <span class="number">2</span>  <span class="number">1</span></span><br><span class="line"><span class="number">9</span>   e  c  <span class="number">2</span>  <span class="number">0</span></span><br><span class="line"><span class="number">11</span>  f  c  <span class="number">1</span>  <span class="number">2</span></span><br></pre></td></tr></table></figure>



<h3 id="用loc和iloc进行选取"><a href="#用loc和iloc进行选取" class="headerlink" title="用loc和iloc进行选取"></a>用loc和iloc进行选取</h3><p>对于DataFrame的行的标签索引，引入了特殊的标签运算符loc和iloc。它们可以让你用类似NumPy的标记，使用轴标签（loc）或整数索引（iloc），从DataFrame选择行和列的子集。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = pd.DataFrame(np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>, <span class="number">4</span>)),index=[<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Colorado&#x27;</span>, <span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;New York&#x27;</span>],columns=[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#           one  two  three  four</span></span><br><span class="line"><span class="comment"># Ohio        0    1      2     3</span></span><br><span class="line"><span class="comment"># Colorado    4    5      6     7</span></span><br><span class="line"><span class="comment"># Utah        8    9     10    11</span></span><br><span class="line"><span class="comment"># New York   12   13     14    15</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data.loc[<span class="string">&#x27;Colorado&#x27;</span>, [<span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>]])</span><br><span class="line"><span class="comment"># two      5</span></span><br><span class="line"><span class="comment"># three    6</span></span><br><span class="line"><span class="comment"># Name: Colorado, dtype: int32# </span></span><br></pre></td></tr></table></figure>

<p>用iloc和整数进行选取：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.iloc[<span class="number">2</span>, [<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment"># four    11</span></span><br><span class="line"><span class="comment"># one      8</span></span><br><span class="line"><span class="comment"># two      9</span></span><br><span class="line"><span class="comment"># Name: Utah, dtype: int32</span></span><br><span class="line"><span class="built_in">print</span>(data.iloc[<span class="number">2</span>])</span><br><span class="line"><span class="comment"># one       8</span></span><br><span class="line"><span class="comment"># two       9</span></span><br><span class="line"><span class="comment"># three    10</span></span><br><span class="line"><span class="comment"># four     11</span></span><br><span class="line"><span class="comment"># Name: Utah, dtype: int64</span></span><br><span class="line"><span class="built_in">print</span>(data.iloc[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="comment">#           four  one  two</span></span><br><span class="line"><span class="comment"># Colorado     7    0    5</span></span><br><span class="line"><span class="comment"># Utah        11    8    9</span></span><br></pre></td></tr></table></figure>

<p>这两个索引函数也适用于一个标签或多个标签的切片：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.loc[:<span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;two&#x27;</span>])</span><br><span class="line"><span class="comment"># Ohio        1</span></span><br><span class="line"><span class="comment"># Colorado    5</span></span><br><span class="line"><span class="comment"># Utah        9</span></span><br><span class="line"><span class="comment"># Name: two, dtype: int32</span></span><br><span class="line"><span class="built_in">print</span>(data.iloc[:, :<span class="number">3</span>][data.three &gt; <span class="number">5</span>])</span><br><span class="line"><span class="comment">#           one  two  three</span></span><br><span class="line"><span class="comment"># Colorado    0    5      6</span></span><br><span class="line"><span class="comment"># Utah        8    9     10</span></span><br><span class="line"><span class="comment"># New York   12   13     14</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-64354f2ab777bd8c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表5-4 DataFrame的索引选项"></p>
<h3 id="整数索引"><a href="#整数索引" class="headerlink" title="整数索引"></a>整数索引</h3><p>处理整数索引的pandas对象常常难住新手，因为它与Python内置的列表和元组的索引语法不同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">ser = pd.Series(np.arange(<span class="number">3.</span>))</span><br><span class="line"><span class="built_in">print</span>(ser)</span><br><span class="line"><span class="comment"># 0    0.0</span></span><br><span class="line"><span class="comment"># 1    1.0</span></span><br><span class="line"><span class="comment"># 2    2.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(ser[-<span class="number">1</span>])</span><br><span class="line"><span class="comment"># ValueError: -1 is not in range</span></span><br></pre></td></tr></table></figure>

<p>对于非整数索引，不会产生歧义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">ser2 = pd.Series(np.arange(<span class="number">3.</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(ser2[-<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 2.0</span></span><br></pre></td></tr></table></figure>

<p>为了进行统一，如果轴索引含有整数，数据选取总会使用标签。为了更准确，请使用loc（标签）或iloc（整数）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">ser = pd.Series(np.arange(<span class="number">3.</span>),index=[<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(ser)</span><br><span class="line"><span class="comment"># 0    0.0</span></span><br><span class="line"><span class="comment"># 3    1.0</span></span><br><span class="line"><span class="comment"># 4    2.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(ser[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># KeyError: 1</span></span><br><span class="line"><span class="built_in">print</span>(ser[:<span class="number">2</span>])        <span class="comment"># 数据选取0,1行</span></span><br><span class="line"><span class="comment"># 0    0.0</span></span><br><span class="line"><span class="comment"># 3    1.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(ser.loc[:<span class="number">3</span>])    <span class="comment"># 数据选取使用标签3和之前的行</span></span><br><span class="line"><span class="comment"># 0    0.0</span></span><br><span class="line"><span class="comment"># 3    1.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(ser.iloc[:<span class="number">3</span>])   <span class="comment"># 数据选取前3行</span></span><br><span class="line"><span class="comment"># 0    0.0</span></span><br><span class="line"><span class="comment"># 3    1.0</span></span><br><span class="line"><span class="comment"># 4    2.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<h3 id="算术运算和数据对齐"><a href="#算术运算和数据对齐" class="headerlink" title="算术运算和数据对齐"></a>算术运算和数据对齐</h3><p>pandas最重要的一个功能是，它可以对不同索引的对象进行算术运算。在将对象相加时，如果存在不同的索引对，则结果的索引就是该索引对的并集。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">s1 = pd.Series([<span class="number">7.3</span>, -<span class="number">2.5</span>, <span class="number">3.4</span>, <span class="number">1.5</span>], index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>])</span><br><span class="line">s2 = pd.Series([-<span class="number">2.1</span>, <span class="number">3.6</span>, -<span class="number">1.5</span>, <span class="number">4</span>, <span class="number">3.1</span>], index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(s1,s2)</span><br><span class="line"><span class="comment"># a    7.3</span></span><br><span class="line"><span class="comment"># c   -2.5</span></span><br><span class="line"><span class="comment"># d    3.4</span></span><br><span class="line"><span class="comment"># e    1.5</span></span><br><span class="line"><span class="comment"># dtype: float64 </span></span><br><span class="line"><span class="comment"># a   -2.1</span></span><br><span class="line"><span class="comment"># c    3.6</span></span><br><span class="line"><span class="comment"># e   -1.5</span></span><br><span class="line"><span class="comment"># f    4.0</span></span><br><span class="line"><span class="comment"># g    3.1</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(s1+s2)</span><br><span class="line"><span class="comment"># a    5.2</span></span><br><span class="line"><span class="comment"># c    1.1</span></span><br><span class="line"><span class="comment"># d    NaN</span></span><br><span class="line"><span class="comment"># e    0.0</span></span><br><span class="line"><span class="comment"># f    NaN</span></span><br><span class="line"><span class="comment"># g    NaN</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>自动的数据对齐操作在不重叠的索引处引入了NA值。缺失值会在算术运算过程中传播。</p>
<p>对于DataFrame，对齐操作会同时发生在行和列上，把它们相加后将会返回一个新的DataFrame，其索引和列为原来那两个DataFrame的并集。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">df1 = pd.DataFrame(np.arange(<span class="number">9.</span>).reshape((<span class="number">3</span>, <span class="number">3</span>)), columns=<span class="built_in">list</span>(<span class="string">&#x27;bcd&#x27;</span>),index=[<span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;Colorado&#x27;</span>])</span><br><span class="line">df2 = pd.DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)), columns=<span class="built_in">list</span>(<span class="string">&#x27;bde&#x27;</span>),index=[<span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df1)</span><br><span class="line"><span class="comment">#             b    c    d</span></span><br><span class="line"><span class="comment"># Ohio      0.0  1.0  2.0</span></span><br><span class="line"><span class="comment"># Texas     3.0  4.0  5.0</span></span><br><span class="line"><span class="comment"># Colorado  6.0  7.0  8.0</span></span><br><span class="line"><span class="built_in">print</span>(df2)</span><br><span class="line"><span class="comment">#           b     d     e</span></span><br><span class="line"><span class="comment"># Utah    0.0   1.0   2.0</span></span><br><span class="line"><span class="comment"># Ohio    3.0   4.0   5.0</span></span><br><span class="line"><span class="comment"># Texas   6.0   7.0   8.0</span></span><br><span class="line"><span class="comment"># Oregon  9.0  10.0  11.0</span></span><br><span class="line"><span class="built_in">print</span>(df1+df2)</span><br><span class="line"><span class="comment">#             b   c     d   e</span></span><br><span class="line"><span class="comment"># Colorado  NaN NaN   NaN NaN</span></span><br><span class="line"><span class="comment"># Ohio      3.0 NaN   6.0 NaN</span></span><br><span class="line"><span class="comment"># Oregon    NaN NaN   NaN NaN</span></span><br><span class="line"><span class="comment"># Texas     9.0 NaN  12.0 NaN</span></span><br><span class="line"><span class="comment"># Utah      NaN NaN   NaN NaN</span></span><br></pre></td></tr></table></figure>

<p>因为’c’和’e’列均不在两个DataFrame对象中，在结果中以缺省值呈现。行也是同样。</p>
<p>如果DataFrame对象相加，没有共用的列或行标签，结果都会是空：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>: [<span class="number">1</span>, <span class="number">2</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">&#x27;B&#x27;</span>: [<span class="number">3</span>, <span class="number">4</span>]&#125;)</span><br><span class="line"><span class="built_in">print</span>(df1)</span><br><span class="line"><span class="comment">#    A</span></span><br><span class="line"><span class="comment"># 0  1</span></span><br><span class="line"><span class="comment"># 1  2</span></span><br><span class="line"><span class="built_in">print</span>(df2)</span><br><span class="line"><span class="comment">#    B</span></span><br><span class="line"><span class="comment"># 0  3</span></span><br><span class="line"><span class="comment"># 1  4</span></span><br><span class="line"><span class="built_in">print</span>(df1-df2)</span><br><span class="line"><span class="comment">#     A   B</span></span><br><span class="line"><span class="comment"># 0 NaN NaN</span></span><br><span class="line"><span class="comment"># 1 NaN NaN</span></span><br></pre></td></tr></table></figure>

<h3 id="在算术方法中填充值"><a href="#在算术方法中填充值" class="headerlink" title="在算术方法中填充值"></a>在算术方法中填充值</h3><p>在对不同索引的对象进行算术运算时，你可能希望当一个对象中某个轴标签在另一个对象中找不到时填充一个特殊值（比如0）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">df1 = pd.DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">3</span>, <span class="number">4</span>)), columns=<span class="built_in">list</span>(<span class="string">&#x27;abcd&#x27;</span>))</span><br><span class="line">df2 = pd.DataFrame(np.arange(<span class="number">20.</span>).reshape((<span class="number">4</span>, <span class="number">5</span>)), columns=<span class="built_in">list</span>(<span class="string">&#x27;abcde&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(df1)</span><br><span class="line"><span class="comment">#      a    b     c     d</span></span><br><span class="line"><span class="comment"># 0  0.0  1.0   2.0   3.0</span></span><br><span class="line"><span class="comment"># 1  4.0  5.0   6.0   7.0</span></span><br><span class="line"><span class="comment"># 2  8.0  9.0  10.0  11.0# </span></span><br><span class="line"><span class="built_in">print</span>(df2)</span><br><span class="line"><span class="comment">#       a     b     c     d     e</span></span><br><span class="line"><span class="comment"># 0   0.0   1.0   2.0   3.0   4.0</span></span><br><span class="line"><span class="comment"># 1   5.0   NaN   7.0   8.0   9.0</span></span><br><span class="line"><span class="comment"># 2  10.0  11.0  12.0  13.0  14.0</span></span><br><span class="line"><span class="comment"># 3  15.0  16.0  17.0  18.0  19.0</span></span><br></pre></td></tr></table></figure>

<p>将它们相加时，没有重叠的位置就会产生NA值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df1+df2)</span><br><span class="line"><span class="comment">#       a     b     c     d   e</span></span><br><span class="line"><span class="comment"># 0   0.0   2.0   4.0   6.0 NaN</span></span><br><span class="line"><span class="comment"># 1   9.0  11.0  13.0  15.0 NaN</span></span><br><span class="line"><span class="comment"># 2  18.0  20.0  22.0  24.0 NaN</span></span><br><span class="line"><span class="comment"># 3   NaN   NaN   NaN   NaN NaN</span></span><br></pre></td></tr></table></figure>

<p>使用df1的add方法，传入df2以及一个fill_value参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df1.add(df2, fill_value=<span class="number">0</span>))</span><br><span class="line"><span class="comment">#       a     b     c     d     e</span></span><br><span class="line"><span class="comment"># 0   0.0   2.0   4.0   6.0   4.0</span></span><br><span class="line"><span class="comment"># 1   9.0  11.0  13.0  15.0   9.0</span></span><br><span class="line"><span class="comment"># 2  18.0  20.0  22.0  24.0  14.0</span></span><br><span class="line"><span class="comment"># 3  15.0  16.0  17.0  18.0  19.0</span></span><br></pre></td></tr></table></figure>

<p>表5-5列出了Series和DataFrame的算术方法。它们每个都有一个副本，以字母r开头，它会翻转参数。因此这两个语句是等价的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">1</span> / df1)</span><br><span class="line"><span class="comment">#        a         b         c         d</span></span><br><span class="line"><span class="comment"># 0    inf  1.000000  0.500000  0.333333</span></span><br><span class="line"><span class="comment"># 1  0.250  0.200000  0.166667  0.142857</span></span><br><span class="line"><span class="comment"># 2  0.125  0.111111  0.100000  0.090909</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df1.rdiv(<span class="number">1</span>)) </span><br><span class="line"><span class="comment">#        a         b         c         d</span></span><br><span class="line"><span class="comment"># 0    inf  1.000000  0.500000  0.333333</span></span><br><span class="line"><span class="comment"># 1  0.250  0.200000  0.166667  0.142857</span></span><br><span class="line"><span class="comment"># 2  0.125  0.111111  0.100000  0.090909</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-16857a1021f98d1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表5-5 灵活的算术方法"></p>
<p>在对Series或DataFrame重新索引时，也可以指定一个填充值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df1.reindex(columns=df2.columns, fill_value=<span class="number">0</span>))</span><br><span class="line"><span class="comment">#      a    b     c     d  e</span></span><br><span class="line"><span class="comment"># 0  0.0  1.0   2.0   3.0  0</span></span><br><span class="line"><span class="comment"># 1  4.0  5.0   6.0   7.0  0</span></span><br><span class="line"><span class="comment"># 2  8.0  9.0  10.0  11.0  0</span></span><br></pre></td></tr></table></figure>

<h3 id="DataFrame和Series之间的运算"><a href="#DataFrame和Series之间的运算" class="headerlink" title="DataFrame和Series之间的运算"></a>DataFrame和Series之间的运算</h3><p>跟不同维度的NumPy数组一样，DataFrame和Series之间算术运算也是有明确规定的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12.</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line"><span class="comment"># [[ 0.  1.  2.  3.]</span></span><br><span class="line"><span class="comment">#  [ 4.  5.  6.  7.]</span></span><br><span class="line"><span class="comment">#  [ 8.  9. 10. 11.]]</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># [0. 1. 2. 3.]</span></span><br><span class="line"><span class="built_in">print</span>(arr-arr[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># [[0. 0. 0. 0.]</span></span><br><span class="line"><span class="comment">#  [4. 4. 4. 4.]</span></span><br><span class="line"><span class="comment">#  [8. 8. 8. 8.]]</span></span><br></pre></td></tr></table></figure>

<p>当我们从arr减去arr[0]，每一行都会执行这个操作。这就叫做广播（broadcasting）。DataFrame和Series之间的运算差不多也是如此：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),columns=<span class="built_in">list</span>(<span class="string">&#x27;bde&#x27;</span>),index=[<span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>])</span><br><span class="line">series = frame.iloc[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#           b     d     e</span></span><br><span class="line"><span class="comment"># Utah    0.0   1.0   2.0</span></span><br><span class="line"><span class="comment"># Ohio    3.0   4.0   5.0</span></span><br><span class="line"><span class="comment"># Texas   6.0   7.0   8.0</span></span><br><span class="line"><span class="comment"># Oregon  9.0  10.0  11.0 </span></span><br><span class="line"><span class="built_in">print</span>(series)</span><br><span class="line"><span class="comment"># b    0.0</span></span><br><span class="line"><span class="comment"># d    1.0</span></span><br><span class="line"><span class="comment"># e    2.0</span></span><br><span class="line"><span class="comment"># Name: Utah, dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>默认情况下，DataFrame和Series之间的算术运算会将Series的索引匹配到DataFrame的列，然后沿着行一直向下广播：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(frame - series)</span><br><span class="line"><span class="comment">#           b    d    e</span></span><br><span class="line"><span class="comment"># Utah    0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># Ohio    3.0  3.0  3.0</span></span><br><span class="line"><span class="comment"># Texas   6.0  6.0  6.0</span></span><br><span class="line"><span class="comment"># Oregon  9.0  9.0  9.0</span></span><br></pre></td></tr></table></figure>

<p>如果某个索引值在DataFrame的列或Series的索引中找不到，则参与运算的两个对象就会被重新索引以形成并集：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">series2 = pd.Series(<span class="built_in">range</span>(<span class="number">3</span>), index=[<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(frame + series2)</span><br><span class="line"><span class="comment">#           b   d     e   f</span></span><br><span class="line"><span class="comment"># Utah    0.0 NaN   3.0 NaN</span></span><br><span class="line"><span class="comment"># Ohio    3.0 NaN   6.0 NaN</span></span><br><span class="line"><span class="comment"># Texas   6.0 NaN   9.0 NaN</span></span><br><span class="line"><span class="comment"># Oregon  9.0 NaN  12.0 NaN</span></span><br></pre></td></tr></table></figure>

<p>如果你希望匹配行且在列上广播，则必须使用算术运算方法。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">12.</span>).reshape((<span class="number">4</span>, <span class="number">3</span>)),columns=<span class="built_in">list</span>(<span class="string">&#x27;bde&#x27;</span>),index=[<span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>])</span><br><span class="line">series3 = frame[<span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#           b     d     e</span></span><br><span class="line"><span class="comment"># Utah    0.0   1.0   2.0</span></span><br><span class="line"><span class="comment"># Ohio    3.0   4.0   5.0</span></span><br><span class="line"><span class="comment"># Texas   6.0   7.0   8.0</span></span><br><span class="line"><span class="comment"># Oregon  9.0  10.0  11.0</span></span><br><span class="line"><span class="built_in">print</span>(series3)</span><br><span class="line"><span class="comment"># Utah       1.0</span></span><br><span class="line"><span class="comment"># Ohio       4.0</span></span><br><span class="line"><span class="comment"># Texas      7.0</span></span><br><span class="line"><span class="comment"># Oregon    10.0</span></span><br><span class="line"><span class="comment"># Name: d, dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(frame.sub(series3,axis=<span class="string">&#x27;index&#x27;</span>))</span><br><span class="line"><span class="comment">#           b    d    e</span></span><br><span class="line"><span class="comment"># Utah   -1.0  0.0  1.0</span></span><br><span class="line"><span class="comment"># Ohio   -1.0  0.0  1.0</span></span><br><span class="line"><span class="comment"># Texas  -1.0  0.0  1.0</span></span><br><span class="line"><span class="comment"># Oregon -1.0  0.0  1.0</span></span><br></pre></td></tr></table></figure>

<p>传入的轴号就是希望匹配的轴。在本例中，我们的目的是匹配DataFrame的行索引（axis&#x3D;’index’ or axis&#x3D;0）并进行广播。</p>
<h3 id="函数应用和映射"><a href="#函数应用和映射" class="headerlink" title="函数应用和映射"></a>函数应用和映射</h3><p>NumPy的ufuncs（元素级数组方法）也可用于操作pandas对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">frame = pd.DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), columns=<span class="built_in">list</span>(<span class="string">&#x27;bde&#x27;</span>), index=[<span class="string">&#x27;Utah&#x27;</span>, <span class="string">&#x27;Ohio&#x27;</span>, <span class="string">&#x27;Texas&#x27;</span>, <span class="string">&#x27;Oregon&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#                b         d         e</span></span><br><span class="line"><span class="comment"># Utah   -1.959410 -0.291247 -0.618529</span></span><br><span class="line"><span class="comment"># Ohio    1.166250  0.450708 -0.899463</span></span><br><span class="line"><span class="comment"># Texas  -0.056786 -0.205335 -1.748267</span></span><br><span class="line"><span class="comment"># Oregon -0.439196  2.333779  0.424394</span></span><br><span class="line"><span class="built_in">print</span>(np.<span class="built_in">abs</span>(frame))</span><br><span class="line"><span class="comment">#                b         d         e</span></span><br><span class="line"><span class="comment"># Utah    1.959410  0.291247  0.618529</span></span><br><span class="line"><span class="comment"># Ohio    1.166250  0.450708  0.899463</span></span><br><span class="line"><span class="comment"># Texas   0.056786  0.205335  1.748267</span></span><br><span class="line"><span class="comment"># Oregon  0.439196  2.333779  0.424394</span></span><br></pre></td></tr></table></figure>

<p>另一个常见的操作是，将函数应用到由各列或行所形成的一维数组上。DataFrame的apply方法即可实现此功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="keyword">lambda</span> x: x.<span class="built_in">max</span>() - x.<span class="built_in">min</span>()</span><br><span class="line"><span class="built_in">print</span>(frame.apply(f))</span><br><span class="line"><span class="comment"># b    1.802165</span></span><br><span class="line"><span class="comment"># d    1.684034</span></span><br><span class="line"><span class="comment"># e    2.689627</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>这里的函数f，计算了一个Series的最大值和最小值的差，在frame的每列都执行了一次。结果是一个Series，使用frame的列作为索引。</p>
<p>如果传递axis&#x3D;’columns’到apply，这个函数会在每行执行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(frame.apply(f, axis=<span class="string">&#x27;columns&#x27;</span>))</span><br><span class="line"><span class="comment"># Utah      0.998382</span></span><br><span class="line"><span class="comment"># Ohio      2.521511</span></span><br><span class="line"><span class="comment"># Texas     0.676115</span></span><br><span class="line"><span class="comment"># Oregon    2.542656</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>许多最为常见的数组统计功能都被实现成DataFrame的方法（如sum和mean），因此无需使用apply方法。</p>
<p>元素级的Python函数也是可以用的。假如你想得到frame中各个浮点值的格式化字符串，使用applymap即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">format</span> = <span class="keyword">lambda</span> x: <span class="string">&#x27;%.2f&#x27;</span> % x</span><br><span class="line"><span class="built_in">print</span>(frame.applymap(<span class="built_in">format</span>))</span><br><span class="line"><span class="comment">#             b     d      e</span></span><br><span class="line"><span class="comment"># Utah    -0.20  0.48  -0.52</span></span><br><span class="line"><span class="comment"># Ohio    -0.56  1.97   1.39</span></span><br><span class="line"><span class="comment"># Texas    0.09  0.28   0.77</span></span><br><span class="line"><span class="comment"># Oregon   1.25  1.01  -1.30</span></span><br></pre></td></tr></table></figure>

<p>之所以叫做applymap，是因为Series有一个用于应用元素级函数的map方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">format</span> = <span class="keyword">lambda</span> x: <span class="string">&#x27;%.2f&#x27;</span> % x</span><br><span class="line"><span class="built_in">print</span>(frame[<span class="string">&#x27;e&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">format</span>))</span><br><span class="line"><span class="comment"># Utah      -0.52</span></span><br><span class="line"><span class="comment"># Ohio       1.39</span></span><br><span class="line"><span class="comment"># Texas      0.77</span></span><br><span class="line"><span class="comment"># Oregon    -1.30</span></span><br><span class="line"><span class="comment"># Name: e, dtype: object</span></span><br></pre></td></tr></table></figure>

<h3 id="排序和排名"><a href="#排序和排名" class="headerlink" title="排序和排名"></a>排序和排名</h3><h4 id="sort-index"><a href="#sort-index" class="headerlink" title="sort_index()"></a>sort_index()</h4><p>根据条件对数据集排序（sorting）也是一种重要的内置运算。要对行或列索引进行排序（按字典顺序），可使用sort_index方法，它将返回一个已排序的新对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">obj = pd.Series(<span class="built_in">range</span>(<span class="number">4</span>), index=[<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj.sort_index())</span><br><span class="line"><span class="comment"># a    1</span></span><br><span class="line"><span class="comment"># b    2</span></span><br><span class="line"><span class="comment"># c    3</span></span><br><span class="line"><span class="comment"># d    0</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>对于DataFrame，则可以根据任意一个轴上的索引进行排序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">frame = pd.DataFrame(np.arange(<span class="number">8</span>).reshape((<span class="number">2</span>, <span class="number">4</span>)),index=[<span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;one&#x27;</span>],columns=[<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#        d  a  b  c</span></span><br><span class="line"><span class="comment"># three  0  1  2  3</span></span><br><span class="line"><span class="comment"># one    4  5  6  7</span></span><br><span class="line"><span class="built_in">print</span>(frame.sort_index())</span><br><span class="line"><span class="comment">#        d  a  b  c</span></span><br><span class="line"><span class="comment"># one    4  5  6  7</span></span><br><span class="line"><span class="comment"># three  0  1  2  3</span></span><br><span class="line"><span class="built_in">print</span>(frame.sort_index(axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment">#        a  b  c  d</span></span><br><span class="line"><span class="comment"># three  1  2  3  0</span></span><br><span class="line"><span class="comment"># one    5  6  7  4</span></span><br></pre></td></tr></table></figure>

<h4 id="ascending"><a href="#ascending" class="headerlink" title="ascending"></a>ascending</h4><p>数据默认是按升序排序的，但也可以降序排序：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">frame.sort_index(axis=<span class="number">1</span>, ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="comment">#        d  c  b  a</span></span><br><span class="line"><span class="comment"># three  0  3  2  1</span></span><br><span class="line"><span class="comment"># one    4  7  6  5</span></span><br></pre></td></tr></table></figure>

<h4 id="sort-values"><a href="#sort-values" class="headerlink" title="sort_values()"></a>sort_values()</h4><p>若要按值对Series进行排序，可使用其sort_values方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">4</span>, <span class="number">7</span>, -<span class="number">3</span>, <span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(obj.sort_values())</span><br><span class="line"><span class="comment"># 2   -3</span></span><br><span class="line"><span class="comment"># 3    2</span></span><br><span class="line"><span class="comment"># 0    4</span></span><br><span class="line"><span class="comment"># 1    7</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>在排序时，任何缺失值默认都会被放到Series的末尾：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">4</span>, np.nan, <span class="number">7</span>, np.nan, -<span class="number">3</span>, <span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(obj.sort_values())</span><br><span class="line"><span class="comment"># 4   -3.0</span></span><br><span class="line"><span class="comment"># 5    2.0</span></span><br><span class="line"><span class="comment"># 0    4.0</span></span><br><span class="line"><span class="comment"># 2    7.0</span></span><br><span class="line"><span class="comment"># 1    NaN</span></span><br><span class="line"><span class="comment"># 3    NaN</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>当排序一个DataFrame时，你可能希望根据一个或多个列中的值进行排序。将一个或多个列的名字传递给sort_values的by选项即可达到该目的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">frame = pd.DataFrame(&#123;<span class="string">&#x27;b&#x27;</span>: [<span class="number">4</span>, <span class="number">7</span>, -<span class="number">3</span>, <span class="number">2</span>], <span class="string">&#x27;a&#x27;</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]&#125;)</span><br><span class="line"><span class="built_in">print</span>(frame)</span><br><span class="line"><span class="comment">#    a  b</span></span><br><span class="line"><span class="comment"># 0  0  4</span></span><br><span class="line"><span class="comment"># 1  1  7</span></span><br><span class="line"><span class="comment"># 2  0 -3</span></span><br><span class="line"><span class="comment"># 3  1  2</span></span><br><span class="line"><span class="built_in">print</span>(frame.sort_values(by=<span class="string">&#x27;b&#x27;</span>))</span><br><span class="line"><span class="comment">#    a  b</span></span><br><span class="line"><span class="comment"># 2  0 -3</span></span><br><span class="line"><span class="comment"># 3  1  2</span></span><br><span class="line"><span class="comment"># 0  0  4</span></span><br><span class="line"><span class="comment"># 1  1  7</span></span><br></pre></td></tr></table></figure>

<p>要根据多个列进行排序，传入名称的列表即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">frame.sort_values(by=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="comment">#    a  b</span></span><br><span class="line"><span class="comment"># 2  0 -3</span></span><br><span class="line"><span class="comment"># 0  0  4</span></span><br><span class="line"><span class="comment"># 3  1  2</span></span><br><span class="line"><span class="comment"># 1  1  7</span></span><br></pre></td></tr></table></figure>

<p>接下来介绍Series和DataFrame的rank方法。默认情况下，rank是通过“为各组分配一个平均排名”的方式破坏平级关系的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series([<span class="number">7</span>, -<span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(obj.rank())</span><br><span class="line"><span class="comment"># 0    6.5</span></span><br><span class="line"><span class="comment"># 1    1.0</span></span><br><span class="line"><span class="comment"># 2    6.5</span></span><br><span class="line"><span class="comment"># 3    4.5</span></span><br><span class="line"><span class="comment"># 4    3.0</span></span><br><span class="line"><span class="comment"># 5    2.0</span></span><br><span class="line"><span class="comment"># 6    4.5</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>如果两个数值相同，排名是它们的均值，例如数值7在Series中排6、7，平均值为6.5。</p>
<p>也可以根据值在原数据中出现的顺序给出排名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(obj.rank(method=<span class="string">&#x27;first&#x27;</span>))</span><br><span class="line"><span class="comment"># 0    6.0</span></span><br><span class="line"><span class="comment"># 1    1.0</span></span><br><span class="line"><span class="comment"># 2    7.0</span></span><br><span class="line"><span class="comment"># 3    4.0</span></span><br><span class="line"><span class="comment"># 4    3.0</span></span><br><span class="line"><span class="comment"># 5    2.0</span></span><br><span class="line"><span class="comment"># 6    5.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>这里，条目0和2没有使用平均排名6.5，它们被设成了6和7，因为数据中标签0位于标签2的前面。</p>
<p>你也可以按降序进行排名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(obj.rank(ascending=<span class="literal">False</span>, method=<span class="string">&#x27;max&#x27;</span>))</span><br><span class="line"><span class="comment"># 0    2.0</span></span><br><span class="line"><span class="comment"># 1    7.0</span></span><br><span class="line"><span class="comment"># 2    2.0</span></span><br><span class="line"><span class="comment"># 3    4.0</span></span><br><span class="line"><span class="comment"># 4    5.0</span></span><br><span class="line"><span class="comment"># 5    6.0</span></span><br><span class="line"><span class="comment"># 6    4.0</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-7edfab5b4a147581.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表5-6 排名时用于破坏平级关系的方法"></p>
<h3 id="带有重复标签的轴索引"><a href="#带有重复标签的轴索引" class="headerlink" title="带有重复标签的轴索引"></a>带有重复标签的轴索引</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series(<span class="built_in">range</span>(<span class="number">5</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># a    0</span></span><br><span class="line"><span class="comment"># a    1</span></span><br><span class="line"><span class="comment"># b    2</span></span><br><span class="line"><span class="comment"># b    3</span></span><br><span class="line"><span class="comment"># c    4</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>索引的is_unique属性可以告诉你它的值是否是唯一的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(obj.index.is_unique)</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>

<p>对于带有重复值的索引，数据选取的行为将会有些不同。如果某个索引对应多个值，则返回一个Series；而对应单个值的，则返回一个标量值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(obj[<span class="string">&#x27;a&#x27;</span>])</span><br><span class="line"><span class="comment"># a    0</span></span><br><span class="line"><span class="comment"># a    1</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br><span class="line"><span class="built_in">print</span>(obj[<span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<p>这样会使代码变复杂，因为索引的输出类型会根据标签是否有重复发生变化。</p>
<p>对DataFrame的行进行索引时也是如此：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">4</span>, <span class="number">3</span>), index=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"><span class="comment">#           0         1         2</span></span><br><span class="line"><span class="comment"># a  0.274992  0.228913  1.352917</span></span><br><span class="line"><span class="comment"># a  0.886429 -2.001637 -0.371843</span></span><br><span class="line"><span class="comment"># b  1.669025 -0.438570 -0.539741</span></span><br><span class="line"><span class="comment"># b  0.476985  3.248944 -1.021228</span></span><br><span class="line"><span class="built_in">print</span>(df.loc[<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="comment">#           0         1         2</span></span><br><span class="line"><span class="comment"># b  1.669025 -0.438570 -0.539741</span></span><br><span class="line"><span class="comment"># b  0.476985  3.248944 -1.021228</span></span><br></pre></td></tr></table></figure>

<h2 id="汇总和计算描述统计"><a href="#汇总和计算描述统计" class="headerlink" title="汇总和计算描述统计"></a>汇总和计算描述统计</h2><p>pandas对象拥有一组常用的数学和统计方法。它们大部分都属于约简和汇总统计，用于从Series中提取单个值（如sum或mean）或从DataFrame的行或列中提取一个Series。跟对应的NumPy数组方法相比，它们都是基于没有缺失数据的假设而构建的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame([[<span class="number">1.4</span>,np.nan],[<span class="number">7.1</span>,-<span class="number">4.5</span>],[np.nan,np.nan],[<span class="number">0.75</span>,-<span class="number">1.3</span>]],index=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>],columns=[<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;two&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"><span class="comment">#     one  two</span></span><br><span class="line"><span class="comment"># a  1.40  NaN</span></span><br><span class="line"><span class="comment"># b  7.10 -4.5</span></span><br><span class="line"><span class="comment"># c   NaN  NaN</span></span><br><span class="line"><span class="comment"># d  0.75 -1.3</span></span><br></pre></td></tr></table></figure>

<h3 id="sum"><a href="#sum" class="headerlink" title="sum()"></a>sum()</h3><p>调用DataFrame的sum方法将会返回一个含有列的和的Series：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.<span class="built_in">sum</span>())</span><br><span class="line"><span class="comment"># one    9.25</span></span><br><span class="line"><span class="comment"># two   -5.80</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<h3 id="skipna"><a href="#skipna" class="headerlink" title="skipna"></a>skipna</h3><p>NA值会自动被排除，除非整个切片（这里指的是行或列）都是NA。通过skipna选项可以禁用该功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.mean(axis=<span class="string">&#x27;columns&#x27;</span>))</span><br><span class="line"><span class="comment"># a    1.400</span></span><br><span class="line"><span class="comment"># b    1.300</span></span><br><span class="line"><span class="comment"># c      NaN</span></span><br><span class="line"><span class="comment"># d   -0.275</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"><span class="built_in">print</span>(df.mean(axis=<span class="string">&#x27;columns&#x27;</span>, skipna=<span class="literal">False</span>))</span><br><span class="line"><span class="comment"># a      NaN</span></span><br><span class="line"><span class="comment"># b    1.300</span></span><br><span class="line"><span class="comment"># c      NaN</span></span><br><span class="line"><span class="comment"># d   -0.275</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>表5-7列出了这些约简方法的常用选项。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-af35e3809278410e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="idxmax"><a href="#idxmax" class="headerlink" title="idxmax()"></a>idxmax()</h3><p>有些方法（如idxmin和idxmax）返回的是间接统计（比如达到最小值或最大值的索引）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.idxmax())</span><br><span class="line"><span class="comment"># one    b</span></span><br><span class="line"><span class="comment"># two    d</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<h3 id="cumsum"><a href="#cumsum" class="headerlink" title="cumsum()"></a>cumsum()</h3><p>另一些方法则是累计型的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.cumsum())</span><br><span class="line"><span class="comment">#     one  two</span></span><br><span class="line"><span class="comment"># a  1.40  NaN</span></span><br><span class="line"><span class="comment"># b  8.50 -4.5</span></span><br><span class="line"><span class="comment"># c   NaN  NaN</span></span><br><span class="line"><span class="comment"># d  9.25 -5.8</span></span><br></pre></td></tr></table></figure>

<h3 id="describe"><a href="#describe" class="headerlink" title="describe()"></a>describe()</h3><p>还有一种方法，它既不是约简型也不是累计型。describe就是一个例子，它用于一次性产生多个汇总统计：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(df.describe())</span><br><span class="line"><span class="comment">#             one       two</span></span><br><span class="line"><span class="comment"># count  3.000000  2.000000</span></span><br><span class="line"><span class="comment"># mean   3.083333 -2.900000</span></span><br><span class="line"><span class="comment"># std    3.493685  2.262742</span></span><br><span class="line"><span class="comment"># min    0.750000 -4.500000</span></span><br><span class="line"><span class="comment"># 25%    1.075000 -3.700000</span></span><br><span class="line"><span class="comment"># 50%    1.400000 -2.900000</span></span><br><span class="line"><span class="comment"># 75%    4.250000 -2.100000</span></span><br><span class="line"><span class="comment"># max    7.100000 -1.300000</span></span><br></pre></td></tr></table></figure>

<p>对于非数值型数据，describe会产生另外一种汇总统计：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>] * <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 0    a</span></span><br><span class="line"><span class="comment"># 1    a</span></span><br><span class="line"><span class="comment"># 2    b</span></span><br><span class="line"><span class="comment"># 3    c</span></span><br><span class="line"><span class="comment"># 4    a</span></span><br><span class="line"><span class="comment"># 5    a</span></span><br><span class="line"><span class="comment"># 6    b</span></span><br><span class="line"><span class="comment"># 7    c</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line"><span class="built_in">print</span>(obj.describe())</span><br><span class="line"><span class="comment"># count     8</span></span><br><span class="line"><span class="comment"># unique    3</span></span><br><span class="line"><span class="comment"># top       a</span></span><br><span class="line"><span class="comment"># freq      4</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<h3 id="unique"><a href="#unique" class="headerlink" title="unique()"></a>unique()</h3><p>它可以得到Series中的唯一值数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj.unique())</span><br><span class="line"><span class="comment"># [&#x27;c&#x27; &#x27;a&#x27; &#x27;d&#x27; &#x27;b&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(obj.nunique())</span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<p>返回的唯一值是未排序的，如果需要的话，可以对结果再次进行排序（uniques.sort()）。</p>
<h3 id="nunique"><a href="#nunique" class="headerlink" title="nunique()"></a>nunique()</h3><p>计算指定轴中不同元素的数量。</p>
<p><code>Series.nunique(dropna=True)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">7</span>])</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment"># 0    1</span></span><br><span class="line"><span class="comment"># 1    3</span></span><br><span class="line"><span class="comment"># 2    5</span></span><br><span class="line"><span class="comment"># 3    7</span></span><br><span class="line"><span class="comment"># 4    7</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br><span class="line"><span class="built_in">print</span>(s.nunique())</span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<p><code>DataFrame.nunique(axis=0, dropna=True)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;A&#x27;</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], <span class="string">&#x27;B&#x27;</span>: [<span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>]&#125;)</span><br><span class="line"><span class="built_in">print</span>(df)</span><br><span class="line"><span class="comment">#    A  B</span></span><br><span class="line"><span class="comment"># 0  4  4</span></span><br><span class="line"><span class="comment"># 1  5  1</span></span><br><span class="line"><span class="comment"># 2  6  1</span></span><br><span class="line">df.nunique()</span><br><span class="line"><span class="comment"># A    3</span></span><br><span class="line"><span class="comment"># B    2</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df.nunique(axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 0    1</span></span><br><span class="line"><span class="comment"># 1    2</span></span><br><span class="line"><span class="comment"># 2    2</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<h3 id="value-counts"><a href="#value-counts" class="headerlink" title="value_counts()"></a>value_counts()</h3><p>相似的，value_counts用于计算一个Series中各值出现的频率：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(obj.value_counts())</span><br><span class="line"><span class="comment"># c    3</span></span><br><span class="line"><span class="comment"># a    3</span></span><br><span class="line"><span class="comment"># b    2</span></span><br><span class="line"><span class="comment"># d    1</span></span><br><span class="line"><span class="comment"># dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>为了便于查看，结果Series是按值频率降序排列的。value_counts还是一个顶级pandas方法，可用于任何数组或序列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(pd.value_counts(obj.values, sort=<span class="literal">False</span>))</span><br><span class="line"><span class="comment"># c    3</span></span><br><span class="line"><span class="comment"># a    3</span></span><br><span class="line"><span class="comment"># d    1</span></span><br><span class="line"><span class="comment"># b    2</span></span><br><span class="line"><span class="comment"># Name: count, dtype: int64</span></span><br></pre></td></tr></table></figure>

<p>isin用于判断矢量化集合的成员资格，可用于过滤Series中或DataFrame列中数据的子集：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">obj = pd.Series([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(obj)</span><br><span class="line"><span class="comment"># 0    c</span></span><br><span class="line"><span class="comment"># 1    a</span></span><br><span class="line"><span class="comment"># 2    d</span></span><br><span class="line"><span class="comment"># 3    a</span></span><br><span class="line"><span class="comment"># 4    a</span></span><br><span class="line"><span class="comment"># 5    b</span></span><br><span class="line"><span class="comment"># 6    b</span></span><br><span class="line"><span class="comment"># 7    c</span></span><br><span class="line"><span class="comment"># 8    c</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line">mask = obj.isin([<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(mask)</span><br><span class="line"><span class="comment"># 0     True</span></span><br><span class="line"><span class="comment"># 1    False</span></span><br><span class="line"><span class="comment"># 2    False</span></span><br><span class="line"><span class="comment"># 3    False</span></span><br><span class="line"><span class="comment"># 4    False</span></span><br><span class="line"><span class="comment"># 5     True</span></span><br><span class="line"><span class="comment"># 6     True</span></span><br><span class="line"><span class="comment"># 7     True</span></span><br><span class="line"><span class="comment"># 8     True</span></span><br><span class="line"><span class="comment"># dtype: bool</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj[mask])</span><br><span class="line"><span class="comment"># 0    c</span></span><br><span class="line"><span class="comment"># 5    b</span></span><br><span class="line"><span class="comment"># 6    b</span></span><br><span class="line"><span class="comment"># 7    c</span></span><br><span class="line"><span class="comment"># 8    c</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<p>与isin类似的是Index.get_indexer方法，它可以给你一个索引数组，从可能包含重复值的数组到另一个不同值的数组：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">to_match = pd.Series([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>])</span><br><span class="line">unique_vals = pd.Series([<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(pd.Index(unique_vals).get_indexer(to_match))</span><br><span class="line"><span class="comment"># [0 2 1 1 0 2]</span></span><br></pre></td></tr></table></figure>

<p>表5-9给出了这几个方法的一些参考信息。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-b53c4a9d65a2db32.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表5-9 唯一值、值计数、成员资格方法"></p>
<h3 id="统计函数一览表"><a href="#统计函数一览表" class="headerlink" title="统计函数一览表"></a>统计函数一览表</h3><table>
<thead>
<tr>
<th><strong>函数</strong></th>
<th>公式</th>
<th><strong>含义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>describe()</td>
<td>DataFrame.describe(percentiles&#x3D;None, include&#x3D;None, exclude&#x3D;None)</td>
<td>描述性统计（一次性返回多个统计结果）</td>
</tr>
<tr>
<td>min()</td>
<td>DataFrame.min(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False, **kwargs)</td>
<td>计算最小值</td>
</tr>
<tr>
<td>max()</td>
<td>DataFrame.max(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False, **kwargs)</td>
<td>计算最大值</td>
</tr>
<tr>
<td>sum()</td>
<td>DataFrame.sum(axis&#x3D;None, skipna&#x3D;True, numeric_only&#x3D;False, min_count&#x3D;0, **kwargs)</td>
<td>求和</td>
</tr>
<tr>
<td><strong>mean()</strong></td>
<td>DataFrame.mean(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False, **kwargs)</td>
<td>计算平均值</td>
</tr>
<tr>
<td>count()</td>
<td>DataFrame.count(axis&#x3D;0, <em>numeric_only&#x3D;False</em>)</td>
<td>计数（统计非缺失元素的个数）</td>
</tr>
<tr>
<td>size</td>
<td>DataFrame.size</td>
<td>计数（统计所有元素的个数）</td>
</tr>
<tr>
<td><strong>median()</strong></td>
<td>DataFrame.median(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False, **kwargs)</td>
<td>计算中位数</td>
</tr>
<tr>
<td>var()</td>
<td>DataFrame.var(axis&#x3D;None, skipna&#x3D;True, ddof&#x3D;1, numeric_only&#x3D;False, **kwargs)</td>
<td>计算方差</td>
</tr>
<tr>
<td>std()</td>
<td>DataFrame.std(axis&#x3D;None, skipna&#x3D;True, ddof&#x3D;1, numeric_only&#x3D;False, **kwargs)</td>
<td>计算标准差</td>
</tr>
<tr>
<td>quantile()</td>
<td>DataFrame.quantile(q&#x3D;0.5, axis&#x3D;0, numeric_only&#x3D;False, interpolation&#x3D;’linear’, method&#x3D;’single’)</td>
<td>计算任意分位数，如四分位数q&#x3D;0.25</td>
</tr>
<tr>
<td>cov()</td>
<td>DataFrame.cov(min_periods&#x3D;None, ddof&#x3D;1, numeric_only&#x3D;False)</td>
<td>计算协方差</td>
</tr>
<tr>
<td>corr()</td>
<td>DataFrame.corr(method&#x3D;’pearson’, min_periods&#x3D;1, numeric_only&#x3D;False)</td>
<td>计算相关系数</td>
</tr>
<tr>
<td>skew()</td>
<td>DataFrame.skew(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False, **kwargs)</td>
<td>计算偏度</td>
</tr>
<tr>
<td>kurt()</td>
<td>DataFrame.kurt(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False, **kwargs)</td>
<td>计算峰度</td>
</tr>
<tr>
<td><strong>mode()</strong></td>
<td>DataFrame.mode(axis&#x3D;0, numeric_only&#x3D;False, dropna&#x3D;True)</td>
<td>计算众数</td>
</tr>
<tr>
<td>groupby()</td>
<td>DataFrame.groupby(by&#x3D;None, axis&#x3D;0, level&#x3D;None, as_index&#x3D;True, sort&#x3D;True, group_keys&#x3D;True, observed&#x3D;False, dropna&#x3D;True)</td>
<td>分组</td>
</tr>
<tr>
<td>aggregate()</td>
<td>DataFrame.aggregate(func&#x3D;None, axis&#x3D;0, *args, **kwargs)</td>
<td>聚合运算（可以自定义统计函数）</td>
</tr>
<tr>
<td>idxmin()</td>
<td>DataFrame.idxmin(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False)</td>
<td>寻找最小值所在位置</td>
</tr>
<tr>
<td>idxmax()</td>
<td>DataFrame.idxmax(axis&#x3D;0, skipna&#x3D;True, numeric_only&#x3D;False)</td>
<td>寻找最大值所在位置</td>
</tr>
<tr>
<td>any()</td>
<td>DataFrame.any(*, axis&#x3D;0, bool_only&#x3D;None, skipna&#x3D;True, **kwargs)</td>
<td>等价于逻辑“或”</td>
</tr>
<tr>
<td>all()</td>
<td>DataFrame.all(axis&#x3D;0, bool_only&#x3D;None, skipna&#x3D;True, **kwargs)</td>
<td>等价于逻辑“与”</td>
</tr>
<tr>
<td><strong>value_counts()</strong></td>
<td>DataFrame.value_counts(subset&#x3D;None, normalize&#x3D;False, sort&#x3D;True, ascending&#x3D;False, dropna&#x3D;True)</td>
<td>频次统计</td>
</tr>
<tr>
<td>cumsum()</td>
<td>DataFrame.cumsum(axis&#x3D;None, skipna&#x3D;True, *args, **kwargs)</td>
<td>运算累计和</td>
</tr>
<tr>
<td>cumprod()</td>
<td>DataFrame.cumprod(axis&#x3D;None, skipna&#x3D;True, *args, **kwargs)</td>
<td>运算累计积</td>
</tr>
</tbody></table>
<h2 id="数据加载与存储"><a href="#数据加载与存储" class="headerlink" title="数据加载与存储"></a>数据加载与存储</h2><h3 id="Excel文件"><a href="#Excel文件" class="headerlink" title="Excel文件"></a>Excel文件</h3><p>pandas的ExcelFile类或pandas.read_excel函数支持读取存储在Excel 2003（或更高版本）中的表格型数据。这两个工具分别使用扩展包xlrd和openpyxl读取XLS和XLSX文件。你可以用pip或conda安装它们。</p>
<p>要使用ExcelFile，通过传递xls或xlsx路径创建一个实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">104</span>]: xlsx = pd.ExcelFile(<span class="string">&#x27;examples/ex1.xlsx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>存储在表单中的数据可以read_excel读取到DataFrame：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">105</span>]: pd.read_excel(xlsx, <span class="string">&#x27;Sheet1&#x27;</span>)</span><br><span class="line">Out[<span class="number">105</span>]: </span><br><span class="line">   a   b   c   d message</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<p>如果要读取一个文件中的多个表单，创建ExcelFile会更快，但你也可以将文件名传递到pandas.read_excel：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">106</span>]: frame = pd.read_excel(<span class="string">&#x27;examples/ex1.xlsx&#x27;</span>, <span class="string">&#x27;Sheet1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">107</span>]: frame</span><br><span class="line">Out[<span class="number">107</span>]: </span><br><span class="line">   a   b   c   d message</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<h4 id="to-excel"><a href="#to-excel" class="headerlink" title="to_excel"></a>to_excel</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件路径</span></span><br><span class="line">file_path = <span class="string">&#x27;E:/desktop/新建的空白文件.xlsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件内容</span></span><br><span class="line"><span class="comment"># df = pd.DataFrame()</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;id&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="string">&#x27;姓名&#x27;</span>:[<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存到文档</span></span><br><span class="line">df.to_excel(file_path)</span><br></pre></td></tr></table></figure>

<p>如果要将pandas数据写入为Excel格式，你必须首先创建一个ExcelWriter，然后使用pandas对象的to_excel方法将数据写入到其中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">108</span>]: writer = pd.ExcelWriter(<span class="string">&#x27;examples/ex2.xlsx&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">109</span>]: frame.to_excel(writer, <span class="string">&#x27;Sheet1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">110</span>]: writer.save()</span><br></pre></td></tr></table></figure>

<p>你还可以不使用ExcelWriter，而是传递文件的路径到to_excel：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">111</span>]: frame.to_excel(<span class="string">&#x27;examples/ex2.xlsx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="set-index"><a href="#set-index" class="headerlink" title="set_index"></a>set_index</h4><p><strong>设置索引</strong></p>
<p><code>DataFrame.set_index(keys, drop=True, append=False, inplace=False, verify_integrity=False)</code></p>
<p>参数:</p>
<ul>
<li>keys: 列名或列名的列表。</li>
<li>drop: 布尔值，如果为真，将删除用于索引的列。</li>
<li>append: 如果为真，将该列添加到现有的索引列中。</li>
<li>inplace: 在数据框架中进行更改，如果是真的。</li>
<li>verify_integrity: 检查新的索引列是否重复，如果是的话。</li>
</ul>
<p><strong>更改索引列</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件路径</span></span><br><span class="line">file_path = <span class="string">&#x27;E:/desktop/新建的空白文件.xlsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件内容</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;id&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="string">&#x27;姓名&#x27;</span>:[<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置id为索引列</span></span><br><span class="line">df = df.set_index(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存到文档</span></span><br><span class="line">df.to_excel(file_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="comment"># id 姓名</span></span><br><span class="line"><span class="comment"># 1 张三</span></span><br><span class="line"><span class="comment"># 2 李四</span></span><br><span class="line"><span class="comment"># 3 王五</span></span><br></pre></td></tr></table></figure>

<h3 id="CSV-文本文件"><a href="#CSV-文本文件" class="headerlink" title="CSV &amp; 文本文件"></a>CSV &amp; 文本文件</h3><h4 id="read-csv"><a href="#read-csv" class="headerlink" title="read_csv()"></a>read_csv()</h4><p><strong>常用参数</strong></p>
<ul>
<li><p><code>filepath_or_buffer</code>: 文件路径，URL或者具有read()方法的任何对象(比如可打开的文件)</p>
</li>
<li><p><code>sep</code>: str，默认分隔符为<code>,</code> , read_table()方法，分隔符为<code> \t</code></p>
</li>
<li><p><code>header</code>: 当选择默认值或<code>header=0</code>时，将首行设为列名。如果列名被传入明确值就令<code>header=None</code>。注意，当<code>header=0</code>时，即使列名被传参也会被覆盖。</p>
</li>
<li><p><code>names</code>: 列名列表的使用. 如果文件不包含列名，那么应该设置<code>header=None</code>。 列名列表中不允许有重复值。</p>
</li>
<li><p><code>index_col</code>: 索引的列号或列名，可以是一个字符串名称或者数字，也可以是一个分层索引。</p>
</li>
<li><p><code>skiprows</code>: 从文件开始处，需要跳过的行数或行号列表。</p>
</li>
<li><p>encoding: 文本编码，例如utf-8</p>
</li>
<li><p>nrows: 从文件开头处读入的行数</p>
</li>
</ul>
<p>首先我们来看一个以逗号分隔的（CSV）文本文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">8</span>]: !cat examples/ex1.csv</span><br><span class="line">a,b,c,d,message</span><br><span class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,hello</span><br><span class="line"><span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,world</span><br><span class="line"><span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,foo</span><br></pre></td></tr></table></figure>

<p>由于该文件以逗号分隔，所以我们可以使用read_csv将其读入一个DataFrame：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">9</span>]: df = pd.read_csv(<span class="string">&#x27;examples/ex1.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: df</span><br><span class="line">Out[<span class="number">10</span>]: </span><br><span class="line">   a   b   c   d message</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<h4 id="read-table"><a href="#read-table" class="headerlink" title="read_table()"></a>read_table()</h4><p>我们还可以使用read_table，并指定分隔符：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">11</span>]: pd.read_table(<span class="string">&#x27;examples/ex1.csv&#x27;</span>, sep=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">Out[<span class="number">11</span>]: </span><br><span class="line">   a   b   c   d message</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<p>并不是所有文件都有标题行。看看下面这个文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">12</span>]: !cat examples/ex2.csv</span><br><span class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,hello</span><br><span class="line"><span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,world</span><br><span class="line"><span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,foo</span><br></pre></td></tr></table></figure>

<h4 id="自定义行-列名"><a href="#自定义行-列名" class="headerlink" title="自定义行&#x2F;列名"></a>自定义行&#x2F;列名</h4><p>读入该文件的办法有两个。你可以让pandas为其分配默认的列名，也可以自己定义<strong>列名</strong><code>names</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: pd.read_csv(<span class="string">&#x27;examples/ex2.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">Out[<span class="number">13</span>]: </span><br><span class="line">   <span class="number">0</span>   <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>      <span class="number">4</span></span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>  hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>  world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>    foo</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: pd.read_csv(<span class="string">&#x27;examples/ex2.csv&#x27;</span>, names=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;message&#x27;</span>])</span><br><span class="line">Out[<span class="number">14</span>]: </span><br><span class="line">   a   b   c   d message</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<p>假设你希望将message列做成DataFrame的索引。你可以明确表示要将该列放到索引4的位置上，也可以通过<code>index_col</code>参数指定”message”：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">15</span>]: names = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;message&#x27;</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: pd.read_csv(<span class="string">&#x27;examples/ex2.csv&#x27;</span>, names=names, index_col=<span class="string">&#x27;message&#x27;</span>)</span><br><span class="line">Out[<span class="number">16</span>]: </span><br><span class="line">         a   b   c   d</span><br><span class="line">message               </span><br><span class="line">hello    <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">world    <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span></span><br><span class="line">foo      <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>如果希望将多个列做成一个层次化索引，只需传入由列编号或列名组成的列表即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">17</span>]: !cat examples/csv_mindex.csv</span><br><span class="line">key1,key2,value1,value2</span><br><span class="line">one,a,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">one,b,<span class="number">3</span>,<span class="number">4</span></span><br><span class="line">one,c,<span class="number">5</span>,<span class="number">6</span></span><br><span class="line">one,d,<span class="number">7</span>,<span class="number">8</span></span><br><span class="line">two,a,<span class="number">9</span>,<span class="number">10</span></span><br><span class="line">two,b,<span class="number">11</span>,<span class="number">12</span></span><br><span class="line">two,c,<span class="number">13</span>,<span class="number">14</span></span><br><span class="line">two,d,<span class="number">15</span>,<span class="number">16</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">18</span>]: parsed = pd.read_csv(<span class="string">&#x27;examples/csv_mindex.csv&#x27;</span>,</span><br><span class="line">   ....:                      index_col=[<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">19</span>]: parsed</span><br><span class="line">Out[<span class="number">19</span>]: </span><br><span class="line">           value1  value2</span><br><span class="line">key1 key2                </span><br><span class="line">one  a          <span class="number">1</span>       <span class="number">2</span></span><br><span class="line">     b          <span class="number">3</span>       <span class="number">4</span></span><br><span class="line">     c          <span class="number">5</span>       <span class="number">6</span></span><br><span class="line">     d          <span class="number">7</span>       <span class="number">8</span></span><br><span class="line">two  a          <span class="number">9</span>      <span class="number">10</span></span><br><span class="line">     b         <span class="number">11</span>      <span class="number">12</span></span><br><span class="line">     c         <span class="number">13</span>      <span class="number">14</span></span><br><span class="line">     d         <span class="number">15</span>      <span class="number">16</span></span><br></pre></td></tr></table></figure>

<p>有些情况下，有些表格可能不是用固定的分隔符去分隔字段的（比如空白符或其它模式）。看看下面这个文本文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">20</span>]: <span class="built_in">list</span>(<span class="built_in">open</span>(<span class="string">&#x27;examples/ex3.txt&#x27;</span>))</span><br><span class="line">Out[<span class="number">20</span>]: </span><br><span class="line">[<span class="string">&#x27;            A         B         C\n&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;aaa -0.264438 -1.026059 -0.619500\n&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;bbb  0.927272  0.302904 -0.032399\n&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;ccc -0.264273 -0.386314 -0.217601\n&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;ddd -0.871858 -0.348382  1.100491\n&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h4 id="自定义分隔符"><a href="#自定义分隔符" class="headerlink" title="自定义分隔符"></a>自定义分隔符</h4><p>虽然可以手动对数据进行规整，这里的字段是被数量不同的空白字符间隔开的。这种情况下，你可以传递一个正则表达式作为read_table的分隔符。可以用正则表达式表达为<code>\s+</code>，于是有：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">21</span>]: result = pd.read_table(<span class="string">&#x27;examples/ex3.txt&#x27;</span>, sep=<span class="string">&#x27;\s+&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: result</span><br><span class="line">Out[<span class="number">22</span>]: </span><br><span class="line">            A         B         C</span><br><span class="line">aaa -<span class="number">0.264438</span> -<span class="number">1.026059</span> -<span class="number">0.619500</span></span><br><span class="line">bbb  <span class="number">0.927272</span>  <span class="number">0.302904</span> -<span class="number">0.032399</span></span><br><span class="line">ccc -<span class="number">0.264273</span> -<span class="number">0.386314</span> -<span class="number">0.217601</span></span><br><span class="line">ddd -<span class="number">0.871858</span> -<span class="number">0.348382</span>  <span class="number">1.100491</span></span><br></pre></td></tr></table></figure>

<p>这里，由于列名比数据行的数量少，所以read_table推断第一列应该是DataFrame的索引。</p>
<p>这些解析器函数还有许多参数可以帮助你处理各种各样的异形文件格式（表6-2列出了一些）。比如说，你可以用<code>skiprows</code>跳过文件的第一行、第三行和第四行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">23</span>]: !cat examples/ex4.csv</span><br><span class="line"><span class="comment"># hey!</span></span><br><span class="line">a,b,c,d,message</span><br><span class="line"><span class="comment"># just wanted to make things more difficult for you</span></span><br><span class="line"><span class="comment"># who reads CSV files with computers, anyway?</span></span><br><span class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,hello</span><br><span class="line"><span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,world</span><br><span class="line"><span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,foo</span><br><span class="line">In [<span class="number">24</span>]: pd.read_csv(<span class="string">&#x27;examples/ex4.csv&#x27;</span>, skiprows=[<span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">Out[<span class="number">24</span>]: </span><br><span class="line">   a   b   c   d message</span><br><span class="line"><span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   hello</span><br><span class="line"><span class="number">1</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span>   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<p>缺失值处理是文件解析任务中的一个重要组成部分。缺失数据经常是要么没有（空字符串），要么用某个标记值表示。默认情况下，pandas会用一组经常出现的标记值进行识别，比如NA及NULL：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">25</span>]: !cat examples/ex5.csv</span><br><span class="line">something,a,b,c,d,message</span><br><span class="line">one,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,NA</span><br><span class="line">two,<span class="number">5</span>,<span class="number">6</span>,,<span class="number">8</span>,world</span><br><span class="line">three,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,foo</span><br><span class="line">In [<span class="number">26</span>]: result = pd.read_csv(<span class="string">&#x27;examples/ex5.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">27</span>]: result</span><br><span class="line">Out[<span class="number">27</span>]: </span><br><span class="line">  something  a   b     c   d message</span><br><span class="line"><span class="number">0</span>       one  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3.0</span>   <span class="number">4</span>     NaN</span><br><span class="line"><span class="number">1</span>       two  <span class="number">5</span>   <span class="number">6</span>   NaN   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>     three  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11.0</span>  <span class="number">12</span>     foo</span><br><span class="line"></span><br><span class="line">In [<span class="number">28</span>]: pd.isnull(result)</span><br><span class="line">Out[<span class="number">28</span>]: </span><br><span class="line">   something      a      b      c      d  message</span><br><span class="line"><span class="number">0</span>      <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">1</span>      <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>   <span class="literal">True</span>  <span class="literal">False</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>      <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>  <span class="literal">False</span>    <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p><code>na_values</code>可以用一个列表或集合的字符串表示缺失值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">29</span>]: result = pd.read_csv(<span class="string">&#x27;examples/ex5.csv&#x27;</span>, na_values=[<span class="string">&#x27;NULL&#x27;</span>])</span><br><span class="line"><span class="comment"># 空值被替换成NaN</span></span><br><span class="line">In [<span class="number">30</span>]: result</span><br><span class="line">Out[<span class="number">30</span>]: </span><br><span class="line">  something  a   b     c   d message</span><br><span class="line"><span class="number">0</span>       one  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3.0</span>   <span class="number">4</span>     NaN</span><br><span class="line"><span class="number">1</span>       two  <span class="number">5</span>   <span class="number">6</span>   NaN   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>     three  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11.0</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<p>字典的各列可以使用不同的NA标记值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">31</span>]: sentinels = &#123;<span class="string">&#x27;message&#x27;</span>: [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;NA&#x27;</span>], <span class="string">&#x27;something&#x27;</span>: [<span class="string">&#x27;two&#x27;</span>]&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">32</span>]: pd.read_csv(<span class="string">&#x27;examples/ex5.csv&#x27;</span>, na_values=sentinels)</span><br><span class="line">Out[<span class="number">32</span>]:</span><br><span class="line">something  a   b     c   d message</span><br><span class="line"><span class="number">0</span>       one  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3.0</span>   <span class="number">4</span>     NaN</span><br><span class="line"><span class="number">1</span>       NaN  <span class="number">5</span>   <span class="number">6</span>   NaN   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>     three  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11.0</span>  <span class="number">12</span>     NaN</span><br></pre></td></tr></table></figure>

<p>表6-2列出了pandas.read_csv和pandas.read_table常用的选项。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-082daf4a00ed9494.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-f2bcc0a703c7236f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-597327ade3e94c7a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h4 id="逐块读取文本文件"><a href="#逐块读取文本文件" class="headerlink" title="逐块读取文本文件"></a>逐块读取文本文件</h4><p>在处理很大的文件时，或找出大文件中的参数集以便于后续处理时，你可能只想读取文件的一小部分或逐块对文件进行迭代。</p>
<p>在看大文件之前，我们先设置pandas显示地更紧些：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">33</span>]: pd.options.display.max_rows = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>然后有：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">34</span>]: result = pd.read_csv(<span class="string">&#x27;examples/ex6.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">35</span>]: result</span><br><span class="line">Out[<span class="number">35</span>]: </span><br><span class="line">           one       two     three      four key</span><br><span class="line"><span class="number">0</span>     <span class="number">0.467976</span> -<span class="number">0.038649</span> -<span class="number">0.295344</span> -<span class="number">1.824726</span>   L</span><br><span class="line"><span class="number">1</span>    -<span class="number">0.358893</span>  <span class="number">1.404453</span>  <span class="number">0.704965</span> -<span class="number">0.200638</span>   B</span><br><span class="line"><span class="number">2</span>    -<span class="number">0.501840</span>  <span class="number">0.659254</span> -<span class="number">0.421691</span> -<span class="number">0.057688</span>   G</span><br><span class="line"><span class="number">3</span>     <span class="number">0.204886</span>  <span class="number">1.074134</span>  <span class="number">1.388361</span> -<span class="number">0.982404</span>   R</span><br><span class="line"><span class="number">4</span>     <span class="number">0.354628</span> -<span class="number">0.133116</span>  <span class="number">0.283763</span> -<span class="number">0.837063</span>   Q</span><br><span class="line"><span class="meta">... </span>       ...       ...       ...       ...  ..</span><br><span class="line"><span class="number">9995</span>  <span class="number">2.311896</span> -<span class="number">0.417070</span> -<span class="number">1.409599</span> -<span class="number">0.515821</span>   L</span><br><span class="line"><span class="number">9996</span> -<span class="number">0.479893</span> -<span class="number">0.650419</span>  <span class="number">0.745152</span> -<span class="number">0.646038</span>   E</span><br><span class="line"><span class="number">9997</span>  <span class="number">0.523331</span>  <span class="number">0.787112</span>  <span class="number">0.486066</span>  <span class="number">1.093156</span>   K</span><br><span class="line"><span class="number">9998</span> -<span class="number">0.362559</span>  <span class="number">0.598894</span> -<span class="number">1.843201</span>  <span class="number">0.887292</span>   G</span><br><span class="line"><span class="number">9999</span> -<span class="number">0.096376</span> -<span class="number">1.012999</span> -<span class="number">0.657431</span> -<span class="number">0.573315</span>   <span class="number">0</span></span><br><span class="line">[<span class="number">10000</span> rows x <span class="number">5</span> columns]</span><br></pre></td></tr></table></figure>

<h5 id="nrows"><a href="#nrows" class="headerlink" title="nrows"></a>nrows</h5><p>如果只想读取几行（避免读取整个文件），通过<code>nrows</code>进行指定即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">36</span>]: pd.read_csv(<span class="string">&#x27;examples/ex6.csv&#x27;</span>, nrows=<span class="number">5</span>)</span><br><span class="line">Out[<span class="number">36</span>]: </span><br><span class="line">        one       two     three      four key</span><br><span class="line"><span class="number">0</span>  <span class="number">0.467976</span> -<span class="number">0.038649</span> -<span class="number">0.295344</span> -<span class="number">1.824726</span>   L</span><br><span class="line"><span class="number">1</span> -<span class="number">0.358893</span>  <span class="number">1.404453</span>  <span class="number">0.704965</span> -<span class="number">0.200638</span>   B</span><br><span class="line"><span class="number">2</span> -<span class="number">0.501840</span>  <span class="number">0.659254</span> -<span class="number">0.421691</span> -<span class="number">0.057688</span>   G</span><br><span class="line"><span class="number">3</span>  <span class="number">0.204886</span>  <span class="number">1.074134</span>  <span class="number">1.388361</span> -<span class="number">0.982404</span>   R</span><br><span class="line"><span class="number">4</span>  <span class="number">0.354628</span> -<span class="number">0.133116</span>  <span class="number">0.283763</span> -<span class="number">0.837063</span>   Q</span><br></pre></td></tr></table></figure>

<h5 id="chunksize"><a href="#chunksize" class="headerlink" title="chunksize"></a>chunksize</h5><p>要逐块读取文件，可以指定<code>chunksize</code>（行数）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">874</span>]: chunker = pd.read_csv(<span class="string">&#x27;ch06/ex6.csv&#x27;</span>, chunksize=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">875</span>]: chunker</span><br><span class="line">Out[<span class="number">875</span>]: &lt;pandas.io.parsers.TextParser at <span class="number">0x8398150</span>&gt;</span><br></pre></td></tr></table></figure>

<p>read_csv所返回的这个TextParser对象使你可以根据chunksize对文件进行逐块迭代。比如说，我们可以迭代处理ex6.csv，将值计数聚合到”key”列中，如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chunker = pd.read_csv(<span class="string">&#x27;examples/ex6.csv&#x27;</span>, chunksize=<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">tot = pd.Series([])</span><br><span class="line"><span class="keyword">for</span> piece <span class="keyword">in</span> chunker:</span><br><span class="line">    tot = tot.add(piece[<span class="string">&#x27;key&#x27;</span>].value_counts(), fill_value=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">tot = tot.sort_values(ascending=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>然后有：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">40</span>]: tot[:<span class="number">10</span>]</span><br><span class="line">Out[<span class="number">40</span>]: </span><br><span class="line">E    <span class="number">368.0</span></span><br><span class="line">X    <span class="number">364.0</span></span><br><span class="line">L    <span class="number">346.0</span></span><br><span class="line">O    <span class="number">343.0</span></span><br><span class="line">Q    <span class="number">340.0</span></span><br><span class="line">M    <span class="number">338.0</span></span><br><span class="line">J    <span class="number">337.0</span></span><br><span class="line">F    <span class="number">335.0</span></span><br><span class="line">K    <span class="number">334.0</span></span><br><span class="line">H    <span class="number">330.0</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>

<p>TextParser还有一个get_chunk方法，它使你可以读取任意大小的块。</p>
<h4 id="to-csv"><a href="#to-csv" class="headerlink" title="to_csv()"></a>to_csv()</h4><p>利用DataFrame的to_csv方法，我们可以将数据写到一个以逗号分隔的文件中：</p>
<p><code>DataFrame.to_csv(path_or_buf=&quot;&quot;, sep=&quot;,&quot;)</code></p>
<p><strong>常用参数</strong></p>
<ul>
<li><code>path_or_buf</code>：必填项，要写入的文件或文件对象的字符串路径。如果是文件对象，则必须使用打开该对象</li>
<li><code>sep</code>：输出文件的字段分隔符（默认为“，”）</li>
<li><code>na_rep</code>:  缺失数据填充，(默认为””）</li>
<li><code>columns</code>：要写入的列（默认为“无”）</li>
<li><code>header</code>：是否写出列名（默认为True）</li>
<li><code>index</code>：是否写入行（索引）名称（默认为True）</li>
<li><code>index_label</code>: 索引列的列标签（如果需要）。如果无（默认值），并且<code>header</code>和<code>index</code>为True，则使用索引名称。（如果DataFrame使用MultiIndex，则应给出序列）。</li>
<li><code>mode</code>：Python写入模式，默认为“w”</li>
<li><code>encoding</code>：输出文件中使用的编码格式，默认为”utf-8”</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">41</span>]: data = pd.read_csv(<span class="string">&#x27;examples/ex5.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: data</span><br><span class="line">Out[<span class="number">42</span>]: </span><br><span class="line">  something  a   b     c   d message</span><br><span class="line"><span class="number">0</span>       one  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3.0</span>   <span class="number">4</span>     NaN</span><br><span class="line"><span class="number">1</span>       two  <span class="number">5</span>   <span class="number">6</span>   NaN   <span class="number">8</span>   world</span><br><span class="line"><span class="number">2</span>     three  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11.0</span>  <span class="number">12</span>     foo</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">43</span>]: data.to_csv(<span class="string">&#x27;examples/out.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">44</span>]: !cat examples/out.csv</span><br><span class="line">,something,a,b,c,d,message</span><br><span class="line"><span class="number">0</span>,one,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3.0</span>,<span class="number">4</span>,</span><br><span class="line"><span class="number">1</span>,two,<span class="number">5</span>,<span class="number">6</span>,,<span class="number">8</span>,world</span><br><span class="line"><span class="number">2</span>,three,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11.0</span>,<span class="number">12</span>,foo</span><br></pre></td></tr></table></figure>

<p>当然，还可以使用其他分隔符（由于这里直接写出到sys.stdout，所以仅仅是打印出文本结果而已）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">45</span>]: <span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">In [<span class="number">46</span>]: data.to_csv(sys.stdout, sep=<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line"><span class="comment"># Python中的sys.stdout是一个内置模块sys中的属性,代表了标准输出流,也就是默认情况下Python程序将输出的信息打印到屏幕上的地方。</span></span><br><span class="line">|something|a|b|c|d|message</span><br><span class="line"><span class="number">0</span>|one|<span class="number">1</span>|<span class="number">2</span>|<span class="number">3.0</span>|<span class="number">4</span>|</span><br><span class="line"><span class="number">1</span>|two|<span class="number">5</span>|<span class="number">6</span>||<span class="number">8</span>|world</span><br><span class="line"><span class="number">2</span>|three|<span class="number">9</span>|<span class="number">10</span>|<span class="number">11.0</span>|<span class="number">12</span>|foo</span><br></pre></td></tr></table></figure>

<p>缺失值在输出结果中会被表示为空字符串。你可能希望将其表示为别的标记值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">47</span>]: data.to_csv(sys.stdout, na_rep=<span class="string">&#x27;NULL&#x27;</span>)</span><br><span class="line">,something,a,b,c,d,message</span><br><span class="line"><span class="number">0</span>,one,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3.0</span>,<span class="number">4</span>,NULL</span><br><span class="line"><span class="number">1</span>,two,<span class="number">5</span>,<span class="number">6</span>,NULL,<span class="number">8</span>,world</span><br><span class="line"><span class="number">2</span>,three,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11.0</span>,<span class="number">12</span>,foo</span><br></pre></td></tr></table></figure>

<p>如果没有设置其他选项，则会写出行和列的标签。当然，它们也都可以被禁用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">48</span>]: data.to_csv(sys.stdout, index=<span class="literal">False</span>, header=<span class="literal">False</span>)</span><br><span class="line">one,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3.0</span>,<span class="number">4</span>,</span><br><span class="line">two,<span class="number">5</span>,<span class="number">6</span>,,<span class="number">8</span>,world</span><br><span class="line">three,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11.0</span>,<span class="number">12</span>,foo</span><br></pre></td></tr></table></figure>

<p>此外，你还可以只写出一部分的列，并以你指定的顺序排列：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">49</span>]: data.to_csv(sys.stdout, index=<span class="literal">False</span>, columns=[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br><span class="line">a,b,c</span><br><span class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3.0</span></span><br><span class="line"><span class="number">5</span>,<span class="number">6</span>,</span><br><span class="line"><span class="number">9</span>,<span class="number">10</span>,<span class="number">11.0</span></span><br></pre></td></tr></table></figure>

<p>Series也有一个to_csv方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">50</span>]: dates = pd.date_range(<span class="string">&#x27;1/1/2000&#x27;</span>, periods=<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">51</span>]: ts = pd.Series(np.arange(<span class="number">7</span>), index=dates)</span><br><span class="line"></span><br><span class="line">In [<span class="number">52</span>]: ts.to_csv(<span class="string">&#x27;examples/tseries.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">53</span>]: !cat examples/tseries.csv</span><br><span class="line"><span class="number">2000</span>-01-01,<span class="number">0</span></span><br><span class="line"><span class="number">2000</span>-01-02,<span class="number">1</span></span><br><span class="line"><span class="number">2000</span>-01-03,<span class="number">2</span></span><br><span class="line"><span class="number">2000</span>-01-04,<span class="number">3</span></span><br><span class="line"><span class="number">2000</span>-01-05,<span class="number">4</span></span><br><span class="line"><span class="number">2000</span>-01-06,<span class="number">5</span></span><br><span class="line"><span class="number">2000</span>-01-07,<span class="number">6</span></span><br></pre></td></tr></table></figure>

<h4 id="处理分隔符格式"><a href="#处理分隔符格式" class="headerlink" title="处理分隔符格式"></a>处理分隔符格式</h4><p>大部分存储在磁盘上的表格型数据都能用pandas.read_table进行加载。然而，有时还是需要做一些手工处理。由于接收到含有畸形行的文件而使read_table出毛病的情况并不少见。为了说明这些基本工具，看看下面这个简单的CSV文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">54</span>]: !cat examples/ex7.csv</span><br><span class="line"><span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span></span><br><span class="line"><span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span></span><br></pre></td></tr></table></figure>

<p>对于任何单字符分隔符文件，可以直接使用Python内置的csv模块。将任意已打开的文件或文件型的对象传给csv.reader：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;examples/ex7.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">reader = csv.reader(f)</span><br></pre></td></tr></table></figure>

<p>对这个reader进行迭代将会为每行产生一个元组（并移除了所有的引号）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">56</span>]: <span class="keyword">for</span> line <span class="keyword">in</span> reader:</span><br><span class="line">   ....:     <span class="built_in">print</span>(line)</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>现在，为了使数据格式合乎要求，你需要对其做一些整理工作。我们一步一步来做。首先，读取文件到一个多行的列表中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">57</span>]: <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;examples/ex7.csv&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">   ....:     lines = <span class="built_in">list</span>(csv.reader(f))</span><br></pre></td></tr></table></figure>

<p>然后，我们将这些行分为标题行和数据行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">58</span>]: header, values = lines[<span class="number">0</span>], lines[<span class="number">1</span>:]</span><br></pre></td></tr></table></figure>

<p>然后，我们可以用字典构造式和zip(*values)，后者将行转置为列，创建数据列的字典：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">59</span>]: data_dict = &#123;h: v <span class="keyword">for</span> h, v <span class="keyword">in</span> <span class="built_in">zip</span>(header, <span class="built_in">zip</span>(*values))&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">60</span>]: data_dict</span><br><span class="line">Out[<span class="number">60</span>]: &#123;<span class="string">&#x27;a&#x27;</span>: (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>), <span class="string">&#x27;b&#x27;</span>: (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>), <span class="string">&#x27;c&#x27;</span>: (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;3&#x27;</span>)&#125;</span><br></pre></td></tr></table></figure>

<p>CSV文件的形式有很多。只需定义csv.Dialect的一个子类即可定义出新格式（如专门的分隔符、字符串引用约定、行结束符等）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">my_dialect</span>(csv.Dialect):</span><br><span class="line">    lineterminator = <span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    delimiter = <span class="string">&#x27;;&#x27;</span></span><br><span class="line">    quotechar = <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">    quoting = csv.QUOTE_MINIMAL</span><br><span class="line">reader = csv.reader(f, dialect=my_dialect)</span><br></pre></td></tr></table></figure>

<p>各个CSV语支的参数也可以用关键字的形式提供给csv.reader，而无需定义子类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reader = csv.reader(f, delimiter=<span class="string">&#x27;|&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>可用的选项（csv.Dialect的属性）及其功能如表6-3所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://upload-images.jianshu.io/upload_images/7178691-7a1cee622459072b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<blockquote>
<p>笔记：对于那些使用复杂分隔符或多字符分隔符的文件，csv模块就无能为力了。这种情况下，你就只能使用字符串的split方法或正则表达式方法re.split进行行拆分和其他整理工作了。</p>
</blockquote>
<p>要手工输出分隔符文件，你可以使用csv.writer。它接受一个已打开且可写的文件对象以及跟csv.reader相同的那些语支和格式化选项：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;mydata.csv&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    writer = csv.writer(f, dialect=my_dialect)</span><br><span class="line">    writer.writerow((<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>))</span><br><span class="line">    writer.writerow((<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>))</span><br><span class="line">    writer.writerow((<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;6&#x27;</span>))</span><br><span class="line">    writer.writerow((<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;9&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="缺失数据处理"><a href="#缺失数据处理" class="headerlink" title="缺失数据处理"></a>缺失数据处理</h2><p>在许多数据分析工作中，缺失数据是经常发生的。pandas的目标之一就是尽量轻松地处理缺失数据。例如，pandas对象的所有描述性统计默认都不包括缺失数据。</p>
<p>缺失数据在pandas中呈现的方式有些不完美，但对于大多数用户可以保证功能正常。对于数值数据，pandas使用浮点值NaN（Not a Number）表示缺失数据。我们称其为哨兵值，可以方便的检测出来：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">10</span>]: string_data = pd.Series([<span class="string">&#x27;aardvark&#x27;</span>, <span class="string">&#x27;artichoke&#x27;</span>, np.nan, <span class="string">&#x27;avocado&#x27;</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: string_data</span><br><span class="line">Out[<span class="number">11</span>]:</span><br><span class="line"><span class="number">0</span>     aardvark</span><br><span class="line"><span class="number">1</span>    artichoke</span><br><span class="line"><span class="number">2</span>          NaN</span><br><span class="line"><span class="number">3</span>      avocado</span><br><span class="line">dtype: <span class="built_in">object</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: string_data.isnull()</span><br><span class="line">Out[<span class="number">12</span>]: </span><br><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">3</span>    <span class="literal">False</span></span><br><span class="line">dtype: <span class="built_in">bool</span></span><br></pre></td></tr></table></figure>

<p>在pandas中，我们采用了R语言中的惯用法，即<strong>将缺失值表示为NA</strong>，它表示不可用not available。在统计应用中，NA数据可能是不存在的数据或者虽然存在，但是没有观察到（例如，数据采集中发生了问题）。当进行数据清洗以进行分析时，最好直接对缺失数据进行分析，以判断数据采集的问题或缺失数据可能导致的偏差。</p>
<p>Python内置的None值在对象数组中也可以作为NA：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">13</span>]: string_data[<span class="number">0</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: string_data.isnull()</span><br><span class="line">Out[<span class="number">14</span>]: </span><br><span class="line"><span class="number">0</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">1</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">2</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">3</span>    <span class="literal">False</span></span><br><span class="line">dtype: <span class="built_in">bool</span></span><br></pre></td></tr></table></figure>

<h3 id="滤除缺失数据"><a href="#滤除缺失数据" class="headerlink" title="滤除缺失数据"></a>滤除缺失数据</h3><p>过滤掉缺失数据的办法有很多种。你可以通过<strong>pandas.isnull</strong>或布尔索引的手工方法，但<strong>dropna</strong>可能会更实用一些。对于一个Series，dropna返回一个仅含非空数据和索引值的Series：</p>
<h4 id="dropna"><a href="#dropna" class="headerlink" title="dropna()"></a>dropna()</h4><p><code>DataFrame.dropna(*, axis=0, how=_NoDefault.no_default, thresh=_NoDefault.no_default, subset=None, inplace=False, ignore_index=False)</code></p>
<ul>
<li>axis：可以是0或1，表示删除行或者列。默认为0。</li>
<li>how：删除的方式，可以是’any’或’all’。’any’表示只要存在缺失值就删除，’all’表示所有的值都是缺失值才删除。默认为’any’。</li>
<li>thresh：可以是整数，表示这一行或列最少要有多少个非缺失值才不被删除。如果设置为None，表示所有数据值都需要进行判断。默认为None。</li>
<li>subset：可以是列名称或列名称的列表，表示只在这些列中进行删除操作。默认为None。</li>
<li>inplace：True表示直接修改原数据集；False表示返回删除后的新数据集。默认为False。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">15</span>]: <span class="keyword">from</span> numpy <span class="keyword">import</span> nan <span class="keyword">as</span> NA</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: data = pd.Series([<span class="number">1</span>, NA, <span class="number">3.5</span>, NA, <span class="number">7</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: data.dropna()</span><br><span class="line">Out[<span class="number">17</span>]: </span><br><span class="line"><span class="number">0</span>    <span class="number">1.0</span></span><br><span class="line"><span class="number">2</span>    <span class="number">3.5</span></span><br><span class="line"><span class="number">4</span>    <span class="number">7.0</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>

<p>这等价于：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">18</span>]: data[data.notnull()]</span><br><span class="line">Out[<span class="number">18</span>]: </span><br><span class="line"><span class="number">0</span>    <span class="number">1.0</span></span><br><span class="line"><span class="number">2</span>    <span class="number">3.5</span></span><br><span class="line"><span class="number">4</span>    <span class="number">7.0</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>

<p>而对于DataFrame对象，事情就有点复杂了。你可能希望丢弃全NA或含有NA的行或列。dropna默认丢弃任何含有缺失值的行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">19</span>]: data = pd.DataFrame([[<span class="number">1.</span>, <span class="number">6.5</span>, <span class="number">3.</span>], [<span class="number">1.</span>, NA, NA],</span><br><span class="line">   ....:                      [NA, NA, NA], [NA, <span class="number">6.5</span>, <span class="number">3.</span>]])</span><br><span class="line"></span><br><span class="line">In [<span class="number">20</span>]: cleaned = data.dropna()</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: data</span><br><span class="line">Out[<span class="number">21</span>]: </span><br><span class="line">     <span class="number">0</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span>  <span class="number">6.5</span>  <span class="number">3.0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">1.0</span>  NaN  NaN</span><br><span class="line"><span class="number">2</span>  NaN  NaN  NaN</span><br><span class="line"><span class="number">3</span>  NaN  <span class="number">6.5</span>  <span class="number">3.0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: cleaned</span><br><span class="line">Out[<span class="number">22</span>]: </span><br><span class="line">     <span class="number">0</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span>  <span class="number">6.5</span>  <span class="number">3.0</span></span><br></pre></td></tr></table></figure>

<p>传入how&#x3D;’all’将只丢弃全为NA的那些行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">23</span>]: data.dropna(how=<span class="string">&#x27;all&#x27;</span>)</span><br><span class="line">Out[<span class="number">23</span>]: </span><br><span class="line">     <span class="number">0</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span>  <span class="number">6.5</span>  <span class="number">3.0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">1.0</span>  NaN  NaN</span><br><span class="line"><span class="number">3</span>  NaN  <span class="number">6.5</span>  <span class="number">3.0</span></span><br></pre></td></tr></table></figure>

<p>用这种方式丢弃列，只需传入axis&#x3D;1即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">24</span>]: data[<span class="number">4</span>] = NA</span><br><span class="line"></span><br><span class="line">In [<span class="number">25</span>]: data</span><br><span class="line">Out[<span class="number">25</span>]: </span><br><span class="line">     <span class="number">0</span>    <span class="number">1</span>    <span class="number">2</span>   <span class="number">4</span></span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span>  <span class="number">6.5</span>  <span class="number">3.0</span> NaN</span><br><span class="line"><span class="number">1</span>  <span class="number">1.0</span>  NaN  NaN NaN</span><br><span class="line"><span class="number">2</span>  NaN  NaN  NaN NaN</span><br><span class="line"><span class="number">3</span>  NaN  <span class="number">6.5</span>  <span class="number">3.0</span> NaN</span><br><span class="line"></span><br><span class="line">In [<span class="number">26</span>]: data.dropna(axis=<span class="number">1</span>, how=<span class="string">&#x27;all&#x27;</span>)</span><br><span class="line">Out[<span class="number">26</span>]: </span><br><span class="line">     <span class="number">0</span>    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span>  <span class="number">6.5</span>  <span class="number">3.0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">1.0</span>  NaN  NaN</span><br><span class="line"><span class="number">2</span>  NaN  NaN  NaN</span><br><span class="line"><span class="number">3</span>  NaN  <span class="number">6.5</span>  <span class="number">3.0</span></span><br></pre></td></tr></table></figure>

<p>另一个滤除DataFrame行的问题涉及时间序列数据。假设你只想留下一部分观测数据，可以用<strong>thresh</strong>参数实现此目的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">27</span>]: df = pd.DataFrame(np.random.randn(<span class="number">7</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">28</span>]: df.iloc[:<span class="number">4</span>, <span class="number">1</span>] = NA</span><br><span class="line"></span><br><span class="line">In [<span class="number">29</span>]: df.iloc[:<span class="number">2</span>, <span class="number">2</span>] = NA</span><br><span class="line"></span><br><span class="line">In [<span class="number">30</span>]: df</span><br><span class="line">Out[<span class="number">30</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span> -<span class="number">0.204708</span>       NaN       NaN</span><br><span class="line"><span class="number">1</span> -<span class="number">0.555730</span>       NaN       NaN</span><br><span class="line"><span class="number">2</span>  <span class="number">0.092908</span>       NaN  <span class="number">0.769023</span></span><br><span class="line"><span class="number">3</span>  <span class="number">1.246435</span>       NaN -<span class="number">1.296221</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.274992</span>  <span class="number">0.228913</span>  <span class="number">1.352917</span></span><br><span class="line"><span class="number">5</span>  <span class="number">0.886429</span> -<span class="number">2.001637</span> -<span class="number">0.371843</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1.669025</span> -<span class="number">0.438570</span> -<span class="number">0.539741</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">31</span>]: df.dropna()</span><br><span class="line">Out[<span class="number">31</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.274992</span>  <span class="number">0.228913</span>  <span class="number">1.352917</span></span><br><span class="line"><span class="number">5</span>  <span class="number">0.886429</span> -<span class="number">2.001637</span> -<span class="number">0.371843</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1.669025</span> -<span class="number">0.438570</span> -<span class="number">0.539741</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">32</span>]: df.dropna(thresh=<span class="number">2</span>)</span><br><span class="line">Out[<span class="number">32</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.092908</span>       NaN  <span class="number">0.769023</span></span><br><span class="line"><span class="number">3</span>  <span class="number">1.246435</span>       NaN -<span class="number">1.296221</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.274992</span>  <span class="number">0.228913</span>  <span class="number">1.352917</span></span><br><span class="line"><span class="number">5</span>  <span class="number">0.886429</span> -<span class="number">2.001637</span> -<span class="number">0.371843</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1.669025</span> -<span class="number">0.438570</span> -<span class="number">0.539741</span></span><br></pre></td></tr></table></figure>

<h3 id="填充缺失数据"><a href="#填充缺失数据" class="headerlink" title="填充缺失数据"></a>填充缺失数据</h3><p>你可能不想滤除缺失数据（有可能会丢弃跟它有关的其他数据），而是希望通过其他方式填补那些“空洞”。对于大多数情况而言，fillna方法是最主要的函数。通过一个常数调用fillna就会将缺失值替换为那个常数值：</p>
<h4 id="fillna"><a href="#fillna" class="headerlink" title="fillna()"></a>fillna()</h4><p><code>DataFrame.fillna(value=None, *, method=None, axis=None, inplace=False, limit=None, downcast=None)</code></p>
<ul>
<li><strong>value</strong>：用于填充缺失值的值，可以是标量、字典、Series 或 DataFrame。</li>
<li>method：填充缺失值的方法，可选值包括 <code>backfill</code>（向前填充）、<code>bfill</code>（向后填充）、<code>pad</code>（用前面的非缺失数据填充）、<code>ffill</code>（用后面的非缺失数据填充）等。</li>
<li>axis：指定在哪个轴上执行填充操作。</li>
<li><strong>inplace</strong>：是否在原 DataFrame 上直接进行修改。</li>
<li>limit：对于前向填充和后向填充，限制填充缺失值的最大数量。</li>
<li>downcast：指定填充后的数据类型，可选值包括<code>infer</code>（自动推断）、<code>integer</code>（整型）等。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">33</span>]: df.fillna(<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">33</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span> -<span class="number">0.204708</span>  <span class="number">0.000000</span>  <span class="number">0.000000</span></span><br><span class="line"><span class="number">1</span> -<span class="number">0.555730</span>  <span class="number">0.000000</span>  <span class="number">0.000000</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.092908</span>  <span class="number">0.000000</span>  <span class="number">0.769023</span></span><br><span class="line"><span class="number">3</span>  <span class="number">1.246435</span>  <span class="number">0.000000</span> -<span class="number">1.296221</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.274992</span>  <span class="number">0.228913</span>  <span class="number">1.352917</span></span><br><span class="line"><span class="number">5</span>  <span class="number">0.886429</span> -<span class="number">2.001637</span> -<span class="number">0.371843</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1.669025</span> -<span class="number">0.438570</span> -<span class="number">0.539741</span></span><br></pre></td></tr></table></figure>

<p>若是通过一个<strong>字典</strong>调用fillna，就可以实现<strong>对不同的列填充不同的值</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">34</span>]: df.fillna(&#123;<span class="number">1</span>: <span class="number">0.5</span>, <span class="number">2</span>: <span class="number">0</span>&#125;)</span><br><span class="line">Out[<span class="number">34</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span> -<span class="number">0.204708</span>  <span class="number">0.500000</span>  <span class="number">0.000000</span></span><br><span class="line"><span class="number">1</span> -<span class="number">0.555730</span>  <span class="number">0.500000</span>  <span class="number">0.000000</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.092908</span>  <span class="number">0.500000</span>  <span class="number">0.769023</span></span><br><span class="line"><span class="number">3</span>  <span class="number">1.246435</span>  <span class="number">0.500000</span> -<span class="number">1.296221</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.274992</span>  <span class="number">0.228913</span>  <span class="number">1.352917</span></span><br><span class="line"><span class="number">5</span>  <span class="number">0.886429</span> -<span class="number">2.001637</span> -<span class="number">0.371843</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1.669025</span> -<span class="number">0.438570</span> -<span class="number">0.539741</span></span><br></pre></td></tr></table></figure>

<p>fillna默认会返回新对象，但也可以对现有对象进行就地修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">35</span>]: _ = df.fillna(<span class="number">0</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: df</span><br><span class="line">Out[<span class="number">36</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span> -<span class="number">0.204708</span>  <span class="number">0.000000</span>  <span class="number">0.000000</span></span><br><span class="line"><span class="number">1</span> -<span class="number">0.555730</span>  <span class="number">0.000000</span>  <span class="number">0.000000</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.092908</span>  <span class="number">0.000000</span>  <span class="number">0.769023</span></span><br><span class="line"><span class="number">3</span>  <span class="number">1.246435</span>  <span class="number">0.000000</span> -<span class="number">1.296221</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.274992</span>  <span class="number">0.228913</span>  <span class="number">1.352917</span></span><br><span class="line"><span class="number">5</span>  <span class="number">0.886429</span> -<span class="number">2.001637</span> -<span class="number">0.371843</span></span><br><span class="line"><span class="number">6</span>  <span class="number">1.669025</span> -<span class="number">0.438570</span> -<span class="number">0.539741</span></span><br></pre></td></tr></table></figure>

<p>对reindexing有效的那些插值方法也可用于fillna：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">37</span>]: df = pd.DataFrame(np.random.randn(<span class="number">6</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: df.iloc[<span class="number">2</span>:, <span class="number">1</span>] = NA</span><br><span class="line"></span><br><span class="line">In [<span class="number">39</span>]: df.iloc[<span class="number">4</span>:, <span class="number">2</span>] = NA</span><br><span class="line"></span><br><span class="line">In [<span class="number">40</span>]: df</span><br><span class="line">Out[<span class="number">40</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0.476985</span>  <span class="number">3.248944</span> -<span class="number">1.021228</span></span><br><span class="line"><span class="number">1</span> -<span class="number">0.577087</span>  <span class="number">0.124121</span>  <span class="number">0.302614</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.523772</span>       NaN  <span class="number">1.343810</span></span><br><span class="line"><span class="number">3</span> -<span class="number">0.713544</span>       NaN -<span class="number">2.370232</span></span><br><span class="line"><span class="number">4</span> -<span class="number">1.860761</span>       NaN       NaN</span><br><span class="line"><span class="number">5</span> -<span class="number">1.265934</span>       NaN       NaN</span><br><span class="line"></span><br><span class="line">In [<span class="number">41</span>]: df.fillna(method=<span class="string">&#x27;ffill&#x27;</span>)</span><br><span class="line">Out[<span class="number">41</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0.476985</span>  <span class="number">3.248944</span> -<span class="number">1.021228</span></span><br><span class="line"><span class="number">1</span> -<span class="number">0.577087</span>  <span class="number">0.124121</span>  <span class="number">0.302614</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.523772</span>  <span class="number">0.124121</span>  <span class="number">1.343810</span></span><br><span class="line"><span class="number">3</span> -<span class="number">0.713544</span>  <span class="number">0.124121</span> -<span class="number">2.370232</span></span><br><span class="line"><span class="number">4</span> -<span class="number">1.860761</span>  <span class="number">0.124121</span> -<span class="number">2.370232</span></span><br><span class="line"><span class="number">5</span> -<span class="number">1.265934</span>  <span class="number">0.124121</span> -<span class="number">2.370232</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: df.fillna(method=<span class="string">&#x27;ffill&#x27;</span>, limit=<span class="number">2</span>)</span><br><span class="line">Out[<span class="number">42</span>]: </span><br><span class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">0</span>  <span class="number">0.476985</span>  <span class="number">3.248944</span> -<span class="number">1.021228</span></span><br><span class="line"><span class="number">1</span> -<span class="number">0.577087</span>  <span class="number">0.124121</span>  <span class="number">0.302614</span></span><br><span class="line"><span class="number">2</span>  <span class="number">0.523772</span>  <span class="number">0.124121</span>  <span class="number">1.343810</span></span><br><span class="line"><span class="number">3</span> -<span class="number">0.713544</span>  <span class="number">0.124121</span> -<span class="number">2.370232</span></span><br><span class="line"><span class="number">4</span> -<span class="number">1.860761</span>       NaN -<span class="number">2.370232</span></span><br><span class="line"><span class="number">5</span> -<span class="number">1.265934</span>       NaN -<span class="number">2.370232</span></span><br></pre></td></tr></table></figure>

<p>只要有些创新，你就可以利用fillna实现许多别的功能。比如说，你可以传入Series的平均值或中位数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">43</span>]: data = pd.Series([<span class="number">1.</span>, NA, <span class="number">3.5</span>, NA, <span class="number">7</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">44</span>]: data.fillna(data.mean())</span><br><span class="line">Out[<span class="number">44</span>]: </span><br><span class="line"><span class="number">0</span>    <span class="number">1.000000</span></span><br><span class="line"><span class="number">1</span>    <span class="number">3.833333</span></span><br><span class="line"><span class="number">2</span>    <span class="number">3.500000</span></span><br><span class="line"><span class="number">3</span>    <span class="number">3.833333</span></span><br><span class="line"><span class="number">4</span>    <span class="number">7.000000</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>

<h2 id="数据转换"><a href="#数据转换" class="headerlink" title="数据转换"></a>数据转换</h2><h3 id="移除重复数据"><a href="#移除重复数据" class="headerlink" title="移除重复数据"></a>移除重复数据</h3><p>DataFrame中出现重复行有多种原因。下面就是一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.DataFrame(&#123;<span class="string">&#x27;k1&#x27;</span>: [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>] * <span class="number">3</span> + [<span class="string">&#x27;two&#x27;</span>], <span class="string">&#x27;k2&#x27;</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]&#125;)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#     k1  k2</span></span><br><span class="line"><span class="comment"># 0  one   1</span></span><br><span class="line"><span class="comment"># 1  two   1</span></span><br><span class="line"><span class="comment"># 2  one   2</span></span><br><span class="line"><span class="comment"># 3  two   3</span></span><br><span class="line"><span class="comment"># 4  one   3</span></span><br><span class="line"><span class="comment"># 5  two   4</span></span><br><span class="line"><span class="comment"># 6  two   4</span></span><br></pre></td></tr></table></figure>

<h4 id="duplicated"><a href="#duplicated" class="headerlink" title="duplicated()"></a>duplicated()</h4><p>DataFrame的duplicated方法返回一个布尔型Series，表示各行是否是重复行（前面出现过的行）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.duplicated())</span><br><span class="line"><span class="comment"># 0    False</span></span><br><span class="line"><span class="comment"># 1    False</span></span><br><span class="line"><span class="comment"># 2    False</span></span><br><span class="line"><span class="comment"># 3    False</span></span><br><span class="line"><span class="comment"># 4    False</span></span><br><span class="line"><span class="comment"># 5    False</span></span><br><span class="line"><span class="comment"># 6     True</span></span><br><span class="line"><span class="comment"># dtype: bool</span></span><br></pre></td></tr></table></figure>

<h4 id="drop-duplicates"><a href="#drop-duplicates" class="headerlink" title="drop_duplicates()"></a>drop_duplicates()</h4><p><code>df.drop_duplicates(subset=[&#39;A&#39;,&#39;B&#39;],keep=&#39;first&#39;,inplace=True)</code></p>
<ul>
<li><p>subset： 输入要进行去重的列名，默认为None</p>
</li>
<li><p>keep： 可选参数有三个：‘first’、 ‘last’、 False， 默认值为 ‘first’。其中，first表示： 保留第一次出现的重复行，删除后面的重复行。last表示： 删除重复项，保留最后一次出现。False表示： 删除所有重复项。</p>
</li>
<li><p>inplace：布尔值，默认为False，是否直接在原数据上删除重复项或删除重复项后返回副本。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.drop_duplicates())</span><br><span class="line"><span class="comment">#     k1  k2</span></span><br><span class="line"><span class="comment"># 0  one   1</span></span><br><span class="line"><span class="comment"># 1  two   1</span></span><br><span class="line"><span class="comment"># 2  one   2</span></span><br><span class="line"><span class="comment"># 3  two   3</span></span><br><span class="line"><span class="comment"># 4  one   3</span></span><br><span class="line"><span class="comment"># 5  two   4</span></span><br></pre></td></tr></table></figure>

<p>这两个方法默认会判断全部列，你也可以指定部分列进行重复项判断。假设我们还有一列值，且只希望根据k1列过滤重复项：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data = pd.DataFrame(&#123;<span class="string">&#x27;k1&#x27;</span>: [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>] * <span class="number">3</span> + [<span class="string">&#x27;two&#x27;</span>], <span class="string">&#x27;k2&#x27;</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]&#125;)</span><br><span class="line">data[<span class="string">&#x27;v1&#x27;</span>] = <span class="built_in">range</span>(<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment">#     k1  k2  v1</span></span><br><span class="line"><span class="comment"># 0  one   1   0</span></span><br><span class="line"><span class="comment"># 1  two   1   1</span></span><br><span class="line"><span class="comment"># 2  one   2   2</span></span><br><span class="line"><span class="comment"># 3  two   3   3</span></span><br><span class="line"><span class="comment"># 4  one   3   4</span></span><br><span class="line"><span class="comment"># 5  two   4   5</span></span><br><span class="line"><span class="comment"># 6  two   4   6</span></span><br><span class="line"><span class="built_in">print</span>(data.drop_duplicates([<span class="string">&#x27;k1&#x27;</span>]))</span><br><span class="line"><span class="comment">#     k1  k2  v1</span></span><br><span class="line"><span class="comment"># 0  one   1   0</span></span><br><span class="line"><span class="comment"># 1  two   1   1</span></span><br><span class="line"><span class="built_in">print</span>(data.drop_duplicates([<span class="string">&#x27;k1&#x27;</span>],keep=<span class="string">&#x27;last&#x27;</span>))</span><br><span class="line"><span class="comment">#     k1  k2  v1</span></span><br><span class="line"><span class="comment"># 4  one   3   4</span></span><br><span class="line"><span class="comment"># 6  two   4   6</span></span><br></pre></td></tr></table></figure>



<h2 id="矢量化字符串方法"><a href="#矢量化字符串方法" class="headerlink" title="矢量化字符串方法"></a>矢量化字符串方法</h2><p>Series 支持字符串处理方法，可以非常方便地操作数组里的每个元素。这些方法会自动排除缺失值与空值，这也许是其最重要的特性。这些方法通过 Series 的 <code>str</code> 属性访问，一般情况下，这些操作的名称与内置的字符串方法一致。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">s = pd.Series([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;Aaba&#x27;</span>, <span class="string">&#x27;Baca&#x27;</span>, np.nan, <span class="string">&#x27;CABA&#x27;</span>, <span class="string">&#x27;dog&#x27;</span>, <span class="string">&#x27;cat&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s.<span class="built_in">str</span>.lower())</span><br><span class="line"><span class="comment"># 0       a</span></span><br><span class="line"><span class="comment"># 1       b</span></span><br><span class="line"><span class="comment"># 2       c</span></span><br><span class="line"><span class="comment"># 3    aaba</span></span><br><span class="line"><span class="comment"># 4    baca</span></span><br><span class="line"><span class="comment"># 5     NaN</span></span><br><span class="line"><span class="comment"># 6    caba</span></span><br><span class="line"><span class="comment"># 7     dog</span></span><br><span class="line"><span class="comment"># 8     cat</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<h2 id="dt-访问器"><a href="#dt-访问器" class="headerlink" title=".dt 访问器"></a>.dt 访问器</h2><p>对于一个<code>datetime</code>类型的字段，在<code>dataframe</code>中日期时间类型的列数据也可以进行分割处理，即应用属性接口<code>dt</code>。</p>
<p><code>Series</code> 提供一个可以简单、快捷地返回 <code>datetime</code> 属性值的访问器。这个访问器返回的也是 Series，索引与现有的 Series 一样。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># datetime</span></span><br><span class="line">s = pd.Series(pd.date_range(<span class="string">&#x27;20230706 16:13:12&#x27;</span>, periods=<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment"># 0   2023-07-06 16:13:12</span></span><br><span class="line"><span class="comment"># 1   2023-07-07 16:13:12</span></span><br><span class="line"><span class="comment"># 2   2023-07-08 16:13:12</span></span><br><span class="line"><span class="comment"># dtype: datetime64[ns]</span></span><br><span class="line"><span class="built_in">print</span>(s.dt.hour)</span><br><span class="line"><span class="comment"># 0    16</span></span><br><span class="line"><span class="comment"># 1    16</span></span><br><span class="line"><span class="comment"># 2    16</span></span><br><span class="line"><span class="comment"># dtype: int32</span></span><br><span class="line"><span class="built_in">print</span>(s.dt.second)</span><br><span class="line"><span class="comment"># 0    12</span></span><br><span class="line"><span class="comment"># 1    12</span></span><br><span class="line"><span class="comment"># 2    12</span></span><br><span class="line"><span class="comment"># dtype: int32</span></span><br><span class="line"><span class="built_in">print</span>(s.dt.day)</span><br><span class="line"><span class="comment"># 0    6</span></span><br><span class="line"><span class="comment"># 1    7</span></span><br><span class="line"><span class="comment"># 2    8</span></span><br><span class="line"><span class="comment"># dtype: int32</span></span><br></pre></td></tr></table></figure>

<p>还可以用 <code>Series.dt.strftime()</code> 把 <code>datetime</code> 的值当成字符串进行格式化，支持与标准 <code>strftime()</code>同样的格式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DatetimeIndex</span></span><br><span class="line">s = pd.Series(pd.date_range(<span class="string">&#x27;20130101&#x27;</span>, periods=<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0   2013-01-01</span></span><br><span class="line"><span class="comment"># 1   2013-01-02</span></span><br><span class="line"><span class="comment"># 2   2013-01-03</span></span><br><span class="line"><span class="comment"># 3   2013-01-04</span></span><br><span class="line"><span class="comment"># dtype: datetime64[ns]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s.dt.strftime(<span class="string">&#x27;%Y/%m/%d&#x27;</span>))</span><br><span class="line"><span class="comment"># 0    2013/01/01</span></span><br><span class="line"><span class="comment"># 1    2013/01/02</span></span><br><span class="line"><span class="comment"># 2    2013/01/03</span></span><br><span class="line"><span class="comment"># 3    2013/01/04</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PeriodIndex</span></span><br><span class="line">s = pd.Series(pd.period_range(<span class="string">&#x27;20130101&#x27;</span>, periods=<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment"># 0    2013-01-01</span></span><br><span class="line"><span class="comment"># 1    2013-01-02</span></span><br><span class="line"><span class="comment"># 2    2013-01-03</span></span><br><span class="line"><span class="comment"># 3    2013-01-04</span></span><br><span class="line"><span class="comment"># dtype: period[D]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s.dt.strftime(<span class="string">&#x27;%Y/%m/%d&#x27;</span>))</span><br><span class="line"><span class="comment"># 0    2013/01/01</span></span><br><span class="line"><span class="comment"># 1    2013/01/02</span></span><br><span class="line"><span class="comment"># 2    2013/01/03</span></span><br><span class="line"><span class="comment"># 3    2013/01/04</span></span><br><span class="line"><span class="comment"># dtype: object</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>dt.date</td>
<td>年月日</td>
</tr>
<tr>
<td>dt.year</td>
<td>年</td>
</tr>
<tr>
<td>dt.month</td>
<td>月</td>
</tr>
<tr>
<td>dt.day</td>
<td>日</td>
</tr>
<tr>
<td>dt.hour</td>
<td>时</td>
</tr>
<tr>
<td>dt.minute</td>
<td>分</td>
</tr>
<tr>
<td>dt.second</td>
<td>秒</td>
</tr>
<tr>
<td>dt.week</td>
<td>一年中的第几周</td>
</tr>
<tr>
<td>dt.weekday &#x2F; dt.day_of_week</td>
<td>一周中的星期几（0代表星期一）</td>
</tr>
<tr>
<td>dt.day_name()</td>
<td>对于英文星期名称</td>
</tr>
<tr>
<td>dt.month_name()</td>
<td>对应英文月份名称</td>
</tr>
<tr>
<td>dt.dayofyear &#x2F; dt.dat_of_year</td>
<td>一年中的第几天</td>
</tr>
<tr>
<td>dt.quarter</td>
<td>一年中的第几个季度</td>
</tr>
<tr>
<td>dt.is_leap_year</td>
<td>是否是闰年</td>
</tr>
</tbody></table>
<h1 id="日期处理"><a href="#日期处理" class="headerlink" title="日期处理"></a>日期处理</h1><p>时间序列数据的意义取决于具体的应用场景，主要有以下几种：</p>
<ul>
<li>时间戳（timestamp），特定的时刻。</li>
<li>固定时期（period），如2007年1月或2010年全年。</li>
<li>时间间隔（interval），由起始和结束时间戳表示。时期（period）可以被看做间隔（interval）的特例。</li>
<li>实验或过程时间，每个时间点都是相对于特定起始时间的一个度量。例如，从放入烤箱时起，每秒钟饼干的直径。</li>
</ul>
<p>Python标准库包含用于日期（date）和时间（time）数据的数据类型，而且还有日历方面的功能。我们主要会用到datetime、time以及calendar模块。datetime.datetime（也可以简写为datetime）是用得最多的数据类型：</p>
<h2 id="日期和时间数据类型及工具"><a href="#日期和时间数据类型及工具" class="headerlink" title="日期和时间数据类型及工具"></a>日期和时间数据类型及工具</h2><h3 id="datetime-datetime"><a href="#datetime-datetime" class="headerlink" title="datetime.datetime"></a>datetime.datetime</h3><p><code>datetime.datetime(year, month, day, hour, minute, second, microsecond)</code></p>
<ul>
<li>获取某天日期时间。至少传入year, month, day三个参数。</li>
</ul>
<p>datetime以毫秒形式存储日期和时间。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">delta = datetime(<span class="number">2023</span>, <span class="number">7</span>, <span class="number">6</span>) - datetime(<span class="number">2023</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(delta)</span><br><span class="line"><span class="comment"># 29 days, 15:45:00</span></span><br><span class="line"><span class="built_in">print</span>(delta.days)</span><br><span class="line"><span class="comment"># 29</span></span><br><span class="line"><span class="built_in">print</span>(delta.seconds)</span><br><span class="line"><span class="comment"># 56700</span></span><br></pre></td></tr></table></figure>

<h4 id="datetime-datetime-now"><a href="#datetime-datetime-now" class="headerlink" title="datetime.datetime.now()"></a>datetime.datetime.now()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">now = datetime.now()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(now)</span><br><span class="line"><span class="built_in">print</span>(now.year,now.month,now.day)</span><br><span class="line"><span class="comment"># 2023-07-06 09:58:27.233489</span></span><br><span class="line"><span class="comment"># 2023 7 6</span></span><br></pre></td></tr></table></figure>

<h3 id="datetime-timedelta"><a href="#datetime-timedelta" class="headerlink" title="datetime.timedelta"></a>datetime.timedelta</h3><p><code>datetime.timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, minutes=0, hours=0, weeks=0)</code></p>
<ul>
<li>函数所有参数都是可选的并且默认为 0。 这些参数可以是整数或者浮点数，也可以是正数或者负数。</li>
<li><code>datetime.timedelta()</code>返回类型为 <code>datetime.timedelta</code></li>
</ul>
<p>timedelta表示两个datetime对象之间的时间差。</p>
<p>可以给datetime对象加上（或减去）一个或多个<code>timedelta</code>，这样会产生一个新对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta,datetime</span><br><span class="line">start = datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(start + timedelta(<span class="number">12</span>))</span><br><span class="line"><span class="comment"># 2011-01-19 00:00:00</span></span><br><span class="line"><span class="built_in">print</span>(start - <span class="number">2</span> * timedelta(minutes=<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 2011-01-06 23:40:00</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串和datetime的相互转换"><a href="#字符串和datetime的相互转换" class="headerlink" title="字符串和datetime的相互转换"></a>字符串和datetime的相互转换</h3><h4 id="datetime-strftime"><a href="#datetime-strftime" class="headerlink" title="datetime.strftime()"></a>datetime.strftime()</h4><p><code>datetime对象.strftime(format)</code><br><code>datetime.strftime(datetime对象, format)</code></p>
<ul>
<li>format: 格式化编码</li>
</ul>
<p>利用str或strftime方法（传入一个格式化字符串），datetime对象和pandas的Timestamp对象可以被格式化为字符串：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">stamp = datetime(<span class="number">2023</span>, <span class="number">7</span>, <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用str()将datetime转为字符串</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(stamp))</span><br><span class="line"><span class="comment"># 2023-07-06 00:00:00</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用strftime()将datetime转为字符串</span></span><br><span class="line"><span class="built_in">print</span>(stamp.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>))</span><br><span class="line"><span class="comment"># 2023-07-06</span></span><br><span class="line"><span class="built_in">print</span>(datetime.strftime(stamp,<span class="string">&quot;%Y-%m-%d&quot;</span>))</span><br><span class="line"><span class="comment"># 2023-07-06</span></span><br></pre></td></tr></table></figure>


<h4 id="datetime-strptime"><a href="#datetime-strptime" class="headerlink" title="datetime.strptime()"></a>datetime.strptime()</h4><p><code>datetime.strptime(date_string, format)</code></p>
<ul>
<li><p>date_string: 日期字符串</p>
</li>
<li><p>format: 格式化编码</p>
</li>
</ul>
<p>datetime.strptime可以用这些格式化编码<strong>将字符串转换为datetime日期</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="built_in">print</span>(datetime.strptime(<span class="string">&#x27;2023-07-06&#x27;</span>, <span class="string">&#x27;%Y-%m-%d&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2012-05-02&#x27;, &#x27;2012-05-03&#x27;, &#x27;2012-05-04&#x27;, &#x27;2012-05-05&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2012-05-06&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>datetime.strptime是通过已知格式进行日期解析的最佳方式。但是每次都要编写格式定义是很麻烦的事情，尤其是对于一些常见的日期格式。这种情况下，你可以用dateutil这个第三方包中的parser.parse方法（pandas中已经自动安装好了）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dateutil.parser <span class="keyword">import</span> parse</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(parse(<span class="string">&#x27;2023-07-06&#x27;</span>))</span><br><span class="line"><span class="comment"># 2023-07-06 00:00:00</span></span><br></pre></td></tr></table></figure>

<p>dateutil可以解析几乎所有人类能够理解的日期表示形式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(parse(<span class="string">&#x27;Jan 31, 1997 10:45 PM&#x27;</span>))</span><br><span class="line"><span class="comment"># datetime.datetime(1997, 1, 31, 22, 45)</span></span><br></pre></td></tr></table></figure>

<p>在国际通用的格式中，日出现在月的前面很普遍，传入dayfirst&#x3D;True即可解决这个问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(parse(<span class="string">&#x27;6/12/2011&#x27;</span>, dayfirst=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># datetime.datetime(2011, 12, 6, 0, 0)</span></span><br></pre></td></tr></table></figure>

<h4 id="pandas-to-datetime"><a href="#pandas-to-datetime" class="headerlink" title="pandas.to_datetime()"></a>pandas.to_datetime()</h4><p>当csv文件被导入并形成一个数据框架时，文件中的日期时间对象被读取为字符串对象，而不是日期时间对象，因此，对字符串而不是日期时间对象进行时间差等操作非常困难。Pandas的to_datetime()方法有助于将字符串日期时间转换成Python日期时间对象。</p>
<p><code>pandas.to_datetime (arg, errors=’raise’, dayfirst=False, yearfirst=False, utc=None, box=True, format=None, exact=True, unit=None, infer_datetime_format=False, origin=’unix’, cache=False)</code></p>
<ul>
<li><p>arg: 一个整数、字符串、浮点数、列表或字典对象，用于转换为Date时间对象。</p>
</li>
<li><p>dayfirst: 布尔值，如果为真，则将日期放在首位。</p>
</li>
<li><p>yearfirst: 布尔值，如果为真，则将年份放在前面。</p>
</li>
<li><p>utc: 布尔值，如果为真，则返回UTC的时间。</p>
</li>
<li><p>format: 字符串输入，告诉日、月、年的位置。</p>
</li>
</ul>
<p>to_datetime方法可以解析多种不同的日期表示形式。对标准日期格式（如ISO8601）的解析非常快：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">datestrs = [<span class="string">&#x27;2011-07-06 12:00:00&#x27;</span>, <span class="string">&#x27;2011-08-06 00:00:00&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(pd.to_datetime(datestrs))</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2011-07-06 12:00:00&#x27;, &#x27;2011-08-06 00:00:00&#x27;], dtype=&#x27;datetime64[ns]&#x27;, freq=None)</span></span><br></pre></td></tr></table></figure>

<p>它还可以处理缺失值（None、空字符串等）：</p>
<p>NaT（Not a Time）是pandas中时间戳数据的null值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">datestrs = [<span class="string">&#x27;2011-07-06 12:00:00&#x27;</span>, <span class="string">&#x27;2011-08-06 00:00:00&#x27;</span>]</span><br><span class="line">idx = pd.to_datetime(datestrs + [<span class="literal">None</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(idx)</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2011-07-06 12:00:00&#x27;, &#x27;2011-08-06 00:00:00&#x27;, &#x27;NaT&#x27;], dtype=&#x27;datetime64[ns]&#x27;, freq=None)</span></span><br><span class="line"><span class="built_in">print</span>(idx[<span class="number">2</span>])</span><br><span class="line"><span class="comment"># NaT</span></span><br><span class="line"><span class="built_in">print</span>(pd.isnull(idx))</span><br><span class="line"><span class="comment"># [False False  True]</span></span><br></pre></td></tr></table></figure>

<h4 id="格式化编码表"><a href="#格式化编码表" class="headerlink" title="格式化编码表"></a>格式化编码表</h4><table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>%y</td>
<td>两位数的年份表示（00-99）</td>
</tr>
<tr>
<td>%Y</td>
<td>四位数的年份表示（000-9999）</td>
</tr>
<tr>
<td>%m</td>
<td>月份（01-12）</td>
</tr>
<tr>
<td>%d</td>
<td>月内中的一天（0-31）</td>
</tr>
<tr>
<td>%H</td>
<td>24小时制小时数（0-23）</td>
</tr>
<tr>
<td>%I</td>
<td>12小时制小时数（01-12）</td>
</tr>
<tr>
<td>%M</td>
<td>分钟数（00&#x3D;59）</td>
</tr>
<tr>
<td>%S</td>
<td>秒（00-59）</td>
</tr>
<tr>
<td>%a</td>
<td>本地简化星期名称</td>
</tr>
<tr>
<td>%A</td>
<td>本地完整星期名称</td>
</tr>
<tr>
<td>%b</td>
<td>本地简化的月份名称</td>
</tr>
<tr>
<td>%B</td>
<td>本地完整的月份名称</td>
</tr>
<tr>
<td>%c</td>
<td>本地相应的日期表示和时间表示</td>
</tr>
<tr>
<td>%j</td>
<td>年内的一天（001-366）</td>
</tr>
<tr>
<td>%p</td>
<td>本地A.M.或P.M.的等价符</td>
</tr>
<tr>
<td>%U</td>
<td>一年中的星期数（00-53）星期天为星期的开始</td>
</tr>
<tr>
<td>%w</td>
<td>星期（0-6），星期天为星期的开始</td>
</tr>
<tr>
<td>%W</td>
<td>一年中的星期数（00-53）星期一为星期的开始</td>
</tr>
<tr>
<td>%x</td>
<td>本地相应的日期表示</td>
</tr>
<tr>
<td>%X</td>
<td>本地相应的时间表示</td>
</tr>
<tr>
<td>%Z</td>
<td>当前时区的名称</td>
</tr>
<tr>
<td>%%</td>
<td>%号本身</td>
</tr>
</tbody></table>
<h2 id="时间序列"><a href="#时间序列" class="headerlink" title="时间序列"></a>时间序列</h2><p>pandas最基本的时间序列类型就是以时间戳（通常以Python字符串或datatime对象表示）为索引的Series：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">dates = [datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">2</span>), datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">5</span>),</span><br><span class="line">         datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">7</span>), datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">8</span>),</span><br><span class="line">         datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">10</span>), datetime(<span class="number">2011</span>, <span class="number">1</span>, <span class="number">12</span>)]</span><br><span class="line">ts = pd.Series(np.random.randn(<span class="number">6</span>), index=dates)</span><br><span class="line"><span class="built_in">print</span>(ts)</span><br><span class="line"><span class="comment"># 2011-01-02   -1.143138</span></span><br><span class="line"><span class="comment"># 2011-01-05    0.298419</span></span><br><span class="line"><span class="comment"># 2011-01-07    1.018143</span></span><br><span class="line"><span class="comment"># 2011-01-08   -0.579162</span></span><br><span class="line"><span class="comment"># 2011-01-10   -0.787679</span></span><br><span class="line"><span class="comment"># 2011-01-12    0.223588</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>这些datetime对象实际上是被放在一个DatetimeIndex中的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(ts.index)</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2011-01-02&#x27;, &#x27;2011-01-05&#x27;, &#x27;2011-01-07&#x27;, &#x27;2011-01-08&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2011-01-10&#x27;, &#x27;2011-01-12&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=None)</span></span><br></pre></td></tr></table></figure>

<p>跟其他Series一样，不同索引的时间序列之间的算术运算会自动按日期对齐：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(ts + ts[::<span class="number">2</span>])</span><br><span class="line"><span class="comment"># ts[::2] 是每隔两个取一个。</span></span><br><span class="line"><span class="comment"># 2011-01-02   -2.286277</span></span><br><span class="line"><span class="comment"># 2011-01-05         NaN</span></span><br><span class="line"><span class="comment"># 2011-01-07    2.036286</span></span><br><span class="line"><span class="comment"># 2011-01-08         NaN</span></span><br><span class="line"><span class="comment"># 2011-01-10   -1.575358</span></span><br><span class="line"><span class="comment"># 2011-01-12         NaN</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br></pre></td></tr></table></figure>

<p>pandas用NumPy的datetime64数据类型以纳秒形式存储时间戳：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(ts.index.dtype)</span><br><span class="line"><span class="comment"># datetime64[ns]</span></span><br></pre></td></tr></table></figure>

<p>DatetimeIndex中的各个标量值是pandas的Timestamp对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stamp = ts.index[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(stamp)</span><br><span class="line"><span class="comment"># Timestamp(&#x27;2011-01-02 00:00:00&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>只要有需要，TimeStamp可以随时自动转换为datetime对象。此外，它还可以存储频率信息（如果有的话），且知道如何执行时区转换以及其他操作。</p>
<h2 id="日期的范围、频率以及移动"><a href="#日期的范围、频率以及移动" class="headerlink" title="日期的范围、频率以及移动"></a>日期的范围、频率以及移动</h2><h3 id="pandas-date-range"><a href="#pandas-date-range" class="headerlink" title="pandas.date_range()"></a>pandas.date_range()</h3><p><code>pd.date_range(start=None, end=None, periods=None, freq=‘D’, tz=None, normalize=False, name=None, closed=None, **kwargs)</code></p>
<ul>
<li>start：开始时间</li>
<li>end：结束时间</li>
<li>periods：持续时间</li>
<li>freq：频率，默认天</li>
<li>normalize：时间参数值正则化到午夜时间戳</li>
<li>name：索引对象名称</li>
<li>closed：默认为None的情况下，左闭右闭，left则左闭右开，right则左开右闭</li>
<li>pd.date_range()默认频率为日历日</li>
<li>pd.bdate_range()默认频率为工作日</li>
<li>tz：时区</li>
</ul>
<p><code>pandas.date_range</code>可用于根据指定的频率生成指定长度的DatetimeIndex：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">index = pd.date_range(<span class="string">&#x27;2023-07-01&#x27;</span>, <span class="string">&#x27;2023-08-01&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(index)</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2023-07-01&#x27;, &#x27;2023-07-02&#x27;, &#x27;2023-07-03&#x27;, &#x27;2023-07-04&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-05&#x27;, &#x27;2023-07-06&#x27;, &#x27;2023-07-07&#x27;, &#x27;2023-07-08&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-09&#x27;, &#x27;2023-07-10&#x27;, &#x27;2023-07-11&#x27;, &#x27;2023-07-12&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-13&#x27;, &#x27;2023-07-14&#x27;, &#x27;2023-07-15&#x27;, &#x27;2023-07-16&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-17&#x27;, &#x27;2023-07-18&#x27;, &#x27;2023-07-19&#x27;, &#x27;2023-07-20&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-21&#x27;, &#x27;2023-07-22&#x27;, &#x27;2023-07-23&#x27;, &#x27;2023-07-24&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-25&#x27;, &#x27;2023-07-26&#x27;, &#x27;2023-07-27&#x27;, &#x27;2023-07-28&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-29&#x27;, &#x27;2023-07-30&#x27;, &#x27;2023-07-31&#x27;, &#x27;2023-08-01&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>默认情况下，date_range会产生按天计算的时间点。如果只传入起始或结束日期，那就还得传入一个表示一段时间的数字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">index1 = pd.date_range(start=<span class="string">&quot;2023-07-06&quot;</span>,periods=<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(index1)</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2023-07-06&#x27;, &#x27;2023-07-07&#x27;, &#x27;2023-07-08&#x27;, &#x27;2023-07-09&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-10&#x27;, &#x27;2023-07-11&#x27;, &#x27;2023-07-12&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span></span><br><span class="line"></span><br><span class="line">index2 = pd.date_range(end=<span class="string">&quot;2023-07-06&quot;</span>,periods=<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(index2)</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2023-06-30&#x27;, &#x27;2023-07-01&#x27;, &#x27;2023-07-02&#x27;, &#x27;2023-07-03&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2023-07-04&#x27;, &#x27;2023-07-05&#x27;, &#x27;2023-07-06&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>date_range默认会保留起始和结束时间戳的时间信息（如果有的话）：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(pd.date_range(<span class="string">&#x27;2012-05-02 12:56:31&#x27;</span>, periods=<span class="number">5</span>))</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2012-05-02 12:56:31&#x27;, &#x27;2012-05-03 12:56:31&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2012-05-04 12:56:31&#x27;, &#x27;2012-05-05 12:56:31&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2012-05-06 12:56:31&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>有时，虽然起始和结束日期带有时间信息，但你希望产生一组被规范化（normalize）到午夜的时间戳。normalize选项即可实现该功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(pd.date_range(<span class="string">&#x27;2012-05-02 12:56:31&#x27;</span>, periods=<span class="number">5</span>, normalize=<span class="literal">True</span>))</span><br><span class="line"><span class="comment"># DatetimeIndex([&#x27;2012-05-02&#x27;, &#x27;2012-05-03&#x27;, &#x27;2012-05-04&#x27;, &#x27;2012-05-05&#x27;,</span></span><br><span class="line"><span class="comment">#                &#x27;2012-05-06&#x27;],</span></span><br><span class="line"><span class="comment">#               dtype=&#x27;datetime64[ns]&#x27;, freq=&#x27;D&#x27;)</span></span><br></pre></td></tr></table></figure>




</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/avator_img.JPG" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/avator_img.JPG" title="头像" alt="头像"></a><div class="post-copyright__author_name">Andy Yin</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/')">Python知识点大全</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Python知识点大全&amp;url=http://example.com/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&amp;pic=https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=65347007-cd0c-01c2-f453-81997d895d32" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Andy Yin</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>数据分析<span class="tagsPageCount">8</span></a><a class="post-meta__box__tags" href="/tags/Python/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Python<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Gemini1996/assets@master/imgs/cover/cover-11.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/27/MySQL%E9%A2%98%E5%BA%93/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/mysql.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MySQL题库</div></div></a></div><div class="next-post pull-right"><a href="/2024/01/04/2024%E6%97%A5%E8%AE%B0/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=d48bb3e4-7274-1fcd-546e-43db2e23d608" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2024日记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2023/03/17/Excel/" title="Excel知识点大全"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/excel-banner.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-03-17</div><div class="title">Excel知识点大全</div></div></a></div><div><a href="/2023/03/27/MySQL%E9%A2%98%E5%BA%93/" title="MySQL题库"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/mysql.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-03-27</div><div class="title">MySQL题库</div></div></a></div><div><a href="/2023/02/16/Tableau%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/" title="Tableau知识点大全"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/tableau-cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-02-16</div><div class="title">Tableau知识点大全</div></div></a></div><div><a href="/2022/02/20/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" title="数据分析知识总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/da.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-02-20</div><div class="title">数据分析知识总结</div></div></a></div><div><a href="/2023/03/12/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="MySQL知识点大全"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/mysql.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-03-12</div><div class="title">MySQL知识点大全</div></div></a></div><div><a href="/2023/03/10/%E7%94%A8%E6%95%B0%E6%8D%AE%E8%AE%B2%E6%95%85%E4%BA%8B/" title="《用数据讲故事》读后感"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic3.zhimg.com/80/v2-64f69f3c52a30c2b161a52a4fdf545ba_1440w.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-03-10</div><div class="title">《用数据讲故事》读后感</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/avator_img.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">想方设法偷懒并不是一件坏事</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Andy Yin</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Gemini1996/" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1852605" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=870263950@qq.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/wechat-front.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/wechat-back.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E5%9F%BA%E7%A1%80"><span class="toc-text">Python基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E5%91%BD%E5%90%8D%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-text">变量的命名和使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-text">注释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="toc-text">单行注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="toc-text">多行注释</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E5%BC%95%E5%8F%B7%EF%BC%88%E2%80%99%E2%80%99%E2%80%99%EF%BC%89"><span class="toc-text">单引号（’’’）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8C%E5%BC%95%E5%8F%B7%EF%BC%88%E2%80%9D%E2%80%9D%E2%80%9D%EF%BC%89"><span class="toc-text">双引号（”””）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-text">进制转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%ACN%E8%BF%9B%E5%88%B6"><span class="toc-text">十进制转N进制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%BD%ACN%E8%BF%9B%E5%88%B6"><span class="toc-text">二进制转N进制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB%E8%BF%9B%E5%88%B6%E8%BD%ACN%E8%BF%9B%E5%88%B6"><span class="toc-text">八进制转N进制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BD%ACN%E8%BF%9B%E5%88%B6"><span class="toc-text">十六进制转N进制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88String%EF%BC%89"><span class="toc-text">字符串（String）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%80%BC"><span class="toc-text">访问字符串的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="toc-text">转义字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">字符串运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">字符串格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">多行字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E5%BC%95%E5%8F%B7"><span class="toc-text">三引号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%AD%E8%88%AA%E7%AC%A6"><span class="toc-text">续航符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%AC%E5%8F%B7"><span class="toc-text">括号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-text">内建函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#upper-%E3%80%81lower-%E3%80%81title"><span class="toc-text">upper()、lower()、title()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#strip"><span class="toc-text">strip()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#count"><span class="toc-text">count()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#split"><span class="toc-text">split()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#replace"><span class="toc-text">replace()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#find"><span class="toc-text">find()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#join"><span class="toc-text">join()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#isxxx"><span class="toc-text">isxxx()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#format"><span class="toc-text">format()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">数字格式化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#f-string"><span class="toc-text">f-string</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%EF%BC%88List%EF%BC%89"><span class="toc-text">列表（List）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%88%97%E8%A1%A8%E5%80%BC"><span class="toc-text">访问列表值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E7%89%87"><span class="toc-text">切片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-text">添加元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0"><span class="toc-text">插入元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text">删除元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%88%97%E8%A1%A8"><span class="toc-text">扩展列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%BB%87%E6%8E%92%E5%BA%8F"><span class="toc-text">组织排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E8%BD%AC%E9%A1%BA%E5%BA%8F"><span class="toc-text">反转顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%88%97%E8%A1%A8%E9%95%BF%E5%BA%A6"><span class="toc-text">获取列表长度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E4%BD%8D%E7%BD%AE"><span class="toc-text">匹配位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">脚本操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text">列表推导式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%83%E7%BB%84%EF%BC%88Tuple%EF%BC%89"><span class="toc-text">元组（Tuple）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%85%83%E7%BB%84"><span class="toc-text">创建元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%85%83%E7%BB%84"><span class="toc-text">修改元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%BB%84"><span class="toc-text">删除元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%85%83%E7%BB%84"><span class="toc-text">访问元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%85%83%E7%BB%84"><span class="toc-text">迭代元组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%86%E5%88%86%E5%85%83%E7%A5%96"><span class="toc-text">拆分元祖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text">元组推导式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%EF%BC%88Dict%EF%BC%89"><span class="toc-text">字典（Dict）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%AD%97%E5%85%B8%E4%B8%AD%E7%9A%84%E5%80%BC"><span class="toc-text">访问字典中的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E5%85%B8"><span class="toc-text">修改字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%97%E5%85%B8%E5%85%83%E7%B4%A0"><span class="toc-text">删除字典元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E7%A9%BA%E5%AD%97%E5%85%B8"><span class="toc-text">清空字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E5%AD%97%E5%85%B8"><span class="toc-text">遍历字典</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%89%80%E6%9C%89%E9%94%AE%E5%80%BC%E5%AF%B9"><span class="toc-text">遍历所有键值对</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%89%80%E6%9C%89%E9%94%AE"><span class="toc-text">遍历所有键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%89%80%E6%9C%89%E5%80%BC"><span class="toc-text">遍历所有值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%9E%8D%E5%90%88%E5%AD%97%E5%85%B8"><span class="toc-text">融合字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E5%BA%8F%E5%88%97%E5%88%9B%E5%BB%BA%E5%AD%97%E5%85%B8"><span class="toc-text">用序列创建字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text">字典推导式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E9%94%AE%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-text">字典键的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-text">内置方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#get"><span class="toc-text">get()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#keys"><span class="toc-text">keys()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#values"><span class="toc-text">values()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#items"><span class="toc-text">items()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E5%90%88%EF%BC%88Set%EF%BC%89"><span class="toc-text">集合（Set）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88"><span class="toc-text">创建集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0-1"><span class="toc-text">添加元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0-1"><span class="toc-text">删除元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%85%83%E7%B4%A0%E6%98%AF%E5%90%A6%E5%9C%A8%E9%9B%86%E5%90%88%E4%B8%AD%E5%AD%98%E5%9C%A8"><span class="toc-text">判断元素是否在集合中存在</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97"><span class="toc-text">集合运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text">集合推导式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E6%9B%B4%E6%94%B9-mutable-%E4%B8%8E%E4%B8%8D%E5%8F%AF%E6%9B%B4%E6%94%B9-immutable-%E5%AF%B9%E8%B1%A1"><span class="toc-text">可更改(mutable)与不可更改(immutable)对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B"><span class="toc-text">传不可变对象实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E5%8F%AF%E5%8F%98%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B"><span class="toc-text">传可变对象实例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-text">可变参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0%EF%BC%88positional-argument%EF%BC%89"><span class="toc-text">位置参数（positional argument）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%82%E6%95%B0%EF%BC%88keyword-argument%EF%BC%89"><span class="toc-text">关键字参数（keyword argument）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D-lambda-%E5%87%BD%E6%95%B0"><span class="toc-text">匿名(lambda)函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="toc-text">内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#print"><span class="toc-text">print()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval"><span class="toc-text">eval()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#enumerate"><span class="toc-text">enumerate()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter"><span class="toc-text">filter()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-text">map()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sorted"><span class="toc-text">sorted()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip"><span class="toc-text">zip()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reversed"><span class="toc-text">reversed()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setattr"><span class="toc-text">setattr()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hasattr"><span class="toc-text">hasattr()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getattr"><span class="toc-text">getattr()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%85%83%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">三元表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-text">文件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80"><span class="toc-text">文件打开</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#With%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">With关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1%E8%AF%BB%E5%86%99"><span class="toc-text">文件对象读写</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#file-read"><span class="toc-text">file.read()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-readline"><span class="toc-text">file.readline()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-readlines"><span class="toc-text">file.readlines()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-write"><span class="toc-text">file.write()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-tell"><span class="toc-text">file.tell()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-seek"><span class="toc-text">file.seek()</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NumPy"><span class="toc-text">NumPy</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ndarray-%E5%AF%B9%E8%B1%A1"><span class="toc-text">Ndarray 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-array"><span class="toc-text">numpy.array</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%B1%9E%E6%80%A7"><span class="toc-text">数组属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84"><span class="toc-text">创建数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-arange"><span class="toc-text">numpy.arange</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-empty"><span class="toc-text">numpy.empty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-zeros"><span class="toc-text">numpy.zeros</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-ones"><span class="toc-text">numpy.ones</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-zeros-like"><span class="toc-text">numpy.zeros_like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-ones-like"><span class="toc-text">numpy.ones_like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#numpy-linspace"><span class="toc-text">numpy.linspace</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E7%89%87%E5%92%8C%E7%B4%A2%E5%BC%95"><span class="toc-text">切片和索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%B4%A2%E5%BC%95"><span class="toc-text">数组索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%B4%A2%E5%BC%95"><span class="toc-text">布尔索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8A%B1%E5%BC%8F%E7%B4%A2%E5%BC%95"><span class="toc-text">花式索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">一维数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">二维数组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C"><span class="toc-text">数组操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E7%BB%84%E5%BD%A2%E7%8A%B6"><span class="toc-text">修改数组形状</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#numpy-reshape"><span class="toc-text">numpy.reshape</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E8%BD%AC%E7%BD%AE%E5%92%8C%E8%BD%B4%E5%AF%B9%E6%8D%A2"><span class="toc-text">数组转置和轴对换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%95%B0%E7%BB%84%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-text">利用数组进行数据处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E6%9D%A1%E4%BB%B6%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BF%B0%E4%B8%BA%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97"><span class="toc-text">将条件逻辑表述为数组运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%A6%E5%92%8C%E7%BB%9F%E8%AE%A1%E6%96%B9%E6%B3%95"><span class="toc-text">数学和统计方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E5%B8%83%E5%B0%94%E5%9E%8B%E6%95%B0%E7%BB%84%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">用于布尔型数组的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-text">排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E5%8C%96%E4%BB%A5%E5%8F%8A%E5%85%B6%E5%AE%83%E7%9A%84%E9%9B%86%E5%90%88%E9%80%BB%E8%BE%91"><span class="toc-text">唯一化以及其它的集合逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D-%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-text">深拷贝&amp;浅拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E5%85%A8%E4%B8%8D%E5%A4%8D%E5%88%B6"><span class="toc-text">完全不复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E6%88%96%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-text">视图或浅拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-text">深拷贝</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Pandas"><span class="toc-text">Pandas</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Series"><span class="toc-text">Series</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DataFrame"><span class="toc-text">DataFrame</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">常用方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1"><span class="toc-text">索引对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-text">基本功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E7%B4%A2%E5%BC%95"><span class="toc-text">重新索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A2%E5%BC%83%E6%8C%87%E5%AE%9A%E8%BD%B4%E4%B8%8A%E7%9A%84%E9%A1%B9"><span class="toc-text">丢弃指定轴上的项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E3%80%81%E9%80%89%E5%8F%96%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-text">索引、选取和过滤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#query"><span class="toc-text">query()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8loc%E5%92%8Ciloc%E8%BF%9B%E8%A1%8C%E9%80%89%E5%8F%96"><span class="toc-text">用loc和iloc进行选取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E7%B4%A2%E5%BC%95"><span class="toc-text">整数索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E5%92%8C%E6%95%B0%E6%8D%AE%E5%AF%B9%E9%BD%90"><span class="toc-text">算术运算和数据对齐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%AE%97%E6%9C%AF%E6%96%B9%E6%B3%95%E4%B8%AD%E5%A1%AB%E5%85%85%E5%80%BC"><span class="toc-text">在算术方法中填充值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DataFrame%E5%92%8CSeries%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-text">DataFrame和Series之间的运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8%E5%92%8C%E6%98%A0%E5%B0%84"><span class="toc-text">函数应用和映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E5%92%8C%E6%8E%92%E5%90%8D"><span class="toc-text">排序和排名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sort-index"><span class="toc-text">sort_index()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ascending"><span class="toc-text">ascending</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort-values"><span class="toc-text">sort_values()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A6%E6%9C%89%E9%87%8D%E5%A4%8D%E6%A0%87%E7%AD%BE%E7%9A%84%E8%BD%B4%E7%B4%A2%E5%BC%95"><span class="toc-text">带有重复标签的轴索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%87%E6%80%BB%E5%92%8C%E8%AE%A1%E7%AE%97%E6%8F%8F%E8%BF%B0%E7%BB%9F%E8%AE%A1"><span class="toc-text">汇总和计算描述统计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sum"><span class="toc-text">sum()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#skipna"><span class="toc-text">skipna</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#idxmax"><span class="toc-text">idxmax()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cumsum"><span class="toc-text">cumsum()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#describe"><span class="toc-text">describe()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unique"><span class="toc-text">unique()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nunique"><span class="toc-text">nunique()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#value-counts"><span class="toc-text">value_counts()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0%E4%B8%80%E8%A7%88%E8%A1%A8"><span class="toc-text">统计函数一览表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%AD%98%E5%82%A8"><span class="toc-text">数据加载与存储</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Excel%E6%96%87%E4%BB%B6"><span class="toc-text">Excel文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#to-excel"><span class="toc-text">to_excel</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set-index"><span class="toc-text">set_index</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSV-%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-text">CSV &amp; 文本文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#read-csv"><span class="toc-text">read_csv()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#read-table"><span class="toc-text">read_table()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A1%8C-%E5%88%97%E5%90%8D"><span class="toc-text">自定义行&#x2F;列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E9%9A%94%E7%AC%A6"><span class="toc-text">自定义分隔符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%90%E5%9D%97%E8%AF%BB%E5%8F%96%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-text">逐块读取文本文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#nrows"><span class="toc-text">nrows</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#chunksize"><span class="toc-text">chunksize</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#to-csv"><span class="toc-text">to_csv()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%88%86%E9%9A%94%E7%AC%A6%E6%A0%BC%E5%BC%8F"><span class="toc-text">处理分隔符格式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%BA%E5%A4%B1%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-text">缺失数据处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%A4%E9%99%A4%E7%BC%BA%E5%A4%B1%E6%95%B0%E6%8D%AE"><span class="toc-text">滤除缺失数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dropna"><span class="toc-text">dropna()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A1%AB%E5%85%85%E7%BC%BA%E5%A4%B1%E6%95%B0%E6%8D%AE"><span class="toc-text">填充缺失数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#fillna"><span class="toc-text">fillna()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2"><span class="toc-text">数据转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E6%95%B0%E6%8D%AE"><span class="toc-text">移除重复数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#duplicated"><span class="toc-text">duplicated()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#drop-duplicates"><span class="toc-text">drop_duplicates()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A2%E9%87%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="toc-text">矢量化字符串方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dt-%E8%AE%BF%E9%97%AE%E5%99%A8"><span class="toc-text">.dt 访问器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%A4%84%E7%90%86"><span class="toc-text">日期处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%B7%A5%E5%85%B7"><span class="toc-text">日期和时间数据类型及工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#datetime-datetime"><span class="toc-text">datetime.datetime</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#datetime-datetime-now"><span class="toc-text">datetime.datetime.now()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#datetime-timedelta"><span class="toc-text">datetime.timedelta</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8Cdatetime%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2"><span class="toc-text">字符串和datetime的相互转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#datetime-strftime"><span class="toc-text">datetime.strftime()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#datetime-strptime"><span class="toc-text">datetime.strptime()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pandas-to-datetime"><span class="toc-text">pandas.to_datetime()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%BC%96%E7%A0%81%E8%A1%A8"><span class="toc-text">格式化编码表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97"><span class="toc-text">时间序列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%9A%84%E8%8C%83%E5%9B%B4%E3%80%81%E9%A2%91%E7%8E%87%E4%BB%A5%E5%8F%8A%E7%A7%BB%E5%8A%A8"><span class="toc-text">日期的范围、频率以及移动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pandas-date-range"><span class="toc-text">pandas.date_range()</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/02/15/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" title="2023年度总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/cover-1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2023年度总结"/></a><div class="content"><a class="title" href="/2024/02/15/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" title="2023年度总结">2023年度总结</a><time datetime="2024-02-15T15:49:03.000Z" title="发表于 2024-02-15 23:49:03">2024-02-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/04/2024%E6%97%A5%E8%AE%B0/" title="2024日记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=d48bb3e4-7274-1fcd-546e-43db2e23d608" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2024日记"/></a><div class="content"><a class="title" href="/2024/01/04/2024%E6%97%A5%E8%AE%B0/" title="2024日记">2024日记</a><time datetime="2024-01-04T11:31:47.000Z" title="发表于 2024-01-04 19:31:47">2024-01-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Python知识点大全"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://file.crazywong.com/gh/jerryc127/CDN@latest/cover/default_bg.png?_r_=65347007-cd0c-01c2-f453-81997d895d32" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python知识点大全"/></a><div class="content"><a class="title" href="/2023/05/16/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="Python知识点大全">Python知识点大全</a><time datetime="2023-05-16T14:09:47.000Z" title="发表于 2023-05-16 22:09:47">2023-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/27/MySQL%E9%A2%98%E5%BA%93/" title="MySQL题库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/mysql.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL题库"/></a><div class="content"><a class="title" href="/2023/03/27/MySQL%E9%A2%98%E5%BA%93/" title="MySQL题库">MySQL题库</a><time datetime="2023-03-27T12:50:47.000Z" title="发表于 2023-03-27 20:50:47">2023-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/27/%E6%B5%B7%E7%9B%97%E6%8C%87%E6%A0%87/" title="海盗指标"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/blog-cover/da.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="海盗指标"/></a><div class="content"><a class="title" href="/2023/03/27/%E6%B5%B7%E7%9B%97%E6%8C%87%E6%A0%87/" title="海盗指标">海盗指标</a><time datetime="2023-03-27T12:47:47.000Z" title="发表于 2023-03-27 20:47:47">2023-03-27</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Andy Yin</div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">文章导航</div><div class="footer-links"><a class="footer-item" title="隧道" href="/archives/">隧道</a><a class="footer-item" title="分类" href="/categories/">分类</a><a class="footer-item" title="标签" href="/tags/">标签</a></div></div><div class="footer-group"><div class="footer-title">图片工具</div><div class="footer-links"><a class="footer-item" title="TinyPNG" target="_blank" rel="noopener" href="https://tinypng.com/">TinyPNG</a><a class="footer-item" title="removebg" target="_blank" rel="noopener" href="https://www.remove.bg/zh">removebg</a><a class="footer-item" title="ClipDrop" target="_blank" rel="noopener" href="https://clipdrop.com/">ClipDrop</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://www.aliyun.com/product/oss" style="margin-inline:5px" data-title="本站使用阿里云OSS数据存取服务" title="本站使用阿里云OSS数据存取服务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/aliyun-oss.svg" alt="本站使用阿里云OSS数据存取服务"/></a><a class="github-badge" target="_blank" href="https://gitee.com/" style="margin-inline:5px" data-title="本站项目由Gitee托管" title="本站项目由Gitee托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/gitee.svg" alt="本站项目由Gitee托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">开发</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitee.com/" title="Gitee"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/gitee.ico" alt="Gitee"/><span class="back-menu-item-text">Gitee</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.aliyun.com/product/oss" title="阿里云OSS"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/aliyun.ico" alt="阿里云OSS"/><span class="back-menu-item-text">阿里云OSS</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">娱乐</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.zhibo8.cc/" title="直播吧"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/zhibo8.png" alt="直播吧"/><span class="back-menu-item-text">直播吧</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://www.bilibili.com/" title="哔哩哔哩"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://yinzhm-picture.oss-cn-shanghai.aliyuncs.com/markdown-picture/images/bilibili.ico" alt="哔哩哔哩"/><span class="back-menu-item-text">哔哩哔哩</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/EXCEL/" style="font-size: 0.88rem;">EXCEL<sup>1</sup></a><a href="/tags/Google-Adwords/" style="font-size: 0.88rem;">Google Adwords<sup>1</sup></a><a href="/tags/HTTP/" style="font-size: 0.88rem;">HTTP<sup>2</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>2</sup></a><a href="/tags/Photoshop/" style="font-size: 0.88rem;">Photoshop<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>1</sup></a><a href="/tags/Tableau/" style="font-size: 0.88rem;">Tableau<sup>1</sup></a><a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 0.88rem;">年度总结<sup>5</sup></a><a href="/tags/%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size: 0.88rem;">心理学<sup>1</sup></a><a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 0.88rem;">摄影<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">数据分析<sup>8</sup></a><a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 0.88rem;">日记<sup>4</sup></a><a href="/tags/%E7%8A%B6%E6%80%81%E7%A0%81/" style="font-size: 0.88rem;">状态码<sup>1</sup></a><a href="/tags/%E8%AF%BB%E5%90%8E%E6%84%9F/" style="font-size: 0.88rem;">读后感<sup>3</sup></a><a href="/tags/%E8%BF%90%E8%90%A5/" style="font-size: 0.88rem;">运营<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8274607187" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;null&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>